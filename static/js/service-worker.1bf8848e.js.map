{"version":3,"sources":["../static/js/service-worker.1bf8848e.js","../webpack/bootstrap 3066e7a6ab0ca9c9ebfe","data/fetcher.js","constants.js","log.js","data/transform.js","service-worker/index.js","db/bibles/esv.js","db/key-val-store.js","db/bibles/kjv.js","../node_modules/babel-runtime/regenerator/index.js","../node_modules/regenerator-runtime/runtime-module.js","../node_modules/regenerator-runtime/runtime.js","data/model.js","actions.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","12","__webpack_exports__","ESV_BASE","fetchOrThrow","esvLookup","updateStoreWithPassageText","__WEBPACK_IMPORTED_MODULE_0__actions__","__WEBPACK_IMPORTED_MODULE_1__constants__","__WEBPACK_IMPORTED_MODULE_2__log__","__WEBPACK_IMPORTED_MODULE_3__model__","__WEBPACK_IMPORTED_MODULE_4__transform__","URL","KJV_BASE","url","init","fetch","then","response","ok","Error","status","fromDb","headers","fromSw","source","log","toString","esvChapterUrl","reference","searchParams","set","book","chapter","kjvChapterUrl","toLowerCase","replace","authorization","accept","fetchChapter","store","translation","getState","preferences","request","text","json","obj","passages","dispatch","indexIsCached","state","index","chapters","13","FROM_DB_HEADER","FROM_SERVICE_WORKER_HEADER","14","envString","navigator","serviceWorker","message","format","console","15","tagsAndText","html","context","metadata","_ctx","lastCtx","attributeName","_lastCtx","isAttribteEnd","ctx","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","a","wrap","_context","prev","next","type","start","length","last","value","substring","push","isStart","attributes","assign","pop","isQuoted","stop","_marked","this","stripTags","tagName","inObjectTag","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","item","_context2","undefined","Symbol","iterator","done","t0","return","finish","addSpansAroundVerses","inVerse","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","id","_context3","test","class","withTagStack","stack","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_context4","slice","addDropCapsClassToFirstLetter","tagsAndTextWithStack","sawFirstReferenceNumber","sawClosingSpanOrB","addedClass","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_type","_name","_isStart","_value","_attributes","_stack","parts","_parts","leadingWhitespace","leadingEntities","firstLetter","rest","_context5","abrupt","match","_slicedToArray","withSurroundingEvents","window","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_context6","before","after","shift","stripCopyright","tagsAndTextWithSurroundingEvents","inTag","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_iterator6","_step6","_value2","_context7","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","err","Array","isArray","TypeError","map","mark","from","join","157","158","_defineProperty","key","writable","__WEBPACK_IMPORTED_MODULE_0__constants__","__WEBPACK_IMPORTED_MODULE_1__db_bibles_esv__","__WEBPACK_IMPORTED_MODULE_2__db_bibles_kjv__","__WEBPACK_IMPORTED_MODULE_3__data_model__","__WEBPACK_IMPORTED_MODULE_4__data_transform__","__WEBPACK_IMPORTED_MODULE_5__data_fetcher__","__WEBPACK_IMPORTED_MODULE_6__log__","isPassageLookup","hostname","pathname","logStorage","JSON","stringify","fromKjvDb","toKjvDb","fromEsvDb","passageString","toEsvDb","passage","Number","isNaN","createSwResponse","Response","self","addEventListener","event","isEsv","respondWith","_headers2","esvApiJson","search","catch","error","159","_classCallCheck","instance","Constructor","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0__key_val_store__","_instance","STORE_NAME","DB_METADATA","version","stores","EsvBibleStore","_KeyValStore","getPrototypeOf","16","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","KeyValStore","dbMetadata","_db_metadata","_store_name","_this","_db","Promise","resolve","reject","indexedDB","open","onerror","onupgradeneeded","forEach","result","deleteObjectStore","ignore","createObjectStore","onsuccess","callback","_this2","db","transaction","oncomplete","objectStore","req","transact","keyString","put","entries","openCursor","cursor","continue","160","KjvBibleStore","22","23","g","Function","hadRuntime","regeneratorRuntime","getOwnPropertyNames","indexOf","oldRuntime","e","24","global","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","method","AsyncIterator","invoke","record","hasOwn","__await","unwrapped","enqueue","callInvokeWithMethodAndArg","previousPromise","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","GenStateSuspendedYield","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","values","iterable","iteratorMethod","iteratorSymbol","Op","$Symbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","inModule","runtime","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","displayName","isGeneratorFunction","genFun","ctor","awrap","async","iter","keys","reverse","skipTempReset","charAt","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","thrown","delegateYield","3","chapterCounts","CHAPTER_COUNT","books","chapterIndex","pathStringToReference","apiPathToReference","locationToReference","chapterToLocation","referenceToLocation","isEqual","referenceToVerseNumId","verseNumIdToReference","Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalm","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation","chaptersBefore","current","verse","ref","referenceString","_referenceString$spli","split","_referenceString$spli2","bookNumber","chapterAndVerse","_ref","_ref2","_ref3","toUpperCase","parseInt","_pathname$split","_pathname$split2","dashedBook","chapterDotHtml","filter","b","location","decodeURI","_ref4","r","toLocaleString","minimumIntegerDigits","parsed","_parsed","5","setChapterText","addRecent","setRecents","enableFocusMode","enableNightMode","setPreferences","addToast","confirmFocusMode","recents","enabled"],"mappings":"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","file":"static/js/service-worker.1bf8848e.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 157);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 12:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ESV_BASE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return fetchOrThrow; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return esvLookup; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return updateStoreWithPassageText; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__actions__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__log__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__transform__ = __webpack_require__(15);\nvar ESV_BASE=new URL('https://api.esv.org/v3/passage/html/');var ESV_KEY='cecc457af593de97294057073c9be28d7ffdfaf9';var KJV_BASE=new URL('https://everywherebible.org');var fetchOrThrow=function fetchOrThrow(url,init){return fetch(url,init).then(function(response){if(!response.ok)throw new Error(response.url+' failed with '+response.status);var fromDb=response.headers.get(__WEBPACK_IMPORTED_MODULE_1__constants__[\"a\" /* FROM_DB_HEADER */]);var fromSw=response.headers.get(__WEBPACK_IMPORTED_MODULE_1__constants__[\"b\" /* FROM_SERVICE_WORKER_HEADER */]);var source=fromDb?'from DB':fromSw?'from SW':'from network';Object(__WEBPACK_IMPORTED_MODULE_2__log__[\"a\" /* default */])('Received '+url.toString()+' '+source,'font-size: 0.8em');return response;});};var esvChapterUrl=function esvChapterUrl(reference){var url=new URL('',ESV_BASE);url.searchParams.set('q',reference.book+' '+reference.chapter);return url;};var kjvChapterUrl=function kjvChapterUrl(reference){var book=reference.book.toLowerCase().replace(/ /g,'-');return new URL('/api/v1/kjv/'+book+'/'+reference.chapter+'.html',KJV_BASE);};var esvLookup=function esvLookup(url){return fetchOrThrow(url,{headers:{authorization:'Token '+ESV_KEY,accept:'application/json'}});};var fetchChapter=function fetchChapter(store,reference){var translation=store.getState().preferences.translation;var request=translation==='kjv'?fetchOrThrow(kjvChapterUrl(reference)).then(function(response){return response.text();}):esvLookup(esvChapterUrl(reference)).then(function(response){var fromSw=response.headers.get(__WEBPACK_IMPORTED_MODULE_1__constants__[\"b\" /* FROM_SERVICE_WORKER_HEADER */]);return response.json().then(function(obj){return obj.passages[0];}).then(function(text){return fromSw?text:Object(__WEBPACK_IMPORTED_MODULE_4__transform__[\"a\" /* default */])(text);});});request.then(function(text){return store.dispatch(Object(__WEBPACK_IMPORTED_MODULE_0__actions__[\"f\" /* setChapterText */])(translation,reference,text));});return request;};var indexIsCached=function indexIsCached(state,index){return state.chapters[state.preferences.translation][index]!=null;};var updateStoreWithPassageText=function updateStoreWithPassageText(store,reference){var state=store.getState();var index=Object(__WEBPACK_IMPORTED_MODULE_3__model__[\"g\" /* chapterIndex */])(reference);if(!indexIsCached(state,index))fetchChapter(store,reference);if(index>0&&!indexIsCached(state,index-1))fetchChapter(store,Object(__WEBPACK_IMPORTED_MODULE_3__model__[\"d\" /* before */])(reference));if(index<__WEBPACK_IMPORTED_MODULE_3__model__[\"a\" /* CHAPTER_COUNT */]&&!indexIsCached(state,index+1))fetchChapter(store,Object(__WEBPACK_IMPORTED_MODULE_3__model__[\"b\" /* after */])(reference));};\n\n/***/ }),\n\n/***/ 13:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return FROM_DB_HEADER; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return FROM_SERVICE_WORKER_HEADER; });\nvar FROM_DB_HEADER='x-from-db';var FROM_SERVICE_WORKER_HEADER='x-from-service-worker';\n\n/***/ }),\n\n/***/ 14:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar envString=function envString(){return navigator&&navigator.serviceWorker?'main':'sw';};/* harmony default export */ __webpack_exports__[\"a\"] = (function(message,format){return console.log(''+(format!=null?'%c':'')+envString()+' | '+message,format);});\n\n/***/ }),\n\n/***/ 15:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export tagsAndText */\n/* unused harmony export stripTags */\n/* unused harmony export addSpansAroundVerses */\n/* unused harmony export withTagStack */\n/* unused harmony export addDropCapsClassToFirstLetter */\n/* unused harmony export withSurroundingEvents */\n/* unused harmony export stripCopyright */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\nvar _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"])_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();var _marked=[tagsAndText,stripTags,addSpansAroundVerses,withTagStack,addDropCapsClassToFirstLetter,withSurroundingEvents,stripCopyright].map(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark);var last=function last(a){return a[a.length-1];};function tagsAndText(html){var context,index,metadata,_ctx,lastCtx,attributeName,_lastCtx,isAttribteEnd,ctx;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function tagsAndText$(_context){while(1){switch(_context.prev=_context.next){case 0:context=[{type:'document',start:0}];index=-1;metadata={};case 3:if(!(index++<html.length)){_context.next=32;break;}_ctx=last(context);if(!(_ctx.type==='document')){_context.next=16;break;}if(!(html[index]==='<')){_context.next=14;break;}if(!(_ctx.start!==index)){_context.next=10;break;}_context.next=10;return{type:'text',value:html.substring(_ctx.start,index)};case 10:context.push({type:'tag',start:index});metadata={isStart:html[index+1]!=='/',attributes:{}};if(html[index+1]==='/')index++;context.push({type:'tagname',start:index+1});case 14:_context.next=30;break;case 16:if(!(_ctx.type==='tag')){_context.next=29;break;}if(!(html[index]==='>')){_context.next=26;break;}if(_ctx.type==='tagname')metadata.name=html.substring(metadata.isStart?1:2,index);_context.next=21;return Object.assign({type:'tag',value:html.substring(_ctx.start,index+1)},metadata);case 21:context.pop();lastCtx=last(context);lastCtx.start=index+1;_context.next=27;break;case 26:if(html[index]!==' '&&html[index]!=='/'){context.push({type:'attribute',start:index});context.push({type:'attributeName',start:index});}case 27:_context.next=30;break;case 29:if(_ctx.type==='tagname'){if(html[index]===' '||html[index]==='>'){metadata.name=html.substring(_ctx.start,index);context.pop();if(html[index]==='>')index--;}}else if(_ctx.type==='attributeName'){if(html[index]==='='){attributeName=html.substring(_ctx.start,index);context.pop();_lastCtx=last(context);_lastCtx.name=attributeName;if(html[index+1]==='\"'){_lastCtx.isQuoted=true;index++;}_lastCtx.start=index+1;}}else if(_ctx.type==='attribute'){isAttribteEnd=_ctx.isQuoted?html[index]==='\"'&&html[index-1]!=='\\\\':html[index]===' '||html[index]==='>';if(isAttribteEnd){metadata.attributes[_ctx.name]=html.substring(_ctx.start,index);context.pop();if(!_ctx.isQuoted&&html[index]==='>')index--;}}case 30:_context.next=3;break;case 32:ctx=last(context);if(!(ctx.type==='document'&&ctx.start<index-1)){_context.next=36;break;}_context.next=36;return{type:'text',value:html.substring(ctx.start,index)};case 36:case'end':return _context.stop();}}},_marked[0],this);}function stripTags(tagName,tagsAndText){var inObjectTag,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,item;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function stripTags$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:inObjectTag=false;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context2.prev=4;_iterator=tagsAndText[Symbol.iterator]();case 6:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context2.next=22;break;}item=_step.value;if(!(item.type==='tag'&&item.isStart&&item.name===tagName)){_context2.next=12;break;}inObjectTag=true;_context2.next=19;break;case 12:if(!(item.type==='tag'&&!item.isStart&&item.name===tagName)){_context2.next=16;break;}inObjectTag=false;_context2.next=19;break;case 16:if(inObjectTag){_context2.next=19;break;}_context2.next=19;return item;case 19:_iteratorNormalCompletion=true;_context2.next=6;break;case 22:_context2.next=28;break;case 24:_context2.prev=24;_context2.t0=_context2['catch'](4);_didIteratorError=true;_iteratorError=_context2.t0;case 28:_context2.prev=28;_context2.prev=29;if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}case 31:_context2.prev=31;if(!_didIteratorError){_context2.next=34;break;}throw _iteratorError;case 34:return _context2.finish(31);case 35:return _context2.finish(28);case 36:case'end':return _context2.stop();}}},_marked[1],this,[[4,24,28,36],[29,,31,35]]);}function addSpansAroundVerses(tagsAndText){var inVerse,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,item,id;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function addSpansAroundVerses$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:inVerse=false;_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context3.prev=4;_iterator2=tagsAndText[Symbol.iterator]();case 6:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context3.next=27;break;}item=_step2.value;if(!(inVerse&&item.type==='tag'&&item.name==='p'&&!item.isStart)){_context3.next=14;break;}_context3.next=11;return{type:'tag',isStart:false,value:'</span>',name:'span',attributes:{}};case 11:inVerse=false;_context3.next=22;break;case 14:if(!(item.type==='tag'&&/^(chapter|verse)-num(\\s.*)?$/.test(item.attributes.class))){_context3.next=22;break;}if(!inVerse){_context3.next=18;break;}_context3.next=18;return{type:'tag',isStart:false,value:'</span>',name:'span',attributes:{}};case 18:inVerse=true;id=item.attributes.id.replace(/^v/,'vt');_context3.next=22;return{type:'tag',isStart:true,value:'<span class=\"verse\" id=\"'+id+'\">',name:'span',attributes:{class:'verse',id:id}};case 22:_context3.next=24;return item;case 24:_iteratorNormalCompletion2=true;_context3.next=6;break;case 27:_context3.next=33;break;case 29:_context3.prev=29;_context3.t0=_context3['catch'](4);_didIteratorError2=true;_iteratorError2=_context3.t0;case 33:_context3.prev=33;_context3.prev=34;if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}case 36:_context3.prev=36;if(!_didIteratorError2){_context3.next=39;break;}throw _iteratorError2;case 39:return _context3.finish(36);case 40:return _context3.finish(33);case 41:case'end':return _context3.stop();}}},_marked[2],this,[[4,29,33,41],[34,,36,40]]);}function withTagStack(tagsAndText){var stack,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_iterator3,_step3,item;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function withTagStack$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:stack=[];_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context4.prev=4;_iterator3=tagsAndText[Symbol.iterator]();case 6:if(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done){_context4.next=19;break;}item=_step3.value;if(!(item.type==='tag')){_context4.next=13;break;}_context4.next=11;return{type:'tag',name:item.name,isStart:item.isStart,attributes:item.attributes,value:item.value,stack:stack.slice(0)};case 11:_context4.next=15;break;case 13:_context4.next=15;return Object.assign({},item,{stack:stack.slice(0)});case 15:if(item.type==='tag')if(item.isStart)stack.push(item);else stack.pop();case 16:_iteratorNormalCompletion3=true;_context4.next=6;break;case 19:_context4.next=25;break;case 21:_context4.prev=21;_context4.t0=_context4['catch'](4);_didIteratorError3=true;_iteratorError3=_context4.t0;case 25:_context4.prev=25;_context4.prev=26;if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}case 28:_context4.prev=28;if(!_didIteratorError3){_context4.next=31;break;}throw _iteratorError3;case 31:return _context4.finish(28);case 32:return _context4.finish(25);case 33:case'end':return _context4.stop();}}},_marked[3],this,[[4,21,25,33],[26,,28,32]]);}function addDropCapsClassToFirstLetter(tagsAndTextWithStack){var sawFirstReferenceNumber,sawClosingSpanOrB,addedClass,_iteratorNormalCompletion4,_didIteratorError4,_iteratorError4,_iterator4,_step4,item,_type,_name,_isStart,_value,_attributes,_stack,parts,_parts,leadingWhitespace,leadingEntities,firstLetter,rest;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function addDropCapsClassToFirstLetter$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:sawFirstReferenceNumber=false;sawClosingSpanOrB=false;addedClass=false;_iteratorNormalCompletion4=true;_didIteratorError4=false;_iteratorError4=undefined;_context5.prev=6;_iterator4=tagsAndTextWithStack[Symbol.iterator]();case 8:if(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done){_context5.next=61;break;}item=_step4.value;if(!addedClass){_context5.next=14;break;}_context5.next=13;return item;case 13:return _context5.abrupt('continue',58);case 14:_type=item.type,_name=item.name,_isStart=item.isStart,_value=item.value,_attributes=item.attributes,_stack=item.stack;if(!(!sawFirstReferenceNumber&&_type==='tag'&&/^(chapter|verse)-num$/.test(_attributes.class))){_context5.next=20;break;}sawFirstReferenceNumber=true;_context5.next=19;return item;case 19:return _context5.abrupt('continue',58);case 20:if(!(sawFirstReferenceNumber&&!sawClosingSpanOrB&&_type==='tag'&&(_name==='span'||_name==='b')&&!_isStart)){_context5.next=25;break;}sawClosingSpanOrB=true;_context5.next=24;return item;case 24:return _context5.abrupt('continue',58);case 25:if(!(sawClosingSpanOrB&&last(_stack)&&last(_stack).attributes&&(last(_stack).attributes.class==='verse'||last(_stack).attributes.class==='woc')&&_type==='text')){_context5.next=56;break;}parts=_value.match(/^([\\s\"]*)(&#?[\\w]+;)*([\\w“])(.*)/);if(parts){_context5.next=31;break;}_context5.next=30;return item;case 30:return _context5.abrupt('continue',58);case 31:_parts=_slicedToArray(parts,5),leadingWhitespace=_parts[1],leadingEntities=_parts[2],firstLetter=_parts[3],rest=_parts[4];if(!leadingWhitespace){_context5.next=35;break;}_context5.next=35;return{type:'text',value:leadingWhitespace};case 35:_context5.next=37;return{type:'tag',isStart:true,value:'<span class=\"first-letter\">',name:'span',attributes:{class:'first-letter'}};case 37:if(!leadingEntities){_context5.next=42;break;}_context5.next=40;return{type:'text',value:leadingEntities};case 40:_context5.next=44;break;case 42:_context5.next=44;return{type:'text',value:firstLetter};case 44:_context5.next=46;return{type:'tag',isStart:false,value:'</span>',name:'span',attributes:{}};case 46:if(!rest){_context5.next=54;break;}if(!leadingEntities){_context5.next=52;break;}_context5.next=50;return{type:'text',value:firstLetter+rest};case 50:_context5.next=54;break;case 52:_context5.next=54;return{type:'text',value:rest};case 54:addedClass=true;return _context5.abrupt('continue',58);case 56:_context5.next=58;return item;case 58:_iteratorNormalCompletion4=true;_context5.next=8;break;case 61:_context5.next=67;break;case 63:_context5.prev=63;_context5.t0=_context5['catch'](6);_didIteratorError4=true;_iteratorError4=_context5.t0;case 67:_context5.prev=67;_context5.prev=68;if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return();}case 70:_context5.prev=70;if(!_didIteratorError4){_context5.next=73;break;}throw _iteratorError4;case 73:return _context5.finish(70);case 74:return _context5.finish(67);case 75:case'end':return _context5.stop();}}},_marked[4],this,[[6,63,67,75],[68,,70,74]]);}function withSurroundingEvents(tagsAndText){var window,_iteratorNormalCompletion5,_didIteratorError5,_iteratorError5,_iterator5,_step5,item;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function withSurroundingEvents$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:window=[null];_iteratorNormalCompletion5=true;_didIteratorError5=false;_iteratorError5=undefined;_context6.prev=4;_iterator5=tagsAndText[Symbol.iterator]();case 6:if(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done){_context6.next=16;break;}item=_step5.value;if(!(window.length===3)){_context6.next=11;break;}_context6.next=11;return Object.assign({before:window[0],after:window[2]},window[1]);case 11:window.push(item);if(window.length>3)window.shift();case 13:_iteratorNormalCompletion5=true;_context6.next=6;break;case 16:_context6.next=22;break;case 18:_context6.prev=18;_context6.t0=_context6['catch'](4);_didIteratorError5=true;_iteratorError5=_context6.t0;case 22:_context6.prev=22;_context6.prev=23;if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return();}case 25:_context6.prev=25;if(!_didIteratorError5){_context6.next=28;break;}throw _iteratorError5;case 28:return _context6.finish(25);case 29:return _context6.finish(22);case 30:_context6.next=32;return Object.assign({before:window[0],after:window[2]},window[1]);case 32:_context6.next=34;return Object.assign({before:window[1],after:null},window[2]);case 34:case'end':return _context6.stop();}}},_marked[5],this,[[4,18,22,30],[23,,25,29]]);}function stripCopyright(tagsAndTextWithSurroundingEvents){var inTag,_iteratorNormalCompletion6,_didIteratorError6,_iteratorError6,_iterator6,_step6,item,_value2;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function stripCopyright$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:inTag=false;_iteratorNormalCompletion6=true;_didIteratorError6=false;_iteratorError6=undefined;_context7.prev=4;_iterator6=tagsAndTextWithSurroundingEvents[Symbol.iterator]();case 6:if(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done){_context7.next=33;break;}item=_step6.value;if(!(item.type==='text'&&item.value[item.value.length-1]==='('&&item.after.attributes&&item.after.attributes.class==='copyright')){_context7.next=13;break;}_context7.next=11;return{type:'text',value:item.value.substring(0,item.value.length-1)};case 11:_context7.next=30;break;case 13:if(!(item.type==='tag'&&item.attributes.class==='copyright')){_context7.next=17;break;}// Don't yield this item\ninTag=true;_context7.next=30;break;case 17:if(!inTag){_context7.next=21;break;}if(item.type==='tag'&&!item.isStart)inTag=false;_context7.next=30;break;case 21:if(!(item.type==='text'&&item.value[0]===')'&&last(item.before.stack).attributes&&last(item.before.stack).attributes.class==='copyright')){_context7.next=28;break;}_value2=item.value.substring(1);if(!_value2){_context7.next=26;break;}_context7.next=26;return{type:'text',value:_value2};case 26:_context7.next=30;break;case 28:_context7.next=30;return item;case 30:_iteratorNormalCompletion6=true;_context7.next=6;break;case 33:_context7.next=39;break;case 35:_context7.prev=35;_context7.t0=_context7['catch'](4);_didIteratorError6=true;_iteratorError6=_context7.t0;case 39:_context7.prev=39;_context7.prev=40;if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return();}case 42:_context7.prev=42;if(!_didIteratorError6){_context7.next=45;break;}throw _iteratorError6;case 45:return _context7.finish(42);case 46:return _context7.finish(39);case 47:case'end':return _context7.stop();}}},_marked[6],this,[[4,35,39,47],[40,,42,46]]);}/* harmony default export */ __webpack_exports__[\"a\"] = (function(text){return Array.from(stripCopyright(withSurroundingEvents(addDropCapsClassToFirstLetter(withTagStack(addSpansAroundVerses(stripTags('script',stripTags('object',tagsAndText(text))))))))).map(function(i){return i.value;}).join('');});\n\n/***/ }),\n\n/***/ 157:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(158);\n\n\n/***/ }),\n\n/***/ 158:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constants__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__db_bibles_esv__ = __webpack_require__(159);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__db_bibles_kjv__ = __webpack_require__(160);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__data_model__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__data_transform__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__data_fetcher__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__log__ = __webpack_require__(14);\nfunction _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}/**\n * Service worker for app-specific logic.\n *\n * In development, this code will run alone as a service worker, and in\n * production this will get appended to the \"sw-precache\" code that's generated\n * by the build.\n *//* eslint-disable no-restricted-globals */var isPassageLookup=function isPassageLookup(url){return __WEBPACK_IMPORTED_MODULE_5__data_fetcher__[\"a\" /* ESV_BASE */].hostname===url.hostname||/^\\/api/.test(url.pathname);};var logStorage=function logStorage(url,reference,index){return Object(__WEBPACK_IMPORTED_MODULE_6__log__[\"a\" /* default */])('Storing '+url.toString()+' with reference '+JSON.stringify(reference)+' as '+index,'color: #888; font-size: 0.8em');};var fromKjvDb=function fromKjvDb(url){return Object(__WEBPACK_IMPORTED_MODULE_2__db_bibles_kjv__[\"a\" /* default */])().get(Object(__WEBPACK_IMPORTED_MODULE_3__data_model__[\"g\" /* chapterIndex */])(Object(__WEBPACK_IMPORTED_MODULE_3__data_model__[\"c\" /* apiPathToReference */])(url.pathname)));};var toKjvDb=function toKjvDb(url,text){var reference=Object(__WEBPACK_IMPORTED_MODULE_3__data_model__[\"c\" /* apiPathToReference */])(url.pathname);var index=Object(__WEBPACK_IMPORTED_MODULE_3__data_model__[\"g\" /* chapterIndex */])(reference);logStorage(url,reference,index);Object(__WEBPACK_IMPORTED_MODULE_2__db_bibles_kjv__[\"a\" /* default */])().set(index,text);};var fromEsvDb=function fromEsvDb(url){var passageString=url.searchParams.get('q');return Object(__WEBPACK_IMPORTED_MODULE_1__db_bibles_esv__[\"a\" /* default */])().get(Object(__WEBPACK_IMPORTED_MODULE_3__data_model__[\"g\" /* chapterIndex */])(Object(__WEBPACK_IMPORTED_MODULE_3__data_model__[\"k\" /* pathStringToReference */])(passageString)));};var toEsvDb=function toEsvDb(url,text){var passage=url.searchParams.get('q');var reference=Object(__WEBPACK_IMPORTED_MODULE_3__data_model__[\"k\" /* pathStringToReference */])(passage);var index=Object(__WEBPACK_IMPORTED_MODULE_3__data_model__[\"g\" /* chapterIndex */])(reference);if(Number.isNaN(index))return;logStorage(url,reference,index);Object(__WEBPACK_IMPORTED_MODULE_1__db_bibles_esv__[\"a\" /* default */])().set(index,text);};var createSwResponse=function createSwResponse(text){return new Response(text,{status:200,headers:_defineProperty({},__WEBPACK_IMPORTED_MODULE_0__constants__[\"b\" /* FROM_SERVICE_WORKER_HEADER */],true)});};self.addEventListener('fetch',function(event){var request=event.request;var url=new URL(request.url);var isEsv=__WEBPACK_IMPORTED_MODULE_5__data_fetcher__[\"a\" /* ESV_BASE */].hostname===url.hostname;if(!isPassageLookup(url))return;var fromDb=isEsv?fromEsvDb(url):fromKjvDb(url);event.respondWith(fromDb.then(function(text){var _headers2;if(isEsv){var esvApiJson={passages:[text]};text=JSON.stringify(esvApiJson);}Object(__WEBPACK_IMPORTED_MODULE_6__log__[\"a\" /* default */])('Serving '+url.pathname+url.search+' from db','color: #23bd23; font-size: 0.8em');return new Response(text,{status:200,headers:(_headers2={},_defineProperty(_headers2,__WEBPACK_IMPORTED_MODULE_0__constants__[\"a\" /* FROM_DB_HEADER */],true),_defineProperty(_headers2,__WEBPACK_IMPORTED_MODULE_0__constants__[\"b\" /* FROM_SERVICE_WORKER_HEADER */],true),_headers2)});}).catch(function(error){var request=isEsv?Object(__WEBPACK_IMPORTED_MODULE_5__data_fetcher__[\"b\" /* esvLookup */])(url).then(function(response){return response.json();}).then(function(esvApiJson){return esvApiJson.passages[0];}).then(__WEBPACK_IMPORTED_MODULE_4__data_transform__[\"a\" /* default */]).then(function(text){var esvApiJson={passages:[text]};toEsvDb(url,text);return createSwResponse(JSON.stringify(esvApiJson));}):Object(__WEBPACK_IMPORTED_MODULE_5__data_fetcher__[\"c\" /* fetchOrThrow */])(url).then(function(response){return response.text();}).then(function(text){toKjvDb(url,text);return createSwResponse(text);});return request;}));});\n\n/***/ }),\n\n/***/ 159:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export EsvBibleStore */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__key_val_store__ = __webpack_require__(16);\nfunction _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _instance=void 0;var STORE_NAME='chapters';var DB_METADATA={name:'bible-esv',version:2,stores:[STORE_NAME]};var EsvBibleStore=function(_KeyValStore){_inherits(EsvBibleStore,_KeyValStore);function EsvBibleStore(){_classCallCheck(this,EsvBibleStore);return _possibleConstructorReturn(this,(EsvBibleStore.__proto__||Object.getPrototypeOf(EsvBibleStore)).call(this,DB_METADATA,STORE_NAME));}return EsvBibleStore;}(__WEBPACK_IMPORTED_MODULE_0__key_val_store__[\"a\" /* default */]);/* harmony default export */ __webpack_exports__[\"a\"] = (function(){if(_instance==null)_instance=new EsvBibleStore();return _instance;});\n\n/***/ }),\n\n/***/ 16:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}// Implemented by window.indexedDB & worker.indexedDB\n/** thanks jake https://github.com/jakearchibald/idb-keyval */// begin flow lib declaration //////////////////////////////////////////////////\n// Until https://github.com/facebook/flow/pull/5216 gets merged?\n// Implemented by window & worker\nvar KeyValStore=function(){function KeyValStore(dbMetadata,store){_classCallCheck(this,KeyValStore);this._db_metadata=dbMetadata;this._store_name=store;}_createClass(KeyValStore,[{key:'db',value:function db(){var _this=this;if(this._db==null)this._db=new Promise(function(resolve,reject){var request=indexedDB.open(_this._db_metadata.name,_this._db_metadata.version);request.onerror=function(){return reject(request.error);};// TODO: actually handle upgrade\nrequest.onupgradeneeded=function(){_this._db_metadata.stores.forEach(function(name){try{request.result.deleteObjectStore(name);}catch(ignore){}request.result.createObjectStore(name);});};request.onsuccess=function(){resolve(request.result);};});return this._db;}},{key:'transact',value:function transact(type,callback){var _this2=this;return this.db().then(function(db){return new Promise(function(resolve,reject){var transaction=db.transaction(_this2._store_name,type);transaction.oncomplete=resolve;transaction.onerror=function(){return reject(transaction.error);};callback(transaction.objectStore(_this2._store_name));});});}},{key:'get',value:function get(key){var req;return this.transact('readonly',function(store){return req=store.get(key);}).then(function(){if(typeof req.result==='undefined'){var keyString='';if(key.hasOwnProperty('toString'))keyString=key.toString();throw new Error('Key '+keyString+' not found');}else{return req.result;}});}},{key:'set',value:function set(key,value){return this.transact('readwrite',function(store){return store.put(value,key);});}},{key:'all',value:function all(){var entries=[];return this.transact('readonly',function(store){var request=store.openCursor();request.onsuccess=function(event){var cursor=event.target.result;if(!cursor)return;entries.push({key:cursor.key,value:cursor.value});cursor.continue();};}).then(function(){return entries;});}}]);return KeyValStore;}();// end flow lib declaration ////////////////////////////////////////////////////\n/* harmony default export */ __webpack_exports__[\"a\"] = (KeyValStore);\n\n/***/ }),\n\n/***/ 160:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export KjvBibleStore */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__key_val_store__ = __webpack_require__(16);\nfunction _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var _instance=void 0;var STORE_NAME='chapters';var DB_METADATA={name:'bible-kjv',version:2,stores:[STORE_NAME]};var KjvBibleStore=function(_KeyValStore){_inherits(KjvBibleStore,_KeyValStore);function KjvBibleStore(){_classCallCheck(this,KjvBibleStore);return _possibleConstructorReturn(this,(KjvBibleStore.__proto__||Object.getPrototypeOf(KjvBibleStore)).call(this,DB_METADATA,STORE_NAME));}return KjvBibleStore;}(__WEBPACK_IMPORTED_MODULE_0__key_val_store__[\"a\" /* default */]);/* harmony default export */ __webpack_exports__[\"a\"] = (function(){if(_instance==null)_instance=new KjvBibleStore();return _instance;});\n\n/***/ }),\n\n/***/ 22:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(23);\n\n\n/***/ }),\n\n/***/ 23:\n/***/ (function(module, exports, __webpack_require__) {\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = __webpack_require__(24);\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\n\n/***/ }),\n\n/***/ 24:\n/***/ (function(module, exports) {\n\n/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return chapterCounts; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CHAPTER_COUNT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return books; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return chapterIndex; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"l\", function() { return reference; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return before; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return after; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return pathStringToReference; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return apiPathToReference; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return locationToReference; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return chapterToLocation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"m\", function() { return referenceToLocation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return isEqual; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"n\", function() { return referenceToVerseNumId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"o\", function() { return verseNumIdToReference; });\nvar _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"])_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();var chapterCounts={Genesis:50,Exodus:40,Leviticus:27,Numbers:36,Deuteronomy:34,Joshua:24,Judges:21,Ruth:4,'1 Samuel':31,'2 Samuel':24,'1 Kings':22,'2 Kings':25,'1 Chronicles':29,'2 Chronicles':36,Ezra:10,Nehemiah:13,Esther:10,Job:42,Psalm:150,Proverbs:31,Ecclesiastes:12,'Song of Solomon':8,Isaiah:66,Jeremiah:52,Lamentations:5,Ezekiel:48,Daniel:12,Hosea:14,Joel:3,Amos:9,Obadiah:1,Jonah:4,Micah:7,Nahum:3,Habakkuk:3,Zephaniah:3,Haggai:2,Zechariah:14,Malachi:4,Matthew:28,Mark:16,Luke:24,John:21,Acts:28,Romans:16,'1 Corinthians':16,'2 Corinthians':13,Galatians:6,Ephesians:6,Philippians:4,Colossians:4,'1 Thessalonians':5,'2 Thessalonians':3,'1 Timothy':6,'2 Timothy':4,Titus:3,Philemon:1,Hebrews:13,James:5,'1 Peter':5,'2 Peter':3,'1 John':5,'2 John':1,'3 John':1,Jude:1,Revelation:22};var chaptersBefore={Genesis:0,Exodus:50,Leviticus:90,Numbers:117,Deuteronomy:153,Joshua:187,Judges:211,Ruth:232,'1 Samuel':236,'2 Samuel':267,'1 Kings':291,'2 Kings':313,'1 Chronicles':338,'2 Chronicles':367,Ezra:403,Nehemiah:413,Esther:426,Job:436,Psalm:478,Proverbs:628,Ecclesiastes:659,'Song of Solomon':671,Isaiah:679,Jeremiah:745,Lamentations:797,Ezekiel:802,Daniel:850,Hosea:862,Joel:876,Amos:879,Obadiah:888,Jonah:889,Micah:893,Nahum:900,Habakkuk:903,Zephaniah:906,Haggai:909,Zechariah:911,Malachi:925,Matthew:929,Mark:957,Luke:973,John:997,Acts:1018,Romans:1046,'1 Corinthians':1062,'2 Corinthians':1078,Galatians:1091,Ephesians:1097,Philippians:1103,Colossians:1107,'1 Thessalonians':1111,'2 Thessalonians':1116,'1 Timothy':1119,'2 Timothy':1125,Titus:1129,Philemon:1132,Hebrews:1133,James:1146,'1 Peter':1151,'2 Peter':1156,'1 John':1159,'2 John':1164,'3 John':1165,Jude:1166,Revelation:1167};var CHAPTER_COUNT=1189;var books=Object.getOwnPropertyNames(chaptersBefore);var chapterIndex=function chapterIndex(reference){return chaptersBefore[reference.book]+reference.chapter-1;};var reference=function reference(index){var book=void 0;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=books[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var current=_step.value;if(chaptersBefore[current]<=index)book=current;else break;}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}if(book==null)throw new Error('reference index is out of range');return{book:book,chapter:index-chaptersBefore[book]+1,verse:1};};var before=function before(ref){var index=chapterIndex(ref);var indexBefore=((index-1)%CHAPTER_COUNT+CHAPTER_COUNT)%CHAPTER_COUNT;return reference(indexBefore);};var after=function after(ref){return reference((chapterIndex(ref)+1)%CHAPTER_COUNT);};var pathStringToReference=function pathStringToReference(referenceString){var _referenceString$spli=referenceString.split(/\\s/),_referenceString$spli2=_slicedToArray(_referenceString$spli,3),bookNumber=_referenceString$spli2[0],book=_referenceString$spli2[1],chapterAndVerse=_referenceString$spli2[2];if(!/^\\d+$/.test(bookNumber)){;var _ref=[bookNumber,book,''];book=_ref[0];chapterAndVerse=_ref[1];bookNumber=_ref[2];}var _ref2=chapterAndVerse!=null?chapterAndVerse.split(':'):[1,1],_ref3=_slicedToArray(_ref2,2),chapter=_ref3[0],verse=_ref3[1];return{book:(bookNumber?bookNumber+' ':'')+book[0].toUpperCase()+book.slice(1).toLowerCase(),chapter:parseInt(chapter,10),verse:verse==null?1:parseInt(verse,10)};};var apiPathToReference=function apiPathToReference(pathname){var _pathname$split=pathname.split('/'),_pathname$split2=_slicedToArray(_pathname$split,6),dashedBook=_pathname$split2[4],chapterDotHtml=_pathname$split2[5];var book=books.filter(function(b){return b.toLowerCase().replace(/ /g,'-')===dashedBook;})[0];var chapter=parseInt(chapterDotHtml.split('.')[0],10);if(!book||Number.isNaN(chapter))throw new Error('Could not convert '+pathname+' to a reference.');return{book:book,chapter:chapter,verse:1};};var locationToReference=function locationToReference(location){return pathStringToReference(decodeURI(location.pathname).slice(1).replace(/\\++/g,' ').replace(/^\\s+/,'').replace(/\\s+$/,''));};var chapterToLocation=function chapterToLocation(_ref4){var book=_ref4.book,chapter=_ref4.chapter;return'/'+book+'+'+chapter;};var referenceToLocation=function referenceToLocation(reference){return'/'+reference.book+'+'+reference.chapter+':'+reference.verse;};var isEqual=function isEqual(a,b){return a.book===b.book&&a.chapter===b.chapter&&a.verse===b.verse;};/** Convert a Reference to the element ID the ESV API puts in their markup.\n *\n * The v2 ESV API marks up the verses with:\n *\n *     <span class=verse-num id=vBBCCCVVV-X>VVV</span>\n *\n * Where BB is the book number, CCC is the chapter number, and VVV is the verse\n * number. These numbers are all 0-padded and start at one, so Genesis 1:1\n * would be v01001001-1.\n *\n * This is the inverse of verseNumIdToReference.\n */var referenceToVerseNumId=function referenceToVerseNumId(r){var bookIdx=books.indexOf(r.book)+1;var book=bookIdx.toLocaleString('en',{minimumIntegerDigits:2});var chapter=r.chapter.toLocaleString('en',{minimumIntegerDigits:3});var verse=r.verse.toLocaleString('en',{minimumIntegerDigits:3});return'v'+book+chapter+verse+'-1';};/** Convert an element ID the ESV API puts in their markup to a reference.\n *\n * The v2 ESV API marks up the verses with:\n *\n *     <span class=verse-num id=vBBCCCVVV-X>VVV</span>\n *\n * Where BB is the book number, CCC is the chapter number, and VVV is the verse\n * number. These numbers are all 0-padded and start at one, so Genesis 1:1\n * would be v01001001-1.\n *\n * This has also been updated to handle the markup pre-processing I do that\n * wraps the entire verse in a span that starts with \"vt\", so something like\n * \"vt01001001-1\".\n *\n * This is the inverse of referenceToVerseNumId.\n */var verseNumIdToReference=function verseNumIdToReference(id){var parsed=id.match(/^vt?(\\d\\d)(\\d\\d\\d)(\\d\\d\\d)/);if(parsed==null)throw new Error('cannot convert '+id+' to reference');var _parsed=_slicedToArray(parsed,4),book=_parsed[1],chapter=_parsed[2],verse=_parsed[3];return{book:books[parseInt(book,10)-1],chapter:parseInt(chapter,10),verse:parseInt(verse,10)};};\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return setChapterText; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return addRecent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return setRecents; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return enableFocusMode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return enableNightMode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return setPreferences; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return addToast; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return confirmFocusMode; });\nvar setChapterText=function setChapterText(translation,reference,text){return{type:'set-chapter-text',translation:translation,reference:reference,text:text};};var addRecent=function addRecent(reference){return{type:'add-recent',reference:reference};};var setRecents=function setRecents(recents){return{type:'set-recents',recents:recents};};var enableFocusMode=function enableFocusMode(enabled){return{type:'enable-focus-mode',enabled:enabled};};var enableNightMode=function enableNightMode(enabled){return{type:'enable-night-mode',enabled:enabled};};var setPreferences=function setPreferences(preferences){return{type:'set-preferences',preferences:preferences};};var addToast=function addToast(text){return{type:'add-toast',text:text};};var confirmFocusMode=function confirmFocusMode(){return{type:'confirm-focus-mode'};};\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// static/js/service-worker.1bf8848e.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 157);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3066e7a6ab0ca9c9ebfe","// @flow\nimport type {Store} from 'redux';\n\nimport {setChapterText} from '../actions';\nimport {FROM_DB_HEADER, FROM_SERVICE_WORKER_HEADER} from '../constants';\nimport log from '../log';\nimport type {Reference} from './model';\nimport {chapterIndex, before, after, CHAPTER_COUNT} from './model';\nimport type {State} from '../reducer';\nimport transform from './transform';\n\nexport const ESV_BASE = new URL('https://api.esv.org/v3/passage/html/');\nconst ESV_KEY = 'cecc457af593de97294057073c9be28d7ffdfaf9';\nconst KJV_BASE = new URL('https://everywherebible.org');\n\nexport type EsvApiJson = {|\n  +passages: Array<string>,\n|};\n\nexport type EsvApiResponse = {|\n  +headers: {get: (string) => ?string},\n  +url: string,\n  +status: number,\n  +ok: boolean,\n  +json: () => Promise<EsvApiJson>,\n|};\n\nexport const fetchOrThrow = (url: string | URL, init?: RequestOptions):\n    Promise<Response> =>\n  fetch(url, init)\n    .then((response: Response): Response => {\n      if (!response.ok)\n        throw new Error(`${response.url} failed with ${response.status}`);\n      const fromDb = response.headers.get(FROM_DB_HEADER);\n      const fromSw = response.headers.get(FROM_SERVICE_WORKER_HEADER);\n      const source = fromDb? 'from DB' : fromSw? 'from SW' : 'from network';\n      log(`Received ${url.toString()} ${source}`, 'font-size: 0.8em');\n      return response;\n    });\n\nconst esvChapterUrl = (reference: Reference): URL => {\n  const url = new URL('', ESV_BASE);\n  url.searchParams.set('q', `${reference.book} ${reference.chapter}`);\n  return url;\n};\n\nconst kjvChapterUrl = (reference: Reference): URL => {\n  const book = reference.book.toLowerCase().replace(/ /g, '-');\n  return new URL(`/api/v1/kjv/${book}/${reference.chapter}.html`, KJV_BASE);\n};\n\nexport const esvLookup = (url: URL): Promise<EsvApiResponse> => {\n  declare function fetchOrThrow(url: URL, options: mixed): Promise<EsvApiResponse>;\n\n  return fetchOrThrow(url, {\n    headers: {\n      authorization: `Token ${ESV_KEY}`,\n      accept: 'application/json',\n    }\n  });\n};\n\nconst fetchChapter = (store: Store, reference: Reference): Promise<string> => {\n  const translation = store.getState().preferences.translation;\n  const request: Promise<string> = translation === 'kjv'?\n    fetchOrThrow(kjvChapterUrl(reference))\n      .then(response => response.text()) :\n\n    esvLookup(esvChapterUrl(reference))\n      .then(response => {\n        const fromSw = response.headers.get(FROM_SERVICE_WORKER_HEADER);\n\n        return (response.json(): Promise<EsvApiJson>)\n          .then(obj => obj.passages[0])\n          .then(text => fromSw? text : transform(text));\n      });\n\n  request\n    .then(text => store.dispatch(setChapterText(translation, reference, text)));\n\n  return request;\n}\n\nconst indexIsCached = (state: State, index: number): boolean =>\n  state.chapters[state.preferences.translation][index] != null;\n\nexport const updateStoreWithPassageText = (store: Store, reference: Reference) => {\n  const state = store.getState();\n  const index = chapterIndex(reference);\n\n  if (!indexIsCached(state, index))\n    fetchChapter(store, reference);\n\n  if (index > 0 && !indexIsCached(state, index - 1))\n    fetchChapter(store, before(reference));\n\n  if (index < CHAPTER_COUNT && !indexIsCached(state, index + 1))\n    fetchChapter(store, after(reference));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/fetcher.js","export const FROM_DB_HEADER = 'x-from-db';\nexport const FROM_SERVICE_WORKER_HEADER = 'x-from-service-worker';\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","const envString = () => navigator && navigator.serviceWorker? 'main' : 'sw';\n\nexport default (message, format) =>\n  console.log(`${format != null? '%c' : ''}${envString()} | ${message}`, format);\n\n\n\n// WEBPACK FOOTER //\n// ./src/log.js","// @flow\n\nconst last = a => a[a.length - 1];\n\ntype TagEvent = {\n  +type: 'tag',\n  +name: string,\n  +isStart: boolean,\n  +attributes: {[string]: string},\n  +value: string,\n};\n\ntype TextEvent = {\n  +type: 'text',\n  +value: string,\n};\n\ntype ParseEvent = TagEvent | TextEvent;\n\ntype ParseEventWithStack = ParseEvent & {+stack: Array<TagEvent>};\n\nexport function* tagsAndText(html: string): Generator<ParseEvent, void, void> {\n  const context: Array<any> = [{type: 'document', start: 0}];\n  let index = -1;\n  let metadata: any = {};\n\n  while (index++ < html.length) {\n    const ctx: any = last(context);\n    if (ctx.type === 'document') {\n      if (html[index] === '<') {\n        if (ctx.start !== index)\n          yield {\n            type: 'text',\n            value: html.substring(ctx.start, index),\n          };\n\n        context.push({type: 'tag', start: index});\n        metadata = {isStart: html[index + 1] !== '/', attributes: {}};\n\n        if (html[index + 1] === '/')\n          index++;\n\n        context.push({type: 'tagname', start: index + 1});\n      }\n    } else if (ctx.type === 'tag') {\n      if (html[index] === '>') {\n        if (ctx.type === 'tagname')\n          metadata.name = html.substring(metadata.isStart? 1 : 2, index);\n\n        yield Object.assign({\n          type: 'tag',\n          value: html.substring(ctx.start, index + 1),\n        }, metadata);\n\n        context.pop();\n        const lastCtx: any = last(context);\n        lastCtx.start = index + 1;\n      } else if (html[index] !== ' ' && html[index] !== '/') {\n        context.push({type: 'attribute', start: index});\n        context.push({type: 'attributeName', start: index});\n      }\n    } else if (ctx.type === 'tagname') {\n      if (html[index] === ' ' || html[index] === '>') {\n        metadata.name = html.substring(ctx.start, index);\n        context.pop();\n\n        if (html[index] === '>')\n          index--;\n      }\n    } else if (ctx.type === 'attributeName') {\n      if (html[index] === '=') {\n        const attributeName = html.substring(ctx.start, index);\n        context.pop();\n        const lastCtx: any = last(context);\n        lastCtx.name = attributeName;\n        if (html[index + 1] === '\"') {\n          lastCtx.isQuoted = true;\n          index++;\n        }\n        lastCtx.start = index + 1;\n      }\n    } else if (ctx.type === 'attribute') {\n      const isAttribteEnd = ctx.isQuoted?\n        html[index] === '\"' && html[index - 1] !== '\\\\' :\n        html[index] === ' ' || html[index] === '>';\n      if (isAttribteEnd) {\n        metadata.attributes[ctx.name] = html.substring(ctx.start, index);\n        context.pop();\n        if (!ctx.isQuoted && html[index] === '>')\n          index--;\n      }\n    }\n  }\n\n  const ctx: any = last(context);\n  if (ctx.type === 'document' && ctx.start < index - 1)\n    yield {type: 'text', value: html.substring(ctx.start, index)};\n}\n\nexport function* stripTags(tagName: string, tagsAndText: Iterable<ParseEvent>):\n    Generator<ParseEvent, void, void> {\n  let inObjectTag = false;\n\n  for (let item of tagsAndText) {\n    if (item.type === 'tag' &&\n        item.isStart &&\n        item.name === tagName) {\n      inObjectTag = true;\n    } else if (item.type === 'tag' &&\n               !item.isStart &&\n               item.name === tagName) {\n      inObjectTag = false;\n    } else if (!inObjectTag) {\n      yield item;\n    }\n  }\n}\n\nexport function* addSpansAroundVerses(tagsAndText: Iterable<ParseEvent>):\n    Generator<ParseEvent, void, void> {\n  let inVerse = false;\n\n  for (let item of tagsAndText) {\n    if (inVerse &&\n        item.type === 'tag' &&\n        item.name === 'p' &&\n        !item.isStart) {\n      yield {\n        type: 'tag',\n        isStart: false,\n        value: '</span>',\n        name: 'span',\n        attributes: {},\n      };\n      inVerse = false;\n    } else if (item.type === 'tag' &&\n               /^(chapter|verse)-num(\\s.*)?$/.test(item.attributes.class)) {\n      if (inVerse) {\n        yield {\n          type: 'tag',\n          isStart: false,\n          value: '</span>',\n          name: 'span',\n          attributes: {},\n        };\n      }\n      inVerse = true;\n      const id = item.attributes.id.replace(/^v/, 'vt');\n      yield {\n        type: 'tag',\n        isStart: true,\n        value: `<span class=\"verse\" id=\"${id}\">`,\n        name: 'span',\n        attributes: {class: 'verse', id},\n      };\n    }\n\n    yield item;\n  }\n}\n\nexport function* withTagStack(tagsAndText: Iterable<ParseEvent>):\n    Generator<ParseEventWithStack, void, void> {\n  const stack: Array<TagEvent> = [];\n\n  for (let item of tagsAndText) {\n    if (item.type === 'tag')\n      yield {\n        type: 'tag',\n        name: item.name,\n        isStart: item.isStart,\n        attributes: item.attributes,\n        value: item.value,\n        stack: stack.slice(0),\n      };\n    else\n      yield {...item, stack: stack.slice(0)};\n\n    if (item.type === 'tag')\n      if (item.isStart)\n        stack.push(item);\n      else\n        stack.pop();\n  }\n}\n\nexport function* addDropCapsClassToFirstLetter(\n    tagsAndTextWithStack: Iterable<any>): Generator<ParseEvent, void, void> {\n  let sawFirstReferenceNumber = false;\n  let sawClosingSpanOrB = false;\n  let addedClass = false;\n\n  for (let item of tagsAndTextWithStack) {\n    if (addedClass) {\n      yield item;\n      continue;\n    }\n\n    const {type, name, isStart, value, attributes, stack} = item;\n\n    if (!sawFirstReferenceNumber &&\n        type === 'tag' &&\n        /^(chapter|verse)-num$/.test(attributes.class)) {\n      sawFirstReferenceNumber = true;\n      yield item;\n      continue;\n    }\n\n    if (sawFirstReferenceNumber &&\n        !sawClosingSpanOrB &&\n        type === 'tag' &&\n        (name === 'span' || name === 'b') &&\n        !isStart) {\n      sawClosingSpanOrB = true;\n      yield item;\n      continue;\n    }\n\n    if (sawClosingSpanOrB &&\n        (last(stack) &&\n         last(stack).attributes &&\n         (last(stack).attributes.class === 'verse' ||\n          last(stack).attributes.class === 'woc')) &&\n        type === 'text') {\n      const parts = value.match(/^([\\s\"]*)(&#?[\\w]+;)*([\\w“])(.*)/);\n\n      if (!parts) {\n        yield item;\n        continue;\n      }\n\n      const [, leadingWhitespace, leadingEntities, firstLetter, rest] = parts;\n\n      if (leadingWhitespace)\n        yield {type: 'text', value: leadingWhitespace};\n\n      yield {\n        type: 'tag',\n        isStart: true,\n        value: `<span class=\"first-letter\">`,\n        name: 'span',\n        attributes: {class: 'first-letter'},\n      }\n\n      if (leadingEntities)\n        yield {type: 'text', value: leadingEntities};\n      else\n        yield {type: 'text', value: firstLetter};\n\n      yield {\n        type: 'tag',\n        isStart: false,\n        value: '</span>',\n        name: 'span',\n        attributes: {},\n      };\n\n      if (rest)\n        if (leadingEntities)\n          yield {type: 'text', value: firstLetter + rest};\n        else\n          yield {type: 'text', value: rest};\n\n      addedClass = true;\n      continue;\n    }\n\n    yield item;\n  }\n}\n\nexport function* withSurroundingEvents(tagsAndText: Iterable<any>):\n    Generator<any, void, void> {\n  const window = [null];\n\n  for (let item of tagsAndText) {\n    if (window.length === 3)\n      yield Object.assign({before: window[0], after: window[2]}, window[1]);\n\n    window.push(item);\n\n    if (window.length > 3)\n      window.shift();\n  }\n\n  yield Object.assign({before: window[0], after: window[2]}, window[1]);\n  yield Object.assign({before: window[1], after: null}, window[2]);\n}\n\nexport function* stripCopyright(\n    tagsAndTextWithSurroundingEvents: Iterable<any>):\n      Generator<any, void, void> {\n  let inTag = false;\n\n  for (let item of tagsAndTextWithSurroundingEvents) {\n    if (item.type === 'text' &&\n        item.value[item.value.length - 1] === '(' &&\n        item.after.attributes &&\n        item.after.attributes.class === 'copyright') {\n      yield {\n        type: 'text',\n        value: item.value.substring(0, item.value.length - 1),\n      };\n    } else if (item.type === 'tag' &&\n               item.attributes.class === 'copyright') {\n      // Don't yield this item\n      inTag = true;\n    } else if (inTag) {\n      if (item.type === 'tag' && !item.isStart)\n        inTag = false;\n    } else if (item.type === 'text' &&\n               item.value[0] === ')' &&\n               last(item.before.stack).attributes &&\n               last(item.before.stack).attributes.class === 'copyright') {\n      const value = item.value.substring(1);\n      if (value)\n        yield {type: 'text', value};\n    } else {\n      yield item;\n    }\n  }\n}\n\nexport default (text: string): string => Array.from(\n    stripCopyright(\n      withSurroundingEvents(\n        addDropCapsClassToFirstLetter(\n          withTagStack(\n            addSpansAroundVerses(\n              stripTags('script',\n                stripTags('object',\n                  tagsAndText(text)))))))))\n  .map(i => i.value)\n  .join('');\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/transform.js","// @flow\n/**\n * Service worker for app-specific logic.\n *\n * In development, this code will run alone as a service worker, and in\n * production this will get appended to the \"sw-precache\" code that's generated\n * by the build.\n */\n/* eslint-disable no-restricted-globals */\n\nimport {FROM_DB_HEADER, FROM_SERVICE_WORKER_HEADER} from '../constants';\nimport esvStore from '../db/bibles/esv';\nimport kjvStore from '../db/bibles/kjv';\nimport {\n  pathStringToReference,\n  apiPathToReference,\n  chapterIndex,\n} from '../data/model';\nimport transform from '../data/transform';\nimport {ESV_BASE, fetchOrThrow, esvLookup} from '../data/fetcher';\nimport type {EsvApiJson} from '../data/fetcher';\nimport log from '../log';\n\nconst isPassageLookup = (url: URL): boolean =>\n  ESV_BASE.hostname === url.hostname || /^\\/api/.test(url.pathname);\n\nconst logStorage = (url, reference, index) =>\n  log(`Storing ${url.toString()} with reference ${JSON.stringify(reference)} as ${index}`,\n      'color: #888; font-size: 0.8em');\n\nconst fromKjvDb = (url: URL): Promise<string> => {\n  return kjvStore().get(chapterIndex(apiPathToReference(url.pathname)));\n}\n\nconst toKjvDb = (url: URL, text: string) => {\n  const reference = apiPathToReference(url.pathname);\n  const index = chapterIndex(reference);\n  logStorage(url, reference, index);\n  kjvStore().set(index, text);\n};\n\nconst fromEsvDb = (url: URL): Promise<string> => {\n  const passageString = url.searchParams.get('q');\n  return esvStore().get(chapterIndex(pathStringToReference(passageString)));\n}\n\nconst toEsvDb = (url: URL, text: string) => {\n  const passage = url.searchParams.get('q');\n  const reference = pathStringToReference(passage);\n  const index = chapterIndex(reference);\n\n  if (Number.isNaN(index))\n    return;\n\n  logStorage(url, reference, index);\n  esvStore().set(index, text);\n};\n\nconst createSwResponse = (text: string) =>\n  new Response(text, {\n    status: 200,\n    headers: {[FROM_SERVICE_WORKER_HEADER]: true},\n  });\n\nself.addEventListener('fetch', event => {\n  const request: Request = event.request;\n  const url = new URL(request.url);\n  const isEsv = ESV_BASE.hostname === url.hostname;\n\n  if (!isPassageLookup(url))\n    return;\n\n  const fromDb: Promise<string> = isEsv? fromEsvDb(url) : fromKjvDb(url);\n\n  event.respondWith(fromDb\n    .then(text => {\n      if (isEsv) {\n        const esvApiJson: EsvApiJson = {passages: [text]};\n        text = JSON.stringify(esvApiJson);\n      }\n      log(`Serving ${url.pathname}${url.search} from db`,\n          'color: #23bd23; font-size: 0.8em');\n      return new Response(text, {\n        status: 200,\n        headers: {[FROM_DB_HEADER]: true, [FROM_SERVICE_WORKER_HEADER]: true},\n      });\n    })\n    .catch(error => {\n      const request: Promise<Response> = isEsv?\n        esvLookup(url)\n          .then(response => response.json())\n          .then(esvApiJson => esvApiJson.passages[0])\n          .then(transform)\n          .then(text => {\n            const esvApiJson: EsvApiJson = {passages: [text]};\n            toEsvDb(url, text);\n            return createSwResponse(JSON.stringify(esvApiJson));\n          }) :\n\n        fetchOrThrow(url)\n          .then(response => response.text())\n          .then(text => {\n            toKjvDb(url, text);\n            return createSwResponse(text);\n          });\n\n      return request;\n    }));\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/service-worker/index.js","// @flow\n\nimport KeyValStore from '../key-val-store';\n\nlet _instance;\n\nconst STORE_NAME = 'chapters';\n\nconst DB_METADATA = {\n  name: 'bible-esv',\n  version: 2,\n  stores: [STORE_NAME],\n};\n\nexport class EsvBibleStore extends KeyValStore<number, string> {\n  constructor() {\n    super(DB_METADATA, STORE_NAME);\n  }\n}\n\nexport default (): EsvBibleStore => {\n  if (_instance == null)\n    _instance = new EsvBibleStore();\n\n  return _instance;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/db/bibles/esv.js","// @flow\n\n/** thanks jake https://github.com/jakearchibald/idb-keyval */\n\n// begin flow lib declaration //////////////////////////////////////////////////\n\n// Until https://github.com/facebook/flow/pull/5216 gets merged?\n\n// Implemented by window & worker\ndeclare interface IDBEnvironment {\n  indexedDB: IDBFactory;\n}\n\ntype IDBDirection = 'next' | 'nextunique' | 'prev' | 'prevunique';\n\n// Implemented by window.indexedDB & worker.indexedDB\ndeclare interface IDBFactory {\n  open(name: string, version?: number): IDBOpenDBRequest;\n  deleteDatabase(name: string): IDBOpenDBRequest;\n  cmp(a: any, b: any): -1|0|1;\n}\n\ndeclare var indexedDB: IDBFactory;\n\ndeclare interface IDBRequest extends EventTarget {\n  result: any;\n  error: Error;\n  source: ?(IDBIndex | IDBObjectStore | IDBCursor);\n  transaction: IDBTransaction;\n  readyState: 'pending'|'done';\n  onerror: (err: any) => mixed;\n  onsuccess: (e: any) => mixed;\n}\n\ndeclare interface IDBOpenDBRequest extends IDBRequest {\n  onblocked: (e: any) => mixed;\n  onupgradeneeded: (e: any) => mixed;\n}\n\ndeclare interface IDBDatabase extends EventTarget {\n  close(): void;\n  createObjectStore(name: string, options?: {\n    keyPath?: ?(string|string[]),\n    autoIncrement?: bool\n  }): IDBObjectStore;\n  deleteObjectStore(name: string): void;\n  transaction(storeNames: string|string[], mode?: 'readonly'|'readwrite'|'versionchange'): IDBTransaction;\n  name: string;\n  version: number;\n  objectStoreNames: string[];\n  onabort: (e: any) => mixed;\n  onerror: (e: any) => mixed;\n  onversionchange: (e: any) => mixed;\n}\n\ndeclare interface IDBTransaction extends EventTarget {\n  abort(): void;\n  db: IDBDatabase;\n  error: Error;\n  mode: 'readonly'|'readwrite'|'versionchange';\n  name: string;\n  objectStore(name: string): IDBObjectStore;\n  onabort: (e: any) => mixed;\n  oncomplete: (e: any) => mixed;\n  onerror: (e: any) => mixed;\n}\n\ndeclare interface IDBObjectStore {\n  add(value: any, key?: any): IDBRequest;\n  autoIncrement: bool;\n  clear(): IDBRequest;\n  createIndex(indexName: string, keyPath: string|string[], optionalParameter?: {\n    unique?: bool,\n    multiEntry?: bool,\n  }): IDBIndex;\n  count(keyRange?: any|IDBKeyRange): IDBRequest;\n  delete(key: any): IDBRequest;\n  deleteIndex(indexName: string): void;\n  get(key: any): IDBRequest;\n  index(indexName: string): IDBIndex;\n  indexNames: string[];\n  name: string;\n  keyPath: any;\n  openCursor(range?: any|IDBKeyRange, direction?: IDBDirection): IDBRequest;\n  openKeyCursor(range?: any|IDBKeyRange, direction?: IDBDirection): IDBRequest;\n  put(value: any, key?: any): IDBRequest;\n  transaction : IDBTransaction;\n}\n\ndeclare interface IDBIndex extends EventTarget {\n  count(key?: any|IDBKeyRange): IDBRequest;\n  get(key: any|IDBKeyRange): IDBRequest;\n  getKey(key: any|IDBKeyRange): IDBRequest;\n  openCursor(range?: any|IDBKeyRange, direction?: IDBDirection): IDBRequest;\n  openKeyCursor(range?: any|IDBKeyRange, direction?: IDBDirection): IDBRequest;\n  name: string;\n  objectStore: IDBObjectStore;\n  keyPath: any;\n  multiEntry: bool;\n  unique: bool;\n}\n\ndeclare interface IDBKeyRange {\n  bound(lower: any, upper: any, lowerOpen?: bool, upperOpen?: bool): IDBKeyRange;\n  only(value: any): IDBKeyRange;\n  lowerBound(bound: any, open?: bool): IDBKeyRange;\n  upperBound(bound: any, open?: bool): IDBKeyRange;\n  lower: any;\n  upper: any;\n  lowerOpen: bool;\n  upperOpen: bool;\n}\n\ndeclare interface IDBCursor {\n  advance(count: number): void;\n  continue(key?: any): void;\n  delete(): IDBRequest;\n  update(newValue: any): IDBRequest;\n  source: IDBObjectStore|IDBIndex;\n  direction: IDBDirection;\n  key: any;\n  primaryKey: any;\n}\n\ndeclare interface IDBCursorWithValue extends IDBCursor {\n  value: any;\n}\n\n// end flow lib declaration ////////////////////////////////////////////////////\n\nexport type DbMetadata = {\n  name: string,\n  version: number,\n  stores: Array<string>,\n};\n\nexport default class KeyValStore<K: string | number, V> {\n  _db: Promise<IDBDatabase>;\n  _db_metadata: DbMetadata;\n  _store_name: string;\n\n  constructor(dbMetadata: DbMetadata, store: string) {\n    this._db_metadata = dbMetadata;\n    this._store_name = store;\n  }\n\n  db(): Promise<IDBDatabase> {\n    if (this._db == null)\n      this._db = new Promise((resolve, reject) => {\n        const request = indexedDB.open(this._db_metadata.name,\n                                              this._db_metadata.version);\n        request.onerror = () => reject(request.error);\n        // TODO: actually handle upgrade\n        request.onupgradeneeded = () => {\n          this._db_metadata.stores.forEach(name => {\n            try { request.result.deleteObjectStore(name) } catch (ignore) {}\n            request.result.createObjectStore(name);\n          });\n        }\n        request.onsuccess = () => {\n          resolve(request.result);\n        }\n      });\n    return this._db;\n  }\n\n  transact(type: 'readonly' | 'readwrite', callback: IDBObjectStore => any):\n      Promise<void> {\n    return this.db().then(db => new Promise((resolve, reject) => {\n      const transaction = db.transaction(this._store_name, type);\n      transaction.oncomplete = resolve;\n      transaction.onerror = () => reject(transaction.error);\n      callback(transaction.objectStore(this._store_name));\n    }))\n  }\n\n  get(key: K): Promise<V> {\n    var req;\n    return this.transact('readonly', store => req = store.get(key))\n      .then(() => {\n        if (typeof req.result === 'undefined') {\n          let keyString = '';\n          if (key.hasOwnProperty('toString'))\n            keyString = key.toString();\n          throw new Error(`Key ${keyString} not found`);\n        } else {\n          return (req.result: V);\n        }\n      });\n  }\n\n  set(key: K, value: V): Promise<void> {\n    return this.transact('readwrite', store => store.put(value, key));\n  }\n\n  all(): Promise<Array<{key: K, value: V}>> {\n    const entries = [];\n    return this.transact('readonly', store => {\n        const request = store.openCursor();\n        request.onsuccess = event => {\n          const cursor = event.target.result;\n          if (!cursor) return;\n          entries.push({key: cursor.key, value: cursor.value});\n          cursor.continue();\n        };\n      })\n      .then(() => entries);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/db/key-val-store.js","// @flow\n\nimport KeyValStore from '../key-val-store';\n\nlet _instance;\n\nconst STORE_NAME = 'chapters';\n\nconst DB_METADATA = {\n  name: 'bible-kjv',\n  version: 2,\n  stores: [STORE_NAME],\n};\n\nexport class KjvBibleStore extends KeyValStore<number, string> {\n  constructor() {\n    super(DB_METADATA, STORE_NAME);\n  }\n}\n\nexport default (): KjvBibleStore => {\n  if (_instance == null)\n    _instance = new KjvBibleStore();\n\n  return _instance;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/db/bibles/kjv.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 22\n// module chunks = 1 2","// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/regenerator-runtime/runtime-module.js\n// module id = 23\n// module chunks = 1 2","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/regenerator-runtime/runtime.js\n// module id = 24\n// module chunks = 1 2","// @flow\n\nexport const chapterCounts = {\n  Genesis: 50,\n  Exodus: 40,\n  Leviticus: 27,\n  Numbers: 36,\n  Deuteronomy: 34,\n  Joshua: 24,\n  Judges: 21,\n  Ruth: 4,\n  '1 Samuel': 31,\n  '2 Samuel': 24,\n  '1 Kings': 22,\n  '2 Kings': 25,\n  '1 Chronicles': 29,\n  '2 Chronicles': 36,\n  Ezra: 10,\n  Nehemiah: 13,\n  Esther: 10,\n  Job: 42,\n  Psalm: 150,\n  Proverbs: 31,\n  Ecclesiastes: 12,\n  'Song of Solomon': 8,\n  Isaiah: 66,\n  Jeremiah: 52,\n  Lamentations: 5,\n  Ezekiel: 48,\n  Daniel: 12,\n  Hosea: 14,\n  Joel: 3,\n  Amos: 9,\n  Obadiah: 1,\n  Jonah: 4,\n  Micah: 7,\n  Nahum: 3,\n  Habakkuk: 3,\n  Zephaniah: 3,\n  Haggai: 2,\n  Zechariah: 14,\n  Malachi: 4,\n  Matthew: 28,\n  Mark: 16,\n  Luke: 24,\n  John: 21,\n  Acts: 28,\n  Romans: 16,\n  '1 Corinthians': 16,\n  '2 Corinthians': 13,\n  Galatians: 6,\n  Ephesians: 6,\n  Philippians: 4,\n  Colossians: 4,\n  '1 Thessalonians': 5,\n  '2 Thessalonians': 3,\n  '1 Timothy': 6,\n  '2 Timothy': 4,\n  Titus: 3,\n  Philemon: 1,\n  Hebrews: 13,\n  James: 5,\n  '1 Peter': 5,\n  '2 Peter': 3,\n  '1 John': 5,\n  '2 John': 1,\n  '3 John': 1,\n  Jude: 1,\n  Revelation: 22,\n};\n\nconst chaptersBefore = {\n  Genesis: 0,\n  Exodus: 50,\n  Leviticus: 90,\n  Numbers: 117,\n  Deuteronomy: 153,\n  Joshua: 187,\n  Judges: 211,\n  Ruth: 232,\n  '1 Samuel': 236,\n  '2 Samuel': 267,\n  '1 Kings': 291,\n  '2 Kings': 313,\n  '1 Chronicles': 338,\n  '2 Chronicles': 367,\n  Ezra: 403,\n  Nehemiah: 413,\n  Esther: 426,\n  Job: 436,\n  Psalm: 478,\n  Proverbs: 628,\n  Ecclesiastes: 659,\n  'Song of Solomon': 671,\n  Isaiah: 679,\n  Jeremiah: 745,\n  Lamentations: 797,\n  Ezekiel: 802,\n  Daniel: 850,\n  Hosea: 862,\n  Joel: 876,\n  Amos: 879,\n  Obadiah: 888,\n  Jonah: 889,\n  Micah: 893,\n  Nahum: 900,\n  Habakkuk: 903,\n  Zephaniah: 906,\n  Haggai: 909,\n  Zechariah: 911,\n  Malachi: 925,\n  Matthew: 929,\n  Mark: 957,\n  Luke: 973,\n  John: 997,\n  Acts: 1018,\n  Romans: 1046,\n  '1 Corinthians': 1062,\n  '2 Corinthians': 1078,\n  Galatians: 1091,\n  Ephesians: 1097,\n  Philippians: 1103,\n  Colossians: 1107,\n  '1 Thessalonians': 1111,\n  '2 Thessalonians': 1116,\n  '1 Timothy': 1119,\n  '2 Timothy': 1125,\n  Titus: 1129,\n  Philemon: 1132,\n  Hebrews: 1133,\n  James: 1146,\n  '1 Peter': 1151,\n  '2 Peter': 1156,\n  '1 John': 1159,\n  '2 John': 1164,\n  '3 John': 1165,\n  Jude: 1166,\n  Revelation: 1167\n};\n\nexport const CHAPTER_COUNT = 1189;\n\ntype Book = $Keys<typeof chapterCounts>;\n\nexport const books: Array<Book> = Object.getOwnPropertyNames(chaptersBefore);\n\nexport type Reference = {|\n  +book: Book,\n  +chapter: number,\n  +verse: number\n|};\n\nexport type Chapter = {|\n  +reference: Reference,\n  +text: string\n|};\n\nexport const chapterIndex = (reference: Reference): number => {\n  return chaptersBefore[reference.book] + reference.chapter - 1;\n}\n\nexport const reference = (index: number): Reference => {\n  let book;\n\n  for (let current of books)\n    if (chaptersBefore[current] <= index)\n      book = current\n    else\n      break;\n\n  if (book == null)\n    throw new Error('reference index is out of range');\n\n  return {book, chapter: index - chaptersBefore[book] + 1, verse: 1};\n}\n\nexport const before = (ref: Reference): Reference => {\n  const index = chapterIndex(ref);\n  const indexBefore =\n    (((index - 1) % CHAPTER_COUNT) + CHAPTER_COUNT) % CHAPTER_COUNT\n  return reference(indexBefore);\n}\n\nexport const after = (ref: Reference): Reference =>\n  reference((chapterIndex(ref) + 1) % CHAPTER_COUNT);\n\nexport const pathStringToReference = (referenceString: string): Reference => {\n  let [bookNumber, book, chapterAndVerse] = referenceString.split(/\\s/);\n\n  if (!/^\\d+$/.test(bookNumber))\n    [book, chapterAndVerse, bookNumber] = [bookNumber, book, ''];\n\n  const [chapter, verse] = chapterAndVerse != null?\n    chapterAndVerse.split(':') : [1, 1];\n\n  return {\n    book: (((bookNumber? bookNumber + ' ' : '') +\n          book[0].toUpperCase() +\n          book.slice(1).toLowerCase()): any),\n    chapter: parseInt(chapter, 10),\n    verse: verse == null? 1 : parseInt(verse, 10)\n  };\n}\n\nexport const apiPathToReference = (pathname: string): Reference => {\n  const [,,,, dashedBook, chapterDotHtml] = pathname.split('/');\n  const book = books\n    .filter(b => b.toLowerCase().replace(/ /g, '-') === dashedBook)[0];\n  const chapter = parseInt(chapterDotHtml.split('.')[0], 10);\n\n  if (!book || Number.isNaN(chapter))\n    throw new Error(`Could not convert ${pathname} to a reference.`);\n\n  return {book, chapter, verse: 1};\n}\n\nexport const locationToReference = (location: Location): Reference =>\n  pathStringToReference(decodeURI(location.pathname)\n    .slice(1)\n    .replace(/\\++/g, ' ')\n    .replace(/^\\s+/, '')\n    .replace(/\\s+$/, ''));\n\nexport const chapterToLocation = ({book, chapter}: Reference): string =>\n  `/${book}+${chapter}`;\n\nexport const referenceToLocation = (reference: Reference): string =>\n  `/${reference.book}+${reference.chapter}:${reference.verse}`;\n\nexport const isEqual = (a: Reference, b: Reference): boolean =>\n  a.book === b.book && a.chapter === b.chapter && a.verse === b.verse;\n\n/** Convert a Reference to the element ID the ESV API puts in their markup.\n *\n * The v2 ESV API marks up the verses with:\n *\n *     <span class=verse-num id=vBBCCCVVV-X>VVV</span>\n *\n * Where BB is the book number, CCC is the chapter number, and VVV is the verse\n * number. These numbers are all 0-padded and start at one, so Genesis 1:1\n * would be v01001001-1.\n *\n * This is the inverse of verseNumIdToReference.\n */\nexport const referenceToVerseNumId = (r: Reference): string => {\n  const bookIdx = books.indexOf(r.book) + 1;\n  const book = bookIdx.toLocaleString('en', {minimumIntegerDigits: 2});\n  const chapter = r.chapter.toLocaleString('en', {minimumIntegerDigits: 3});\n  const verse = r.verse.toLocaleString('en', {minimumIntegerDigits: 3});\n\n  return `v${book}${chapter}${verse}-1`;\n};\n\n/** Convert an element ID the ESV API puts in their markup to a reference.\n *\n * The v2 ESV API marks up the verses with:\n *\n *     <span class=verse-num id=vBBCCCVVV-X>VVV</span>\n *\n * Where BB is the book number, CCC is the chapter number, and VVV is the verse\n * number. These numbers are all 0-padded and start at one, so Genesis 1:1\n * would be v01001001-1.\n *\n * This has also been updated to handle the markup pre-processing I do that\n * wraps the entire verse in a span that starts with \"vt\", so something like\n * \"vt01001001-1\".\n *\n * This is the inverse of referenceToVerseNumId.\n */\nexport const verseNumIdToReference = (id: string): Reference => {\n  const parsed = id.match(/^vt?(\\d\\d)(\\d\\d\\d)(\\d\\d\\d)/);\n\n  if (parsed == null)\n    throw new Error(`cannot convert ${id} to reference`);\n\n  const [, book, chapter, verse] = parsed;\n\n  return {\n    book: books[parseInt(book, 10) - 1],\n    chapter: parseInt(chapter, 10),\n    verse: parseInt(verse, 10),\n  };\n};\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/model.js","// @flow\n\nimport type {Reference} from './data/model';\n\nexport type Translation = 'kjv' | 'esv';\n\nexport type SetChapterText = {|\n  +type: 'set-chapter-text',\n  +translation: Translation,\n  +reference: Reference,\n  +text: string,\n|};\n\nexport const setChapterText = (\n        translation: Translation,\n        reference: Reference,\n        text: string,\n      ): SetChapterText =>\n    ({type: 'set-chapter-text', translation, reference, text});\n\nexport type AddRecent = {|\n  +type: 'add-recent',\n  +reference: Reference,\n|};\n\nexport const addRecent = (reference: Reference): AddRecent =>\n  ({type: 'add-recent', reference});\n\nexport type SetRecents = {|\n  +type: 'set-recents',\n  +recents: Array<Reference>,\n|};\n\nexport const setRecents = (recents: Array<Reference>): SetRecents =>\n  ({type: 'set-recents', recents});\n\nexport type Preferences = {|\n  +enableFocusMode: boolean,\n  +enableNightMode: boolean,\n  +hasConfirmedFocusMode: boolean,\n  +translation: Translation,\n|};\n\nexport type SettablePreferences = {\n  +enableFocusMode?: boolean,\n  +enableNightMode?: boolean,\n  +hasConfirmedFocusMode?: boolean,\n  +translation?: Translation,\n};\n\nexport type EnableFocusMode = {|\n  +type: 'enable-focus-mode',\n  +enabled: boolean,\n|};\n\nexport const enableFocusMode = (enabled: boolean): EnableFocusMode =>\n  ({type: 'enable-focus-mode', enabled});\n\nexport type EnableNightMode = {|\n  +type: 'enable-night-mode',\n  +enabled: boolean,\n|};\n\nexport const enableNightMode = (enabled: boolean): EnableNightMode =>\n  ({type: 'enable-night-mode', enabled});\n\nexport type SetPreferences = {|\n  +type: 'set-preferences',\n  +preferences: SettablePreferences,\n|};\n\nexport const setPreferences = (preferences: SettablePreferences):\n    SetPreferences =>\n  ({type: 'set-preferences', preferences});\n\nexport type AddToast = {|\n  +type: 'add-toast',\n  +text: string,\n|};\n\nexport const addToast = (text: string): AddToast => ({type: 'add-toast', text});\n\nexport type ConfirmFocusMode = {|+type: 'confirm-focus-mode'|};\n\nexport const confirmFocusMode = (): ConfirmFocusMode =>\n  ({type: 'confirm-focus-mode'});\n\nexport type Action =\n    SetChapterText\n  | AddRecent\n  | SetRecents\n  | EnableFocusMode\n  | EnableNightMode\n  | SetPreferences\n  | AddToast\n  | ConfirmFocusMode;\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions.js"],"sourceRoot":""}