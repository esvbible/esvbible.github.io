{"version":3,"sources":["../webpack/bootstrap","data/model.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","actions.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","constants.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","data/fetcher.js","log.js","db/key-val-store.js","data/transform.js","../node_modules/regenerator-runtime/runtime.js","db/bibles/esv.js","db/bibles/kjv.js","service-worker/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","chapterCounts","Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalm","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation","chaptersBefore","CHAPTER_COUNT","books","getOwnPropertyNames","chapterIndex","reference","book","chapter","index","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","iterator","next","done","current","err","return","Error","verse","before","ref","after","pathStringToReference","referenceString","_referenceString$spli","split","_referenceString$spli2","_home_travis_build_everywherebible_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","bookNumber","chapterAndVerse","test","_ref","_ref2","_ref3","toUpperCase","slice","toLowerCase","parseInt","apiPathToReference","pathname","_pathname$split","_pathname$split2","dashedBook","chapterDotHtml","normalizedBook","replace","filter","b","Number","isNaN","concat","locationToReference","location","decodeURI","chapterToLocation","_ref4","referenceToLocation","isEqual","a","referenceToVerseNumId","indexOf","toLocaleString","minimumIntegerDigits","verseNumIdToReference","id","parsed","match","_parsed","__webpack_exports__","_objectSpread","_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","sym","getOwnPropertyDescriptor","forEach","_classCallCheck","instance","Constructor","TypeError","setChapterText","addRecent","setRecents","enableFocusMode","enableNightMode","setPreferences","addToast","confirmFocusMode","translation","text","type","recents","enabled","preferences","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","push","_iterableToArrayLimit","_nonIterableRest","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_typeof2","obj","constructor","_typeof","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_setPrototypeOf","_inherits","subClass","superClass","writable","configurable","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","FROM_DB_HEADER","FROM_SERVICE_WORKER_HEADER","_defineProperty","ESV_BASE","fetchOrThrow","esvLookup","updateStoreWithPassageText","_actions__WEBPACK_IMPORTED_MODULE_0__","_constants__WEBPACK_IMPORTED_MODULE_1__","_log__WEBPACK_IMPORTED_MODULE_2__","_model__WEBPACK_IMPORTED_MODULE_3__","_transform__WEBPACK_IMPORTED_MODULE_4__","URL","KJV_BASE","url","init","fetch","then","response","ok","status","fromDb","headers","fromSw","log","toString","authorization","accept","fetchChapter","store","getState","request","kjvChapterUrl","searchParams","set","esvChapterUrl","json","passages","transform","dispatch","indexIsCached","state","chapters","message","format","console","navigator","serviceWorker","KeyValStore","dbMetadata","_home_travis_build_everywherebible_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_db_metadata","_store_name","_this","_db","Promise","resolve","reject","indexedDB","open","version","onerror","error","onupgradeneeded","stores","result","deleteObjectStore","ignore","createObjectStore","onsuccess","callback","_this2","db","transaction","oncomplete","objectStore","req","transact","keyString","put","entries","openCursor","event","cursor","continue","tagsAndText","stripTags","addSpansAroundVerses","withTagStack","addDropCapsClassToFirstLetter","withSurroundingEvents","stripCopyright","last","html","context","metadata","_ctx","attributeName","_lastCtx","ctx","_home_travis_build_everywherebible_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","wrap","_context","prev","start","substring","isStart","attributes","assign","pop","lastCtx","isQuoted","stop","_marked","tagName","inObjectTag","item","_context2","t0","finish","_marked2","inVerse","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","_context3","class","_marked3","stack","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_context4","_home_travis_build_everywherebible_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","_marked4","tagsAndTextWithStack","sawFirstReferenceNumber","sawClosingSpanOrB","addedClass","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","parts","_parts","leadingWhitespace","leadingEntities","firstLetter","rest","_context5","abrupt","_marked5","window","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_context6","shift","_marked6","tagsAndTextWithSurroundingEvents","inTag","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_iterator6","_step6","_value","_context7","_marked7","from","map","join","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","GenStateSuspendedStart","method","arg","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","reverse","skipTempReset","charAt","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","_instance","STORE_NAME","DB_METADATA","EsvBibleStore","_KeyValStore","classCallCheck","possibleConstructorReturn","inherits","esv","KjvBibleStore","kjv","logStorage","JSON","stringify","createSwResponse","Response","addEventListener","isEsv","hostname","isPassageLookup","passageString","esvStore","fromEsvDb","kjvStore","fromKjvDb","respondWith","_headers2","esvApiJson","search","passage","toEsvDb","toKjvDb"],"mappings":"aACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,qBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,kBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,IAIAlC,IAAAmC,EAAA,+gBChFaC,EAAgB,CAC3BC,QAAS,GACTC,OAAQ,GACRC,UAAW,GACXC,QAAS,GACTC,YAAa,GACbC,OAAQ,GACRC,OAAQ,GACRC,KAAM,EACNC,WAAY,GACZC,WAAY,GACZC,UAAW,GACXC,UAAW,GACXC,eAAgB,GAChBC,eAAgB,GAChBC,KAAM,GACNC,SAAU,GACVC,OAAQ,GACRC,IAAK,GACLC,MAAO,IACPC,SAAU,GACVC,aAAc,GACdC,kBAAmB,EACnBC,OAAQ,GACRC,SAAU,GACVC,aAAc,EACdC,QAAS,GACTC,OAAQ,GACRC,MAAO,GACPC,KAAM,EACNC,KAAM,EACNC,QAAS,EACTC,MAAO,EACPC,MAAO,EACPC,MAAO,EACPC,SAAU,EACVC,UAAW,EACXC,OAAQ,EACRC,UAAW,GACXC,QAAS,EACTC,QAAS,GACTC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,OAAQ,GACRC,gBAAiB,GACjBC,gBAAiB,GACjBC,UAAW,EACXC,UAAW,EACXC,YAAa,EACbC,WAAY,EACZC,kBAAmB,EACnBC,kBAAmB,EACnBC,YAAa,EACbC,YAAa,EACbC,MAAO,EACPC,SAAU,EACVC,QAAS,GACTC,MAAO,EACPC,UAAW,EACXC,UAAW,EACXC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,KAAM,EACNC,WAAY,IAGRC,EAAiB,CACrBlE,QAAS,EACTC,OAAQ,GACRC,UAAW,GACXC,QAAS,IACTC,YAAa,IACbC,OAAQ,IACRC,OAAQ,IACRC,KAAM,IACNC,WAAY,IACZC,WAAY,IACZC,UAAW,IACXC,UAAW,IACXC,eAAgB,IAChBC,eAAgB,IAChBC,KAAM,IACNC,SAAU,IACVC,OAAQ,IACRC,IAAK,IACLC,MAAO,IACPC,SAAU,IACVC,aAAc,IACdC,kBAAmB,IACnBC,OAAQ,IACRC,SAAU,IACVC,aAAc,IACdC,QAAS,IACTC,OAAQ,IACRC,MAAO,IACPC,KAAM,IACNC,KAAM,IACNC,QAAS,IACTC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,SAAU,IACVC,UAAW,IACXC,OAAQ,IACRC,UAAW,IACXC,QAAS,IACTC,QAAS,IACTC,KAAM,IACNC,KAAM,IACNC,KAAM,IACNC,KAAM,KACNC,OAAQ,KACRC,gBAAiB,KACjBC,gBAAiB,KACjBC,UAAW,KACXC,UAAW,KACXC,YAAa,KACbC,WAAY,KACZC,kBAAmB,KACnBC,kBAAmB,KACnBC,YAAa,KACbC,YAAa,KACbC,MAAO,KACPC,SAAU,KACVC,QAAS,KACTC,MAAO,KACPC,UAAW,KACXC,UAAW,KACXC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,KAAM,KACNC,WAAY,MAGDE,EAAgB,KAIhBC,EAAqB3F,OAAO4F,oBAAoBH,GAahDI,EAAe,SAACC,GAC3B,OAAOL,EAAeK,EAAUC,MAAQD,EAAUE,QAAU,GAGjDF,EAAY,SAACG,GACxB,IAAIF,EADiDG,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAGrD,QAAAC,EAAAC,EAAoBZ,EAApBtF,OAAAmG,cAAAN,GAAAI,EAAAC,EAAAE,QAAAC,MAAAR,GAAA,OAASS,EAATL,EAAA/F,MACE,KAAIkF,EAAekB,IAAYV,GAG7B,MAFAF,EAAOY,GAL0C,MAAAC,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAK,EAAAM,QAAAN,EAAAM,SAAA,WAAAV,EAAA,MAAAC,GASrD,GAAY,MAARL,EACF,MAAM,IAAIe,MAAM,mCAElB,MAAO,CAACf,OAAMC,QAASC,EAAQR,EAAeM,GAAQ,EAAGgB,MAAO,IAGrDC,EAAS,SAACC,GACrB,IAAMhB,EAAQJ,EAAaoB,GAG3B,OAAOnB,IADFG,EAAQ,GAAKP,EAAiBA,GAAiBA,IAIzCwB,EAAQ,SAACD,GAAD,OACnBnB,GAAWD,EAAaoB,GAAO,GAAKvB,IAEzByB,EAAwB,SAACC,GAAuC,IAAAC,EACjCD,EAAgBE,MAAM,MADWC,EAAAvH,OAAAwH,EAAA,EAAAxH,CAAAqH,EAAA,GACtEI,EADsEF,EAAA,GAC1DxB,EAD0DwB,EAAA,GACpDG,EADoDH,EAAA,GAG3E,IAAK,QAAQI,KAAKF,GAAlB,KAAAG,EACwC,CAACH,EAAY1B,EAAM,IAAxDA,EADH6B,EAAA,GACSF,EADTE,EAAA,GAC0BH,EAD1BG,EAAA,GAH2E,IAAAC,EAM/B,MAAnBH,EACvBA,EAAgBJ,MAAM,KAAO,CAAC,EAAG,GAPwCQ,EAAA9H,OAAAwH,EAAA,EAAAxH,CAAA6H,EAAA,GAMpE7B,EANoE8B,EAAA,GAM3Df,EAN2De,EAAA,GAS3E,MAAO,CACL/B,MAAS0B,EAAYA,EAAa,IAAM,IAClC1B,EAAK,GAAGgC,cACRhC,EAAKiC,MAAM,GAAGC,cACpBjC,QAASkC,SAASlC,EAAS,IAC3Be,MAAgB,MAATA,EAAe,EAAImB,SAASnB,EAAO,MAIjCoB,EAAqB,SAACC,GAAgC,IAAAC,EACvBD,EAASd,MAAM,KADQgB,EAAAtI,OAAAwH,EAAA,EAAAxH,CAAAqI,EAAA,GACrDE,EADqDD,EAAA,GACzCE,EADyCF,EAAA,GAE3DG,EAAiBF,EACpBG,QAAQ,KAAM,KACdA,QAAQ,SAAU,SACf3C,EAAOJ,EAAMgD,OAAO,SAAAC,GAAC,OAAIA,EAAEX,gBAAkBQ,IAAgB,GAC7DzC,EAAUkC,SAASM,EAAelB,MAAM,KAAK,GAAI,IAEvD,IAAKvB,GAAQ8C,OAAOC,MAAM9C,GACxB,MAAM,IAAIc,MAAJ,qBAAAiC,OAA+BX,EAA/B,qBAER,MAAO,CAACrC,OAAMC,UAASe,MAAO,IAGnBiC,EAAsB,SAACC,GAAD,OACjC9B,EAAsB+B,UAAUD,EAASb,UACtCJ,MAAM,GACNU,QAAQ,OAAQ,KAChBA,QAAQ,OAAQ,IAChBA,QAAQ,OAAQ,MAERS,EAAoB,SAAAC,GAAA,IAAErD,EAAFqD,EAAErD,KAAMC,EAARoD,EAAQpD,QAAR,UAAA+C,OAC3BhD,EAD2B,KAAAgD,OACnB/C,IAEDqD,EAAsB,SAACvD,GAAD,UAAAiD,OAC7BjD,EAAUC,KADmB,KAAAgD,OACXjD,EAAUE,QADC,KAAA+C,OACUjD,EAAUiB,QAE1CuC,EAAU,SAACC,EAAcX,GAAf,OACrBW,EAAExD,OAAS6C,EAAE7C,MAAQwD,EAAEvD,UAAY4C,EAAE5C,SAAWuD,EAAExC,QAAU6B,EAAE7B,OAcnDyC,EAAwB,SAACpJ,GACpC,IACM2F,GADUJ,EAAM8D,QAAQrJ,EAAE2F,MAAQ,GACnB2D,eAAe,KAAM,CAACC,qBAAsB,IAC3D3D,EAAU5F,EAAE4F,QAAQ0D,eAAe,KAAM,CAACC,qBAAsB,IAChE5C,EAAQ3G,EAAE2G,MAAM2C,eAAe,KAAM,CAACC,qBAAsB,IAElE,UAAAZ,OAAWhD,GAAXgD,OAAkB/C,GAAlB+C,OAA4BhC,EAA5B,OAmBW6C,EAAwB,SAACC,GACpC,IAAMC,EAASD,EAAGE,MAAM,8BAExB,GAAc,MAAVD,EACF,MAAM,IAAIhD,MAAJ,kBAAAiC,OAA4Bc,EAA5B,kBAJsD,IAAAG,EAAAhK,OAAAwH,EAAA,EAAAxH,CAM7B8J,EAN6B,GAMrD/D,EANqDiE,EAAA,GAM/ChE,EAN+CgE,EAAA,GAMtCjD,EANsCiD,EAAA,GAQ9D,MAAO,CACLjE,KAAMJ,EAAMuC,SAASnC,EAAM,IAAM,GACjCC,QAASkC,SAASlC,EAAS,IAC3Be,MAAOmB,SAASnB,EAAO,uBC1R3B1H,EAAAD,QAAiBF,EAAQ,kCCAzBA,EAAAU,EAAAqK,EAAA,sBAAAC,IAAA,IAAAC,EAAAjL,EAAA,IACe,SAAAgL,EAAAE,GACf,QAAA9K,EAAA,EAAiBA,EAAA+K,UAAAC,OAAsBhL,IAAA,CACvC,IAAAiL,EAAA,MAAAF,UAAA/K,GAAA+K,UAAA/K,GAAA,GACAkL,EAAAxK,OAAAyK,KAAAF,GAEA,oBAAAvK,OAAA0K,wBACAF,IAAAzB,OAAA/I,OAAA0K,sBAAAH,GAAA5B,OAAA,SAAAgC,GACA,OAAA3K,OAAA4K,yBAAAL,EAAAI,GAAAzK,eAIAsK,EAAAK,QAAA,SAAAhK,GACMb,OAAAmK,EAAA,EAAAnK,CAAcoK,EAAAvJ,EAAA0J,EAAA1J,MAIpB,OAAAuJ,iCCjBe,SAAAU,EAAAC,EAAAC,GACf,KAAAD,aAAAC,GACA,UAAAC,UAAA,qCAFA/L,EAAAU,EAAAqK,EAAA,sBAAAa,kCCaA5L,EAAAU,EAAAqK,EAAA,sBAAAiB,IAAAhM,EAAAU,EAAAqK,EAAA,sBAAAkB,IAAAjM,EAAAU,EAAAqK,EAAA,sBAAAmB,IAAAlM,EAAAU,EAAAqK,EAAA,sBAAAoB,IAAAnM,EAAAU,EAAAqK,EAAA,sBAAAqB,IAAApM,EAAAU,EAAAqK,EAAA,sBAAAsB,IAAArM,EAAAU,EAAAqK,EAAA,sBAAAuB,IAAAtM,EAAAU,EAAAqK,EAAA,sBAAAwB,IAAO,IAAMP,EAAiB,SACtBQ,EACA5F,EACA6F,GAHsB,MAKzB,CAACC,KAAM,mBAAoBF,cAAa5F,YAAW6F,SAO3CR,EAAY,SAACrF,GAAD,MACtB,CAAC8F,KAAM,aAAc9F,cAOXsF,EAAa,SAACS,GAAD,MACvB,CAACD,KAAM,cAAeC,YAqBZR,EAAkB,SAACS,GAAD,MAC5B,CAACF,KAAM,oBAAqBE,YAOlBR,EAAkB,SAACQ,GAAD,MAC5B,CAACF,KAAM,oBAAqBE,YAOlBP,EAAiB,SAACQ,GAAD,MAE3B,CAACH,KAAM,kBAAmBG,gBAOhBP,EAAW,SAACG,GAAD,MAA6B,CAACC,KAAM,YAAaD,SAI5DF,EAAmB,iBAC7B,CAACG,KAAM,qDClFK,SAAAI,EAAAC,EAAA3M,GACf,OCJe,SAAA2M,GACf,GAAAC,MAAAC,QAAAF,GAAA,OAAAA,EDGSG,CAAcH,IEJR,SAAAA,EAAA3M,GACf,IAAA+M,EAAA,GACAC,GAAA,EACAC,GAAA,EACAC,OAAAnG,EAEA,IACA,QAAAoG,EAAAC,EAAAT,EAAA5L,OAAAmG,cAA6C8F,GAAAG,EAAAC,EAAAjG,QAAAC,QAC7C2F,EAAAM,KAAAF,EAAAlM,QAEAjB,GAAA+M,EAAA/B,SAAAhL,GAH4EgN,GAAA,IAKzE,MAAA1F,GACH2F,GAAA,EACAC,EAAA5F,EACG,QACH,IACA0F,GAAA,MAAAI,EAAA,QAAAA,EAAA,SACK,QACL,GAAAH,EAAA,MAAAC,GAIA,OAAAH,EFnBgCO,CAAoBX,EAAA3M,IGJrC,WACf,UAAA2L,UAAA,wDHGgE4B,GAJhE3N,EAAAU,EAAAqK,EAAA,sBAAA+B,kCIAe,SAAAc,EAAA/M,GAIf,OAHA+M,EAAA9M,OAAA+M,eAAA/M,OAAAgN,eAAA,SAAAjN,GACA,OAAAA,EAAAkN,WAAAjN,OAAAgN,eAAAjN,KAEAA,GAJAb,EAAAU,EAAAqK,EAAA,sBAAA6C,kCCAA,SAAAI,EAAAC,GAA6U,OAA1OD,EAA3E,oBAAA7M,QAAA,kBAAAA,OAAAmG,SAA2E,SAAA2G,GAAoC,cAAAA,GAA+B,SAAAA,GAAoC,OAAAA,GAAA,oBAAA9M,QAAA8M,EAAAC,cAAA/M,QAAA8M,IAAA9M,OAAAa,UAAA,gBAAAiM,IAAmIA,GAE9T,SAAAE,EAAAF,GAWf,OATAE,EADA,oBAAAhN,QAAA,WAAA6M,EAAA7M,OAAAmG,UACA,SAAA2G,GACA,OAAAD,EAAAC,IAGA,SAAAA,GACA,OAAAA,GAAA,oBAAA9M,QAAA8M,EAAAC,cAAA/M,QAAA8M,IAAA9M,OAAAa,UAAA,SAAAgM,EAAAC,KAIAA,GCXe,SAAAG,EAAAC,EAAA9N,GACf,OAAAA,GAAsB,WAAP4N,EAAO5N,IAAA,oBAAAA,ECHP,SAAA8N,GACf,YAAAA,EACA,UAAAC,eAAA,6DAGA,OAAAD,EDESE,CAAqBF,GAH9B9N,EAJAP,EAAAU,EAAAqK,EAAA,sBAAAqD,kCEAe,SAAAI,EAAA3N,EAAAqB,GAMf,OALAsM,EAAA1N,OAAA+M,gBAAA,SAAAhN,EAAAqB,GAEA,OADArB,EAAAkN,UAAA7L,EACArB,IAGAA,EAAAqB,GCLe,SAAAuM,EAAAC,EAAAC,GACf,uBAAAA,GAAA,OAAAA,EACA,UAAA5C,UAAA,sDAGA2C,EAAA1M,UAAAlB,OAAAY,OAAAiN,KAAA3M,UAAA,CACAkM,YAAA,CACA7M,MAAAqN,EACAE,UAAA,EACAC,cAAA,KAGAF,GAAkBH,EAAcE,EAAAC,GAbhC3O,EAAAU,EAAAqK,EAAA,sBAAA0D,kCCAA,SAAAK,EAAA5D,EAAA6D,GACA,QAAA3O,EAAA,EAAiBA,EAAA2O,EAAA3D,OAAkBhL,IAAA,CACnC,IAAA4O,EAAAD,EAAA3O,GACA4O,EAAAhO,WAAAgO,EAAAhO,aAAA,EACAgO,EAAAH,cAAA,EACA,UAAAG,MAAAJ,UAAA,GACA9N,OAAAC,eAAAmK,EAAA8D,EAAArN,IAAAqN,IAIe,SAAAC,EAAAnD,EAAAoD,EAAAC,GAGf,OAFAD,GAAAJ,EAAAhD,EAAA9J,UAAAkN,GACAC,GAAAL,EAAAhD,EAAAqD,GACArD,EAbA9L,EAAAU,EAAAqK,EAAA,sBAAAkE,kCCAAjP,EAAAU,EAAAqK,EAAA,sBAAAqE,IAAApP,EAAAU,EAAAqK,EAAA,sBAAAsE,IAAO,IAAMD,EAAiB,YACjBC,EAA6B,sDCD3B,SAAAC,EAAArB,EAAAtM,EAAAN,GAYf,OAXAM,KAAAsM,EACAnN,OAAAC,eAAAkN,EAAAtM,EAAA,CACAN,QACAL,YAAA,EACA6N,cAAA,EACAD,UAAA,IAGAX,EAAAtM,GAAAN,EAGA4M,EAZAjO,EAAAU,EAAAqK,EAAA,sBAAAuE,kCCGAtP,EAAAU,EAAAqK,EAAA,sBAAAwE,IAAAvP,EAAAU,EAAAqK,EAAA,sBAAAyE,IAAAxP,EAAAU,EAAAqK,EAAA,sBAAA0E,IAAAzP,EAAAU,EAAAqK,EAAA,sBAAA2E,IAAA,IAAAC,EAAA3P,EAAA,GAAA4P,EAAA5P,EAAA,IAAA6P,EAAA7P,EAAA,IAAA8P,EAAA9P,EAAA,GAAA+P,EAAA/P,EAAA,IAQauP,EAAW,IAAIS,IAAI,wCAE1BC,EAAW,IAAID,IAAI,+BAcZR,EAAe,SAACU,EAAmBC,GAApB,OAE1BC,MAAMF,EAAKC,GACRE,KAAK,SAACC,GACL,IAAKA,EAASC,GACZ,MAAM,IAAI3I,MAAJ,GAAAiC,OAAayG,EAASJ,IAAtB,iBAAArG,OAAyCyG,EAASE,SAC1D,IAAMC,EAASH,EAASI,QAAQzP,IAAImO,KAC9BuB,EAASL,EAASI,QAAQzP,IAAIoO,KAC9BhE,EAASoF,EAAQ,UAAYE,EAAQ,UAAY,eAEvD,OADAC,YAAG,YAAA/G,OAAaqG,EAAIW,WAAjB,KAAAhH,OAA+BwB,GAAU,oBACrCiF,KAgBAb,EAAY,SAACS,GAGxB,OAAOV,EAAaU,EAAK,CACvBQ,QAAS,CACPI,cAAa,SAAAjH,OA9CH,4CA+CVkH,OAAQ,uBAKRC,EAAe,SAACC,EAAcrK,GAClC,IAAM4F,EAAcyE,EAAMC,WAAWrE,YAAYL,YAC3C2E,EAA2C,QAAhB3E,EAC/BgD,EArBkB,SAAC5I,GACrB,IAAMC,EAAOD,EAAUC,KAAKkC,cACzBS,QAAQ,KAAM,KACdA,QAAQ,SAAU,UACrB,OAAO,IAAIwG,IAAJ,eAAAnG,OAAuBhD,EAAvB,KAAAgD,OAA+BjD,EAAUE,QAAzC,SAAyDmJ,GAiBjDmB,CAAcxK,IACxByJ,KAAK,SAAAC,GAAQ,OAAIA,EAAS7D,SAE7BgD,EA9BkB,SAAC7I,GACrB,IAAMsJ,EAAM,IAAIF,IAAI,GAAIT,GAExB,OADAW,EAAImB,aAAaC,IAAI,IAArB,GAAAzH,OAA6BjD,EAAUC,KAAvC,KAAAgD,OAA+CjD,EAAUE,UAClDoJ,EA2BKqB,CAAc3K,IACrByJ,KAAK,SAAAC,GACJ,IAAMK,EAASL,EAASI,QAAQzP,IAAIoO,KAEpC,OAAQiB,EAASkB,OACdnB,KAAK,SAAApC,GAAG,OAAIA,EAAIwD,SAAS,KACzBpB,KAAK,SAAA5D,GAAI,OAAIkE,EAAQlE,EAAOiF,YAAUjF,OAM/C,OAHA0E,EACGd,KAAK,SAAA5D,GAAI,OAAIwE,EAAMU,SAAS3F,YAAeQ,EAAa5F,EAAW6F,MAE/D0E,GAGHS,EAAgB,SAACC,EAAc9K,GAAf,OACoC,MAAxD8K,EAAMC,SAASD,EAAMhF,YAAYL,aAAazF,IAEnC2I,EAA6B,SAACuB,EAAcrK,GACvD,IAAMiL,EAAQZ,EAAMC,WACdnK,EAAQJ,YAAaC,GAEtBgL,EAAcC,EAAO9K,IACxBiK,EAAaC,EAAOrK,GAElBG,EAAQ,IAAM6K,EAAcC,EAAO9K,EAAQ,IAC7CiK,EAAaC,EAAOnJ,YAAOlB,IAEzBG,EAAQP,MAAkBoL,EAAcC,EAAO9K,EAAQ,IACzDiK,EAAaC,EAAOjJ,YAAMpB,oCCjGfmE,EAAA,WAACgH,EAASC,GAAV,OACbC,QAAQrB,IAAR,GAAA/G,OAAyB,MAAVmI,EAAgB,KAAO,IAAtCnI,OAHsBqI,WAAaA,UAAUC,cAAe,OAAS,KAGrE,OAAAtI,OAA4DkI,GAAWC,qFCqIpDI,aAKnB,SAAAA,EAAYC,EAAwBpB,GAAgBnQ,OAAAwR,EAAA,EAAAxR,CAAAyR,KAAAH,GAClDG,KAAKC,aAAeH,EACpBE,KAAKE,YAAcxB,mDAGM,IAAAyB,EAAAH,KAiBzB,OAhBgB,MAAZA,KAAKI,MACPJ,KAAKI,IAAM,IAAIC,QAAQ,SAACC,EAASC,GAC/B,IAAM3B,EAAU4B,UAAUC,KAAKN,EAAKF,aAAa7R,KACX+R,EAAKF,aAAaS,SACxD9B,EAAQ+B,QAAU,kBAAMJ,EAAO3B,EAAQgC,QAEvChC,EAAQiC,gBAAkB,WACxBV,EAAKF,aAAaa,OAAO1H,QAAQ,SAAAhL,GAC/B,IAAMwQ,EAAQmC,OAAOC,kBAAkB5S,GAAQ,MAAO6S,IACtDrC,EAAQmC,OAAOG,kBAAkB9S,MAGrCwQ,EAAQuC,UAAY,WAClBb,EAAQ1B,EAAQmC,YAGff,KAAKI,qCAGLjG,EAAgCiH,GACvB,IAAAC,EAAArB,KAChB,OAAOA,KAAKsB,KAAKxD,KAAK,SAAAwD,GAAE,OAAI,IAAIjB,QAAQ,SAACC,EAASC,GAChD,IAAMgB,EAAcD,EAAGC,YAAYF,EAAKnB,YAAa/F,GACrDoH,EAAYC,WAAalB,EACzBiB,EAAYZ,QAAU,kBAAMJ,EAAOgB,EAAYX,QAC/CQ,EAASG,EAAYE,YAAYJ,EAAKnB,8CAItC9Q,GACF,IAAIsS,EACJ,OAAO1B,KAAK2B,SAAS,WAAY,SAAAjD,GAAK,OAAIgD,EAAMhD,EAAMhQ,IAAIU,KACvD0O,KAAK,WACJ,GAA0B,qBAAf4D,EAAIX,OAAwB,CACrC,IAAIa,EAAY,GAGhB,MAFIxS,EAAIM,eAAe,cACrBkS,EAAYxS,EAAIkP,YACZ,IAAIjJ,MAAJ,OAAAiC,OAAiBsK,EAAjB,eAEN,OAAQF,EAAIX,qCAKhB3R,EAAQN,GACV,OAAOkR,KAAK2B,SAAS,YAAa,SAAAjD,GAAK,OAAIA,EAAMmD,IAAI/S,EAAOM,mCAI5D,IAAM0S,EAAU,GAChB,OAAO9B,KAAK2B,SAAS,WAAY,SAAAjD,GACbA,EAAMqD,aACdZ,UAAY,SAAAa,GAClB,IAAMC,EAASD,EAAMrJ,OAAOoI,OACvBkB,IACLH,EAAQ5G,KAAK,CAAC9L,IAAK6S,EAAO7S,IAAKN,MAAOmT,EAAOnT,QAC7CmT,EAAOC,eAGVpE,KAAK,kBAAMgE,wFCzLDK,cA8EAC,cAmBAC,cA2CAC,cAyBAC,cAqFAC,cAkBAC,GA/RXC,EAAO,SAAA5K,GAAC,OAAIA,EAAEA,EAAEe,OAAS,IAmBxB,SAAUsJ,EAAYQ,GAAtB,IAAAC,EAAApO,EAAAqO,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,EAAApL,EAAAqL,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAApO,MAAA,OACC4N,EAAsB,CAAC,CAACzI,KAAM,WAAYmJ,MAAO,IACnD9O,GAAS,EACTqO,EAAgB,GAHf,YAKErO,IAAUmO,EAAK9J,QALjB,CAAAuK,EAAApO,KAAA,YAOc,cADXiO,EAAWP,EAAKE,IACdzI,KAPL,CAAAiJ,EAAApO,KAAA,YAQmB,MAAhB2N,EAAKnO,GARR,CAAA4O,EAAApO,KAAA,YASKiO,EAAIK,QAAU9O,EATnB,CAAA4O,EAAApO,KAAA,SAUG,OAVHoO,EAAApO,KAAA,GAUS,CACJmF,KAAM,OACNrL,MAAO6T,EAAKY,UAAUN,EAAIK,MAAO9O,IAZtC,QAeCoO,EAAQ1H,KAAK,CAACf,KAAM,MAAOmJ,MAAO9O,IAClCqO,EAAW,CAACW,QAA6B,MAApBb,EAAKnO,EAAQ,GAAYiP,WAAY,IAElC,MAApBd,EAAKnO,EAAQ,IACfA,IAEFoO,EAAQ1H,KAAK,CAACf,KAAM,UAAWmJ,MAAO9O,EAAQ,IArB/C,QAAA4O,EAAApO,KAAA,oBAuBqB,QAAbiO,EAAI9I,KAvBZ,CAAAiJ,EAAApO,KAAA,YAwBmB,MAAhB2N,EAAKnO,GAxBR,CAAA4O,EAAApO,KAAA,SA4BC,MAHiB,YAAbiO,EAAI9I,OACN0I,EAASzU,KAAOuU,EAAKY,UAAUV,EAASW,QAAS,EAAI,EAAGhP,IA1B3D4O,EAAApO,KAAA,GA4BOzG,OAAOmV,OAAO,CAClBvJ,KAAM,MACNrL,MAAO6T,EAAKY,UAAUN,EAAIK,MAAO9O,EAAQ,IACxCqO,GA/BJ,QAiCCD,EAAQe,MACajB,EAAKE,GAClBU,MAAQ9O,EAAQ,EAnCzB4O,EAAApO,KAAA,iBAoC0B,MAAhB2N,EAAKnO,IAAkC,MAAhBmO,EAAKnO,KACrCoO,EAAQ1H,KAAK,CAACf,KAAM,YAAamJ,MAAO9O,IACxCoO,EAAQ1H,KAAK,CAACf,KAAM,gBAAiBmJ,MAAO9O,KAtC7C,QAAA4O,EAAApO,KAAA,iBAwCqB,YAAbiO,EAAI9I,KACO,MAAhBwI,EAAKnO,IAAkC,MAAhBmO,EAAKnO,KAC9BqO,EAASzU,KAAOuU,EAAKY,UAAUN,EAAIK,MAAO9O,GAC1CoO,EAAQe,MAEY,MAAhBhB,EAAKnO,IACPA,KAEkB,kBAAbyO,EAAI9I,KACO,MAAhBwI,EAAKnO,KACDuO,EAAgBJ,EAAKY,UAAUN,EAAIK,MAAO9O,GAChDoO,EAAQe,OACFC,EAAelB,EAAKE,IAClBxU,KAAO2U,EACS,MAApBJ,EAAKnO,EAAQ,KACfoP,EAAQC,UAAW,EACnBrP,KAEFoP,EAAQN,MAAQ9O,EAAQ,GAEJ,cAAbyO,EAAI9I,OACS8I,EAAIY,SACR,MAAhBlB,EAAKnO,IAAsC,OAApBmO,EAAKnO,EAAQ,GACpB,MAAhBmO,EAAKnO,IAAkC,MAAhBmO,EAAKnO,MAE5BqO,EAASY,WAAWR,EAAI7U,MAAQuU,EAAKY,UAAUN,EAAIK,MAAO9O,GAC1DoO,EAAQe,MACHV,EAAIY,UAA4B,MAAhBlB,EAAKnO,IACxBA,KApEH,QAAA4O,EAAApO,KAAA,qBA0EY,cADXiO,EAAWP,EAAKE,IACdzI,MAAuB8I,EAAIK,MAAQ9O,EAAQ,GA1E9C,CAAA4O,EAAApO,KAAA,SA2EH,OA3EGoO,EAAApO,KAAA,GA2EG,CAACmF,KAAM,OAAQrL,MAAO6T,EAAKY,UAAUN,EAAIK,MAAO9O,IA3EnD,yBAAA4O,EAAAU,SAAAC,GA8EA,SAAU3B,EAAU4B,EAAiB7B,GAArC,IAAA8B,EAAAxP,EAAAC,EAAAC,EAAAG,EAAAD,EAAAqP,EAAA,OAAAhB,EAAApL,EAAAqL,KAAA,SAAAgB,GAAA,cAAAA,EAAAd,KAAAc,EAAAnP,MAAA,OAEDiP,GAAc,EAFbxP,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAAuP,EAAAd,KAAA,EAAAvO,EAIYqN,EAJZvT,OAAAmG,YAAA,UAAAN,GAAAI,EAAAC,EAAAE,QAAAC,KAAA,CAAAkP,EAAAnP,KAAA,YAKe,SADXkP,EAJJrP,EAAA/F,OAKMqL,OACL+J,EAAKV,SACLU,EAAK9V,OAAS4V,EAPf,CAAAG,EAAAnP,KAAA,SAQDiP,GAAc,EARbE,EAAAnP,KAAA,oBASsB,QAAdkP,EAAK/J,MACJ+J,EAAKV,SACNU,EAAK9V,OAAS4V,EAXtB,CAAAG,EAAAnP,KAAA,SAYDiP,GAAc,EAZbE,EAAAnP,KAAA,oBAaSiP,EAbT,CAAAE,EAAAnP,KAAA,SAcD,OAdCmP,EAAAnP,KAAA,GAcKkP,EAdL,QAAAzP,GAAA,EAAA0P,EAAAnP,KAAA,gBAAAmP,EAAAnP,KAAA,iBAAAmP,EAAAd,KAAA,GAAAc,EAAAC,GAAAD,EAAA,SAAAzP,GAAA,EAAAC,EAAAwP,EAAAC,GAAA,QAAAD,EAAAd,KAAA,GAAAc,EAAAd,KAAA,GAAA5O,GAAA,MAAAK,EAAAM,QAAAN,EAAAM,SAAA,WAAA+O,EAAAd,KAAA,IAAA3O,EAAA,CAAAyP,EAAAnP,KAAA,eAAAL,EAAA,eAAAwP,EAAAE,OAAA,mBAAAF,EAAAE,OAAA,6BAAAF,EAAAL,SAAAQ,EAAA,iCAmBA,SAAUjC,EAAqBF,GAA/B,IAAAoC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAV,EAAA9L,EAAA,OAAA8K,EAAApL,EAAAqL,KAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAA7P,MAAA,OAEDuP,GAAU,EAFTC,GAAA,EAAAC,GAAA,EAAAC,OAAA9P,EAAAiQ,EAAAxB,KAAA,EAAAsB,EAIYxC,EAJZvT,OAAAmG,YAAA,UAAAyP,GAAAI,EAAAD,EAAA3P,QAAAC,KAAA,CAAA4P,EAAA7P,KAAA,YAIIkP,EAJJU,EAAA9V,OAKCyV,GACc,QAAdL,EAAK/J,MACS,MAAd+J,EAAK9V,MACJ8V,EAAKV,QARP,CAAAqB,EAAA7P,KAAA,SASD,OATC6P,EAAA7P,KAAA,GASK,CACJmF,KAAM,MACNqJ,SAAS,EACT1U,MAAO,UACPV,KAAM,OACNqV,WAAY,IAdb,QAgBDc,GAAU,EAhBTM,EAAA7P,KAAA,oBAiBsB,QAAdkP,EAAK/J,OACL,+BAA+BjE,KAAKgO,EAAKT,WAAWqB,OAlB5D,CAAAD,EAAA7P,KAAA,aAmBGuP,EAnBH,CAAAM,EAAA7P,KAAA,SAoBC,OApBD6P,EAAA7P,KAAA,GAoBO,CACJmF,KAAM,MACNqJ,SAAS,EACT1U,MAAO,UACPV,KAAM,OACNqV,WAAY,IAzBf,QA8BD,OAFAc,GAAU,EACJnM,EAAK8L,EAAKT,WAAWrL,GAAGnB,QAAQ,KAAM,MA7B3C4N,EAAA7P,KAAA,GA8BK,CACJmF,KAAM,MACNqJ,SAAS,EACT1U,MAAK,2BAAAwI,OAA6Bc,EAA7B,MACLhK,KAAM,OACNqV,WAAY,CAACqB,MAAO,QAAS1M,OAnC9B,QAuCH,OAvCGyM,EAAA7P,KAAA,GAuCGkP,EAvCH,QAAAM,GAAA,EAAAK,EAAA7P,KAAA,gBAAA6P,EAAA7P,KAAA,iBAAA6P,EAAAxB,KAAA,GAAAwB,EAAAT,GAAAS,EAAA,SAAAJ,GAAA,EAAAC,EAAAG,EAAAT,GAAA,QAAAS,EAAAxB,KAAA,GAAAwB,EAAAxB,KAAA,GAAAmB,GAAA,MAAAG,EAAAvP,QAAAuP,EAAAvP,SAAA,WAAAyP,EAAAxB,KAAA,IAAAoB,EAAA,CAAAI,EAAA7P,KAAA,eAAA0P,EAAA,eAAAG,EAAAR,OAAA,mBAAAQ,EAAAR,OAAA,6BAAAQ,EAAAf,SAAAiB,EAAA,iCA2CA,SAAUzC,EAAaH,GAAvB,IAAA6C,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAnB,EAAA,OAAAhB,EAAApL,EAAAqL,KAAA,SAAAmC,GAAA,cAAAA,EAAAjC,KAAAiC,EAAAtQ,MAAA,OAECgQ,EAAyB,GAF1BC,GAAA,EAAAC,GAAA,EAAAC,OAAAvQ,EAAA0Q,EAAAjC,KAAA,EAAA+B,EAIYjD,EAJZvT,OAAAmG,YAAA,UAAAkQ,GAAAI,EAAAD,EAAApQ,QAAAC,KAAA,CAAAqQ,EAAAtQ,KAAA,YAKe,SADXkP,EAJJmB,EAAAvW,OAKMqL,KALN,CAAAmL,EAAAtQ,KAAA,SAMD,OANCsQ,EAAAtQ,KAAA,GAMK,CACJmF,KAAM,MACN/L,KAAM8V,EAAK9V,KACXoV,QAASU,EAAKV,QACdC,WAAYS,EAAKT,WACjB3U,MAAOoV,EAAKpV,MACZkW,MAAOA,EAAMzO,MAAM,IAZpB,QAAA+O,EAAAtQ,KAAA,iBAeD,OAfCsQ,EAAAtQ,KAAA,GAeDzG,OAAAgX,EAAA,EAAAhX,CAAA,GAAU2V,EAAV,CAAgBc,MAAOA,EAAMzO,MAAM,KAflC,QAiBe,QAAd2N,EAAK/J,OACH+J,EAAKV,QACPwB,EAAM9J,KAAKgJ,GAEXc,EAAMrB,OArBP,QAAAsB,GAAA,EAAAK,EAAAtQ,KAAA,gBAAAsQ,EAAAtQ,KAAA,iBAAAsQ,EAAAjC,KAAA,GAAAiC,EAAAlB,GAAAkB,EAAA,SAAAJ,GAAA,EAAAC,EAAAG,EAAAlB,GAAA,QAAAkB,EAAAjC,KAAA,GAAAiC,EAAAjC,KAAA,GAAA4B,GAAA,MAAAG,EAAAhQ,QAAAgQ,EAAAhQ,SAAA,WAAAkQ,EAAAjC,KAAA,IAAA6B,EAAA,CAAAI,EAAAtQ,KAAA,eAAAmQ,EAAA,eAAAG,EAAAjB,OAAA,mBAAAiB,EAAAjB,OAAA,6BAAAiB,EAAAxB,SAAA0B,EAAA,iCAyBA,SAAUjD,EACbkD,GADG,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA/B,EAAA/J,EAAA/L,EAAAoV,EAAA1U,EAAA2U,EAAAuB,EAAAkB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAArD,EAAApL,EAAAqL,KAAA,SAAAqD,GAAA,cAAAA,EAAAnD,KAAAmD,EAAAxR,MAAA,OAED0Q,GAA0B,EAC1BC,GAAoB,EACpBC,GAAa,EAJZC,GAAA,EAAAC,GAAA,EAAAC,OAAAnR,EAAA4R,EAAAnD,KAAA,EAAA2C,EAMYP,EANZ7W,OAAAmG,YAAA,UAAA8Q,GAAAI,EAAAD,EAAAhR,QAAAC,KAAA,CAAAuR,EAAAxR,KAAA,YAMIkP,EANJ+B,EAAAnX,OAOC8W,EAPD,CAAAY,EAAAxR,KAAA,SAQD,OARCwR,EAAAxR,KAAA,GAQKkP,EARL,eAAAsC,EAAAC,OAAA,0BAYItM,EAAiD+J,EAAjD/J,KAAM/L,EAA2C8V,EAA3C9V,KAAMoV,EAAqCU,EAArCV,QAAS1U,EAA4BoV,EAA5BpV,MAAO2U,EAAqBS,EAArBT,WAAYuB,EAASd,EAATc,MAE1CU,GACQ,QAATvL,IACA,wBAAwBjE,KAAKuN,EAAWqB,OAhBzC,CAAA0B,EAAAxR,KAAA,SAkBD,OADA0Q,GAA0B,EAjBzBc,EAAAxR,KAAA,GAkBKkP,EAlBL,eAAAsC,EAAAC,OAAA,2BAsBCf,GACCC,GACQ,QAATxL,GACU,SAAT/L,GAA4B,MAATA,GACnBoV,EA1BF,CAAAgD,EAAAxR,KAAA,SA4BD,OADA2Q,GAAoB,EA3BnBa,EAAAxR,KAAA,GA4BKkP,EA5BL,eAAAsC,EAAAC,OAAA,4BAgCCd,GACCjD,EAAKsC,IACLtC,EAAKsC,GAAOvB,aACsB,UAAjCf,EAAKsC,GAAOvB,WAAWqB,OACU,QAAjCpC,EAAKsC,GAAOvB,WAAWqB,OAChB,SAAT3K,EArCD,CAAAqM,EAAAxR,KAAA,YAsCKkR,EAAQpX,EAAMwJ,MAAM,yCAtCzB,CAAAkO,EAAAxR,KAAA,SAyCC,OAzCDwR,EAAAxR,KAAA,GAyCOkP,EAzCP,eAAAsC,EAAAC,OAAA,0BAAAN,EAAA5X,OAAAwH,EAAA,EAAAxH,CA6CiE2X,EA7CjE,GA6CQE,EA7CRD,EAAA,GA6C2BE,EA7C3BF,EAAA,GA6C4CG,EA7C5CH,EAAA,GA6CyDI,EA7CzDJ,EAAA,IA+CGC,EA/CH,CAAAI,EAAAxR,KAAA,SAgDC,OAhDDwR,EAAAxR,KAAA,GAgDO,CAACmF,KAAM,OAAQrL,MAAOsX,GAhD7B,QAkDD,OAlDCI,EAAAxR,KAAA,GAkDK,CACJmF,KAAM,MACNqJ,SAAS,EACT1U,MAAK,8BACLV,KAAM,OACNqV,WAAY,CAACqB,MAAO,iBAvDrB,YA0DGuB,EA1DH,CAAAG,EAAAxR,KAAA,SA2DC,OA3DDwR,EAAAxR,KAAA,GA2DO,CAACmF,KAAM,OAAQrL,MAAOuX,GA3D7B,QAAAG,EAAAxR,KAAA,iBA6DC,OA7DDwR,EAAAxR,KAAA,GA6DO,CAACmF,KAAM,OAAQrL,MAAOwX,GA7D7B,QA+DD,OA/DCE,EAAAxR,KAAA,GA+DK,CACJmF,KAAM,MACNqJ,SAAS,EACT1U,MAAO,UACPV,KAAM,OACNqV,WAAY,IApEb,YAuEG8C,EAvEH,CAAAC,EAAAxR,KAAA,aAwEKqR,EAxEL,CAAAG,EAAAxR,KAAA,SAyEG,OAzEHwR,EAAAxR,KAAA,GAyES,CAACmF,KAAM,OAAQrL,MAAOwX,EAAcC,GAzE7C,QAAAC,EAAAxR,KAAA,iBA2EG,OA3EHwR,EAAAxR,KAAA,GA2ES,CAACmF,KAAM,OAAQrL,MAAOyX,GA3E/B,eA6EDX,GAAa,EA7EZY,EAAAC,OAAA,uBAiFH,OAjFGD,EAAAxR,KAAA,GAiFGkP,EAjFH,QAAA2B,GAAA,EAAAW,EAAAxR,KAAA,gBAAAwR,EAAAxR,KAAA,iBAAAwR,EAAAnD,KAAA,GAAAmD,EAAApC,GAAAoC,EAAA,SAAAV,GAAA,EAAAC,EAAAS,EAAApC,GAAA,QAAAoC,EAAAnD,KAAA,GAAAmD,EAAAnD,KAAA,GAAAwC,GAAA,MAAAG,EAAA5Q,QAAA4Q,EAAA5Q,SAAA,WAAAoR,EAAAnD,KAAA,IAAAyC,EAAA,CAAAU,EAAAxR,KAAA,eAAA+Q,EAAA,eAAAS,EAAAnC,OAAA,mBAAAmC,EAAAnC,OAAA,6BAAAmC,EAAA1C,SAAA4C,EAAA,iCAqFA,SAAUlE,EAAsBL,GAAhC,IAAAwE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA9C,EAAA,OAAAhB,EAAApL,EAAAqL,KAAA,SAAA8D,GAAA,cAAAA,EAAA5D,KAAA4D,EAAAjS,MAAA,OAEC2R,EAAS,CAAC,MAFXC,GAAA,EAAAC,GAAA,EAAAC,OAAAlS,EAAAqS,EAAA5D,KAAA,EAAA0D,EAIY5E,EAJZvT,OAAAmG,YAAA,UAAA6R,GAAAI,EAAAD,EAAA/R,QAAAC,KAAA,CAAAgS,EAAAjS,KAAA,YAIIkP,EAJJ8C,EAAAlY,MAKmB,IAAlB6X,EAAO9N,OALR,CAAAoO,EAAAjS,KAAA,SAMD,OANCiS,EAAAjS,KAAA,GAMKzG,OAAOmV,OAAO,CAACnO,OAAQoR,EAAO,GAAIlR,MAAOkR,EAAO,IAAKA,EAAO,IANjE,QAQHA,EAAOzL,KAAKgJ,GAERyC,EAAO9N,OAAS,GAClB8N,EAAOO,QAXN,QAAAN,GAAA,EAAAK,EAAAjS,KAAA,gBAAAiS,EAAAjS,KAAA,iBAAAiS,EAAA5D,KAAA,GAAA4D,EAAA7C,GAAA6C,EAAA,SAAAJ,GAAA,EAAAC,EAAAG,EAAA7C,GAAA,QAAA6C,EAAA5D,KAAA,GAAA4D,EAAA5D,KAAA,GAAAuD,GAAA,MAAAG,EAAA3R,QAAA2R,EAAA3R,SAAA,WAAA6R,EAAA5D,KAAA,IAAAwD,EAAA,CAAAI,EAAAjS,KAAA,eAAA8R,EAAA,eAAAG,EAAA5C,OAAA,mBAAA4C,EAAA5C,OAAA,YAcL,OAdK4C,EAAAjS,KAAA,GAcCzG,OAAOmV,OAAO,CAACnO,OAAQoR,EAAO,GAAIlR,MAAOkR,EAAO,IAAKA,EAAO,IAd7D,QAeL,OAfKM,EAAAjS,KAAA,GAeCzG,OAAOmV,OAAO,CAACnO,OAAQoR,EAAO,GAAIlR,MAAO,MAAOkR,EAAO,IAfxD,yBAAAM,EAAAnD,SAAAqD,EAAA,iCAkBA,SAAU1E,EACb2E,GADG,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAxD,EAAAyD,EAAA,OAAAzE,EAAApL,EAAAqL,KAAA,SAAAyE,GAAA,cAAAA,EAAAvE,KAAAuE,EAAA5S,MAAA,OAGDqS,GAAQ,EAHPC,GAAA,EAAAC,GAAA,EAAAC,OAAA5S,EAAAgT,EAAAvE,KAAA,EAAAoE,EAKYL,EALZxY,OAAAmG,YAAA,UAAAuS,GAAAI,EAAAD,EAAAzS,QAAAC,KAAA,CAAA2S,EAAA5S,KAAA,YAMe,UADXkP,EALJwD,EAAA5Y,OAMMqL,MACiC,MAAtC+J,EAAKpV,MAAMoV,EAAKpV,MAAM+J,OAAS,KAC/BqL,EAAKzO,MAAMgO,YACqB,cAAhCS,EAAKzO,MAAMgO,WAAWqB,MATvB,CAAA8C,EAAA5S,KAAA,SAUD,OAVC4S,EAAA5S,KAAA,GAUK,CACJmF,KAAM,OACNrL,MAAOoV,EAAKpV,MAAMyU,UAAU,EAAGW,EAAKpV,MAAM+J,OAAS,IAZpD,QAAA+O,EAAA5S,KAAA,oBAcsB,QAAdkP,EAAK/J,MACqB,cAA1B+J,EAAKT,WAAWqB,MAfxB,CAAA8C,EAAA5S,KAAA,SAiBDqS,GAAQ,EAjBPO,EAAA5S,KAAA,qBAkBQqS,EAlBR,CAAAO,EAAA5S,KAAA,SAmBiB,QAAdkP,EAAK/J,MAAmB+J,EAAKV,UAC/B6D,GAAQ,GApBTO,EAAA5S,KAAA,oBAqBsB,SAAdkP,EAAK/J,MACa,MAAlB+J,EAAKpV,MAAM,KACX4T,EAAKwB,EAAK3O,OAAOyP,OAAOvB,YACqB,cAA7Cf,EAAKwB,EAAK3O,OAAOyP,OAAOvB,WAAWqB,MAxB3C,CAAA8C,EAAA5S,KAAA,cAyBKlG,EAAQoV,EAAKpV,MAAMyU,UAAU,IAzBlC,CAAAqE,EAAA5S,KAAA,SA2BC,OA3BD4S,EAAA5S,KAAA,GA2BO,CAACmF,KAAM,OAAQrL,SA3BtB,QAAA8Y,EAAA5S,KAAA,iBA6BD,OA7BC4S,EAAA5S,KAAA,GA6BKkP,EA7BL,QAAAoD,GAAA,EAAAM,EAAA5S,KAAA,gBAAA4S,EAAA5S,KAAA,iBAAA4S,EAAAvE,KAAA,GAAAuE,EAAAxD,GAAAwD,EAAA,SAAAL,GAAA,EAAAC,EAAAI,EAAAxD,GAAA,QAAAwD,EAAAvE,KAAA,GAAAuE,EAAAvE,KAAA,GAAAiE,GAAA,MAAAG,EAAArS,QAAAqS,EAAArS,SAAA,WAAAwS,EAAAvE,KAAA,IAAAkE,EAAA,CAAAK,EAAA5S,KAAA,eAAAwS,EAAA,eAAAI,EAAAvD,OAAA,mBAAAuD,EAAAvD,OAAA,6BAAAuD,EAAA9D,SAAA+D,EAAA,iCAkCQrP,EAAA,WAAC0B,GAAD,OAA0BO,MAAMqN,KAC3CrF,EACED,EACED,EACED,EACED,EACED,EAAU,SACRA,EAAU,SACRD,EAAYjI,WAC3B6N,IAAI,SAAAla,GAAC,OAAIA,EAAEiB,QACXkZ,KAAK,4BCvUR,IAAAC,EAAA,SAAAta,GACA,aAEA,IAEAiH,EAFAsT,EAAA3Z,OAAAkB,UACA0Y,EAAAD,EAAAxY,eAGA0Y,EAAA,oBAAAxZ,cAAA,GACAyZ,EAAAD,EAAArT,UAAA,aACAuT,EAAAF,EAAAG,eAAA,kBACAC,EAAAJ,EAAAvZ,aAAA,gBAEA,SAAAsU,EAAAsF,EAAAC,EAAA5M,EAAA6M,GAEA,IAAAC,EAAAF,KAAAjZ,qBAAAoZ,EAAAH,EAAAG,EACAC,EAAAva,OAAAY,OAAAyZ,EAAAnZ,WACAmT,EAAA,IAAAmG,EAAAJ,GAAA,IAIA,OADAG,EAAAE,QA8LA,SAAAP,EAAA3M,EAAA8G,GACA,IAAAtD,EAAA2J,EACA,gBAAAC,EAAAC,GACA,GAAA7J,IAAA8J,EACA,UAAA/T,MAAA,gCAGA,GAAAiK,IAAA+J,EAAA,CACA,aAAAH,EACA,MAAAC,EAKA,OAAAG,IAMA,IAHA1G,EAAAsG,SACAtG,EAAAuG,QAEA,CACA,IAAAI,EAAA3G,EAAA2G,SAEA,GAAAA,EAAA,CACA,IAAAC,EAAAC,EAAAF,EAAA3G,GAEA,GAAA4G,EAAA,CACA,GAAAA,IAAAE,EAAA,SACA,OAAAF,GAIA,YAAA5G,EAAAsG,OAGAtG,EAAA+G,KAAA/G,EAAAgH,MAAAhH,EAAAuG,SACS,aAAAvG,EAAAsG,OAAA,CACT,GAAA5J,IAAA2J,EAEA,MADA3J,EAAA+J,EACAzG,EAAAuG,IAGAvG,EAAAiH,kBAAAjH,EAAAuG,SACS,WAAAvG,EAAAsG,QACTtG,EAAA6D,OAAA,SAAA7D,EAAAuG,KAGA7J,EAAA8J,EACA,IAAAU,EAAAC,EAAAtB,EAAA3M,EAAA8G,GAEA,cAAAkH,EAAA3P,KAAA,CAKA,GAFAmF,EAAAsD,EAAA3N,KAAAoU,EAAAW,EAEAF,EAAAX,MAAAO,EACA,SAGA,OACA5a,MAAAgb,EAAAX,IACAlU,KAAA2N,EAAA3N,MAES,UAAA6U,EAAA3P,OACTmF,EAAA+J,EAGAzG,EAAAsG,OAAA,QACAtG,EAAAuG,IAAAW,EAAAX,OAlQAc,CAAAxB,EAAA3M,EAAA8G,GACAkG,EAcA,SAAAiB,EAAAG,EAAAxO,EAAAyN,GACA,IACA,OACAhP,KAAA,SACAgP,IAAAe,EAAAlc,KAAA0N,EAAAyN,IAEK,MAAAhU,GACL,OACAgF,KAAA,QACAgP,IAAAhU,IApBAxH,EAAAwV,OAyBA,IAAA8F,EAAA,iBACAe,EAAA,iBACAZ,EAAA,YACAC,EAAA,YAGAK,EAAA,GAKA,SAAAb,KAEA,SAAAsB,KAEA,SAAAC,KAIA,IAAAC,EAAA,GAEAA,EAAAhC,GAAA,WACA,OAAArI,MAGA,IAAAsK,EAAA/b,OAAAgN,eACAgP,EAAAD,OAAAE,EAAA,MAEAD,OAAArC,GAAAC,EAAAna,KAAAuc,EAAAlC,KAGAgC,EAAAE,GAGA,IAAAE,EAAAL,EAAA3a,UAAAoZ,EAAApZ,UAAAlB,OAAAY,OAAAkb,GAMA,SAAAK,EAAAjb,GACA,0BAAA2J,QAAA,SAAA8P,GACAzZ,EAAAyZ,GAAA,SAAAC,GACA,OAAAnJ,KAAAgJ,QAAAE,EAAAC,MAqCA,SAAAwB,EAAA7B,GAgCA,IAAA8B,EA4BA5K,KAAAgJ,QA1BA,SAAAE,EAAAC,GACA,SAAA0B,IACA,WAAAxK,QAAA,SAAAC,EAAAC,IAnCA,SAAAuK,EAAA5B,EAAAC,EAAA7I,EAAAC,GACA,IAAAuJ,EAAAC,EAAAjB,EAAAI,GAAAJ,EAAAK,GAEA,aAAAW,EAAA3P,KAEO,CACP,IAAA4G,EAAA+I,EAAAX,IACAra,EAAAiS,EAAAjS,MAEA,OAAAA,GAAA,kBAAAA,GAAAqZ,EAAAna,KAAAc,EAAA,WACAuR,QAAAC,QAAAxR,EAAAic,SAAAjN,KAAA,SAAAhP,GACAgc,EAAA,OAAAhc,EAAAwR,EAAAC,IACW,SAAApL,GACX2V,EAAA,QAAA3V,EAAAmL,EAAAC,KAIAF,QAAAC,QAAAxR,GAAAgP,KAAA,SAAAkN,GAIAjK,EAAAjS,MAAAkc,EACA1K,EAAAS,IACS,SAAAH,GAGT,OAAAkK,EAAA,QAAAlK,EAAAN,EAAAC,KAtBAA,EAAAuJ,EAAAX,KAgCA2B,CAAA5B,EAAAC,EAAA7I,EAAAC,KAIA,OAAAqK,EAYAA,IAAA9M,KAAA+M,EAEAA,QAwGA,SAAApB,EAAAF,EAAA3G,GACA,IAAAsG,EAAAK,EAAAxU,SAAA6N,EAAAsG,QAEA,GAAAA,IAAAtU,EAAA,CAKA,GAFAgO,EAAA2G,SAAA,KAEA,UAAA3G,EAAAsG,OAAA,CAEA,GAAAK,EAAAxU,SAAA,SAGA6N,EAAAsG,OAAA,SACAtG,EAAAuG,IAAAvU,EACA6U,EAAAF,EAAA3G,GAEA,UAAAA,EAAAsG,QAGA,OAAAQ,EAIA9G,EAAAsG,OAAA,QACAtG,EAAAuG,IAAA,IAAA3P,UAAA,kDAGA,OAAAkQ,EAGA,IAAAI,EAAAC,EAAAb,EAAAK,EAAAxU,SAAA6N,EAAAuG,KAEA,aAAAW,EAAA3P,KAIA,OAHAyI,EAAAsG,OAAA,QACAtG,EAAAuG,IAAAW,EAAAX,IACAvG,EAAA2G,SAAA,KACAG,EAGA,IAAAuB,EAAAnB,EAAAX,IAEA,OAAA8B,EAOAA,EAAAhW,MAGA2N,EAAA2G,EAAA2B,YAAAD,EAAAnc,MAEA8T,EAAA5N,KAAAuU,EAAA4B,QAOA,WAAAvI,EAAAsG,SACAtG,EAAAsG,OAAA,OACAtG,EAAAuG,IAAAvU,GASAgO,EAAA2G,SAAA,KACAG,GANAuB,GAxBArI,EAAAsG,OAAA,QACAtG,EAAAuG,IAAA,IAAA3P,UAAA,oCACAoJ,EAAA2G,SAAA,KACAG,GA+CA,SAAA0B,EAAAC,GACA,IAAAC,EAAA,CACAC,OAAAF,EAAA,IAGA,KAAAA,IACAC,EAAAE,SAAAH,EAAA,IAGA,KAAAA,IACAC,EAAAG,WAAAJ,EAAA,GACAC,EAAAI,SAAAL,EAAA,IAGArL,KAAA2L,WAAAzQ,KAAAoQ,GAGA,SAAAM,EAAAN,GACA,IAAAxB,EAAAwB,EAAAO,YAAA,GACA/B,EAAA3P,KAAA,gBACA2P,EAAAX,IACAmC,EAAAO,WAAA/B,EAGA,SAAAf,EAAAJ,GAIA3I,KAAA2L,WAAA,EACAJ,OAAA,SAEA5C,EAAAvP,QAAAgS,EAAApL,MACAA,KAAA8L,OAAA,GAgCA,SAAAtB,EAAAuB,GACA,GAAAA,EAAA,CACA,IAAAC,EAAAD,EAAA1D,GAEA,GAAA2D,EACA,OAAAA,EAAAhe,KAAA+d,GAGA,uBAAAA,EAAA/W,KACA,OAAA+W,EAGA,IAAA1U,MAAA0U,EAAAlT,QAAA,CACA,IAAAhL,GAAA,EACAmH,EAAA,SAAAA,IACA,OAAAnH,EAAAke,EAAAlT,QACA,GAAAsP,EAAAna,KAAA+d,EAAAle,GAGA,OAFAmH,EAAAlG,MAAAid,EAAAle,GACAmH,EAAAC,MAAA,EACAD,EAMA,OAFAA,EAAAlG,MAAA8F,EACAI,EAAAC,MAAA,EACAD,GAGA,OAAAA,UAKA,OACAA,KAAAsU,GAMA,SAAAA,IACA,OACAxa,MAAA8F,EACAK,MAAA,GA+LA,OAnlBAkV,EAAA1a,UAAAgb,EAAA9O,YAAAyO,EACAA,EAAAzO,YAAAwO,EACAC,EAAA5B,GAAA2B,EAAA8B,YAAA,oBAWAte,EAAAue,oBAAA,SAAAC,GACA,IAAAC,EAAA,oBAAAD,KAAAxQ,YACA,QAAAyQ,QAAAjC,GAEA,uBAAAiC,EAAAH,aAAAG,EAAAhe,QAGAT,EAAA0e,KAAA,SAAAF,GAYA,OAXA5d,OAAA+M,eACA/M,OAAA+M,eAAA6Q,EAAA/B,IAEA+B,EAAA3Q,UAAA4O,EAEA5B,KAAA2D,IACAA,EAAA3D,GAAA,sBAIA2D,EAAA1c,UAAAlB,OAAAY,OAAAsb,GACA0B,GAOAxe,EAAA2e,MAAA,SAAAnD,GACA,OACA4B,QAAA5B,IAmEAuB,EAAAC,EAAAlb,WAEAkb,EAAAlb,UAAA6Y,GAAA,WACA,OAAAtI,MAGArS,EAAAgd,gBAIAhd,EAAA4e,MAAA,SAAA9D,EAAAC,EAAA5M,EAAA6M,GACA,IAAA6D,EAAA,IAAA7B,EAAAxH,EAAAsF,EAAAC,EAAA5M,EAAA6M,IACA,OAAAhb,EAAAue,oBAAAxD,GAAA8D,EACAA,EAAAxX,OAAA8I,KAAA,SAAAiD,GACA,OAAAA,EAAA9L,KAAA8L,EAAAjS,MAAA0d,EAAAxX,UAgKA0V,EAAAD,GACAA,EAAAjC,GAAA,YAMAiC,EAAApC,GAAA,WACA,OAAArI,MAGAyK,EAAAnM,SAAA,WACA,4BAsCA3Q,EAAAqL,KAAA,SAAAzJ,GACA,IAAAyJ,EAAA,GAEA,QAAA5J,KAAAG,EACAyJ,EAAAkC,KAAA9L,GAMA,OAHA4J,EAAAyT,UAGA,SAAAzX,IACA,KAAAgE,EAAAH,QAAA,CACA,IAAAzJ,EAAA4J,EAAA2K,MAEA,GAAAvU,KAAAG,EAGA,OAFAyF,EAAAlG,MAAAM,EACA4F,EAAAC,MAAA,EACAD,EAQA,OADAA,EAAAC,MAAA,EACAD,IA0CArH,EAAA6c,SASAzB,EAAAtZ,UAAA,CACAkM,YAAAoN,EACA+C,MAAA,SAAAY,GAYA,GAXA1M,KAAAqD,KAAA,EACArD,KAAAhL,KAAA,EAGAgL,KAAA2J,KAAA3J,KAAA4J,MAAAhV,EACAoL,KAAA/K,MAAA,EACA+K,KAAAuJ,SAAA,KACAvJ,KAAAkJ,OAAA,OACAlJ,KAAAmJ,IAAAvU,EACAoL,KAAA2L,WAAAvS,QAAAwS,IAEAc,EACA,QAAAte,KAAA4R,KAEA,MAAA5R,EAAAue,OAAA,IAAAxE,EAAAna,KAAAgS,KAAA5R,KAAAiJ,OAAAjJ,EAAAmI,MAAA,MACAyJ,KAAA5R,GAAAwG,IAKAkP,KAAA,WACA9D,KAAA/K,MAAA,EACA,IACA2X,EADA5M,KAAA2L,WAAA,GACAE,WAEA,aAAAe,EAAAzS,KACA,MAAAyS,EAAAzD,IAGA,OAAAnJ,KAAA6M,MAEAhD,kBAAA,SAAAiD,GACA,GAAA9M,KAAA/K,KACA,MAAA6X,EAGA,IAAAlK,EAAA5C,KAEA,SAAA+M,EAAAC,EAAAC,GAYA,OAXAnD,EAAA3P,KAAA,QACA2P,EAAAX,IAAA2D,EACAlK,EAAA5N,KAAAgY,EAEAC,IAGArK,EAAAsG,OAAA,OACAtG,EAAAuG,IAAAvU,KAGAqY,EAGA,QAAApf,EAAAmS,KAAA2L,WAAA9S,OAAA,EAA8ChL,GAAA,IAAQA,EAAA,CACtD,IAAAyd,EAAAtL,KAAA2L,WAAA9d,GACAic,EAAAwB,EAAAO,WAEA,YAAAP,EAAAC,OAIA,OAAAwB,EAAA,OAGA,GAAAzB,EAAAC,QAAAvL,KAAAqD,KAAA,CACA,IAAA6J,EAAA/E,EAAAna,KAAAsd,EAAA,YACA6B,EAAAhF,EAAAna,KAAAsd,EAAA,cAEA,GAAA4B,GAAAC,EAAA,CACA,GAAAnN,KAAAqD,KAAAiI,EAAAE,SACA,OAAAuB,EAAAzB,EAAAE,UAAA,GACa,GAAAxL,KAAAqD,KAAAiI,EAAAG,WACb,OAAAsB,EAAAzB,EAAAG,iBAEW,GAAAyB,GACX,GAAAlN,KAAAqD,KAAAiI,EAAAE,SACA,OAAAuB,EAAAzB,EAAAE,UAAA,OAEW,KAAA2B,EAKX,UAAA9X,MAAA,0CAJA,GAAA2K,KAAAqD,KAAAiI,EAAAG,WACA,OAAAsB,EAAAzB,EAAAG,gBAQAhF,OAAA,SAAAtM,EAAAgP,GACA,QAAAtb,EAAAmS,KAAA2L,WAAA9S,OAAA,EAA8ChL,GAAA,IAAQA,EAAA,CACtD,IAAAyd,EAAAtL,KAAA2L,WAAA9d,GAEA,GAAAyd,EAAAC,QAAAvL,KAAAqD,MAAA8E,EAAAna,KAAAsd,EAAA,eAAAtL,KAAAqD,KAAAiI,EAAAG,WAAA,CACA,IAAA2B,EAAA9B,EACA,OAIA8B,IAAA,UAAAjT,GAAA,aAAAA,IAAAiT,EAAA7B,QAAApC,MAAAiE,EAAA3B,aAGA2B,EAAA,MAGA,IAAAtD,EAAAsD,IAAAvB,WAAA,GAIA,OAHA/B,EAAA3P,OACA2P,EAAAX,MAEAiE,GACApN,KAAAkJ,OAAA,OACAlJ,KAAAhL,KAAAoY,EAAA3B,WACA/B,GAGA1J,KAAAqN,SAAAvD,IAEAuD,SAAA,SAAAvD,EAAA4B,GACA,aAAA5B,EAAA3P,KACA,MAAA2P,EAAAX,IAaA,MAVA,UAAAW,EAAA3P,MAAA,aAAA2P,EAAA3P,KACA6F,KAAAhL,KAAA8U,EAAAX,IACO,WAAAW,EAAA3P,MACP6F,KAAA6M,KAAA7M,KAAAmJ,IAAAW,EAAAX,IACAnJ,KAAAkJ,OAAA,SACAlJ,KAAAhL,KAAA,OACO,WAAA8U,EAAA3P,MAAAuR,IACP1L,KAAAhL,KAAA0W,GAGAhC,GAEArF,OAAA,SAAAoH,GACA,QAAA5d,EAAAmS,KAAA2L,WAAA9S,OAAA,EAA8ChL,GAAA,IAAQA,EAAA,CACtD,IAAAyd,EAAAtL,KAAA2L,WAAA9d,GAEA,GAAAyd,EAAAG,eAGA,OAFAzL,KAAAqN,SAAA/B,EAAAO,WAAAP,EAAAI,UACAE,EAAAN,GACA5B,IAIA4D,MAAA,SAAA/B,GACA,QAAA1d,EAAAmS,KAAA2L,WAAA9S,OAAA,EAA8ChL,GAAA,IAAQA,EAAA,CACtD,IAAAyd,EAAAtL,KAAA2L,WAAA9d,GAEA,GAAAyd,EAAAC,WAAA,CACA,IAAAzB,EAAAwB,EAAAO,WAEA,aAAA/B,EAAA3P,KAAA,CACA,IAAAoT,EAAAzD,EAAAX,IACAyC,EAAAN,GAGA,OAAAiC,GAMA,UAAAlY,MAAA,0BAEAmY,cAAA,SAAAzB,EAAAb,EAAAC,GAaA,OAZAnL,KAAAuJ,SAAA,CACAxU,SAAAyV,EAAAuB,GACAb,aACAC,WAGA,SAAAnL,KAAAkJ,SAGAlJ,KAAAmJ,IAAAvU,GAGA8U,IAOA/b,EAtqBA,CA2qB0BC,EAAAD,SAE1B,IACA8f,mBAAAxF,EACC,MAAAyF,GAUDC,SAAA,6BAAAA,CAAA1F,yEC3rBI2F,ECAAA,sDDEEC,EAAa,WAEbC,EAAc,CAClB1f,KAAM,YACNsS,QAAS,EACTI,OAAQ,CAAC+M,IAGEE,EAAb,SAAAC,GACE,SAAAD,IAAe,OAAAxf,OAAA0f,EAAA,EAAA1f,CAAAyR,KAAA+N,GAAAxf,OAAA2f,EAAA,EAAA3f,CAAAyR,KAAAzR,OAAAgN,EAAA,EAAAhN,CAAAwf,GAAA/f,KAAAgS,KACP8N,EAAaD,IAFvB,OAAAtf,OAAA4f,EAAA,EAAA5f,CAAAwf,EAAAC,GAAAD,EAAA,CAAmClO,KAMpBuO,EAAA,WAIb,OAHiB,MAAbR,IACFA,EAAY,IAAIG,GAEXH,GClBHC,EAAa,WAEbC,EAAc,CAClB1f,KAAM,YACNsS,QAAS,EACTI,OAAQ,CAAC+M,IAGEQ,EAAb,SAAAL,GACE,SAAAK,IAAe,OAAA9f,OAAA0f,EAAA,EAAA1f,CAAAyR,KAAAqO,GAAA9f,OAAA2f,EAAA,EAAA3f,CAAAyR,KAAAzR,OAAAgN,EAAA,EAAAhN,CAAA8f,GAAArgB,KAAAgS,KACP8N,EAAaD,IAFvB,OAAAtf,OAAA4f,EAAA,EAAA5f,CAAA8f,EAAAL,GAAAK,EAAA,CAAmCxO,KAMpByO,EAAA,WAIb,OAHiB,MAAbV,IACFA,EAAY,IAAIS,GAEXT,kCCEHW,EAAa,SAAC5Q,EAAKtJ,EAAWG,GAAjB,OACjB6J,YAAG,WAAA/G,OAAYqG,EAAIW,WAAhB,oBAAAhH,OAA6CkX,KAAKC,UAAUpa,GAA5D,QAAAiD,OAA6E9C,GAC5E,kCA8BAka,EAAmB,SAACxU,GAAD,OACvB,IAAIyU,SAASzU,EAAM,CACjB+D,OAAQ,IACRE,QAAQ5P,OAAAC,EAAA,EAAAD,CAAA,GAAGuO,KAA6B,MAG5ChB,KAAK8S,iBAAiB,QAAS,SAAA5M,GAC7B,IAAMpD,EAAmBoD,EAAMpD,QACzBjB,EAAM,IAAIF,IAAImB,EAAQjB,KACtBkR,EAAQ7R,IAAS8R,WAAanR,EAAImR,SAExC,GA9CsB,SAACnR,GAAD,OACtBX,IAAS8R,WAAanR,EAAImR,UAAY,SAAS5Y,KAAKyH,EAAIhH,UA6CnDoY,CAAgBpR,GAArB,CAGA,IAAMO,EAA0B2Q,EA/BhB,SAAClR,GACjB,IAAMqR,EAAgBrR,EAAImB,aAAapQ,IAAI,KAC3C,OAAOugB,IAAWvgB,IAAI0F,YAAasB,YAAsBsZ,KA6BlBE,CAAUvR,GA1CjC,SAACA,GACjB,OAAOwR,IAAWzgB,IAAI0F,YAAasC,YAAmBiH,EAAIhH,YAyCFyY,CAAUzR,GAElEqE,EAAMqN,YAAYnR,EACfJ,KAAK,SAAA5D,GAAQ,IAAAoV,EACZ,GAAIT,EAAO,CACT,IAAMU,EAAyB,CAACrQ,SAAU,CAAChF,IAC3CA,EAAOsU,KAAKC,UAAUc,GAIxB,OAFAlR,YAAG,WAAA/G,OAAYqG,EAAIhH,UAAhBW,OAA2BqG,EAAI6R,OAA/B,YACC,oCACG,IAAIb,SAASzU,EAAM,CACxB+D,OAAQ,IACRE,SAAOmR,EAAA,GAAA/gB,OAAAC,EAAA,EAAAD,CAAA+gB,EAAIzS,KAAiB,GAArBtO,OAAAC,EAAA,EAAAD,CAAA+gB,EAA4BxS,KAA6B,GAAzDwS,OAGVhC,MAAM,SAAA1M,GAmBL,OAlBmCiO,EACjC3R,YAAUS,GACPG,KAAK,SAAAC,GAAQ,OAAIA,EAASkB,SAC1BnB,KAAK,SAAAyR,GAAU,OAAIA,EAAWrQ,SAAS,KACvCpB,KAAKqB,KACLrB,KAAK,SAAA5D,GACJ,IAAMqV,EAAyB,CAACrQ,SAAU,CAAChF,IAE3C,OAlDI,SAACyD,EAAUzD,GACzB,IAAMuV,EAAU9R,EAAImB,aAAapQ,IAAI,KAC/B2F,EAAYqB,YAAsB+Z,GAClCjb,EAAQJ,YAAaC,GAEvB+C,OAAOC,MAAM7C,KAGjB+Z,EAAW5Q,EAAKtJ,EAAWG,GAC3Bya,IAAWlQ,IAAIvK,EAAO0F,IAwCZwV,CAAQ/R,EAAKzD,GACNwU,EAAiBF,KAAKC,UAAUc,MAG3CtS,YAAaU,GACVG,KAAK,SAAAC,GAAQ,OAAIA,EAAS7D,SAC1B4D,KAAK,SAAA5D,GAEJ,OArEI,SAACyD,EAAUzD,GACzB,IAAM7F,EAAYqC,YAAmBiH,EAAIhH,UACnCnC,EAAQJ,YAAaC,GAC3Bka,EAAW5Q,EAAKtJ,EAAWG,GAC3B2a,IAAWpQ,IAAIvK,EAAO0F,GAgEZyV,CAAQhS,EAAKzD,GACNwU,EAAiBxU","file":"static/js/service-worker.b299b1df.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 53);\n","// @flow\n\nexport const chapterCounts = {\n  Genesis: 50,\n  Exodus: 40,\n  Leviticus: 27,\n  Numbers: 36,\n  Deuteronomy: 34,\n  Joshua: 24,\n  Judges: 21,\n  Ruth: 4,\n  '1 Samuel': 31,\n  '2 Samuel': 24,\n  '1 Kings': 22,\n  '2 Kings': 25,\n  '1 Chronicles': 29,\n  '2 Chronicles': 36,\n  Ezra: 10,\n  Nehemiah: 13,\n  Esther: 10,\n  Job: 42,\n  Psalm: 150,\n  Proverbs: 31,\n  Ecclesiastes: 12,\n  'Song of Solomon': 8,\n  Isaiah: 66,\n  Jeremiah: 52,\n  Lamentations: 5,\n  Ezekiel: 48,\n  Daniel: 12,\n  Hosea: 14,\n  Joel: 3,\n  Amos: 9,\n  Obadiah: 1,\n  Jonah: 4,\n  Micah: 7,\n  Nahum: 3,\n  Habakkuk: 3,\n  Zephaniah: 3,\n  Haggai: 2,\n  Zechariah: 14,\n  Malachi: 4,\n  Matthew: 28,\n  Mark: 16,\n  Luke: 24,\n  John: 21,\n  Acts: 28,\n  Romans: 16,\n  '1 Corinthians': 16,\n  '2 Corinthians': 13,\n  Galatians: 6,\n  Ephesians: 6,\n  Philippians: 4,\n  Colossians: 4,\n  '1 Thessalonians': 5,\n  '2 Thessalonians': 3,\n  '1 Timothy': 6,\n  '2 Timothy': 4,\n  Titus: 3,\n  Philemon: 1,\n  Hebrews: 13,\n  James: 5,\n  '1 Peter': 5,\n  '2 Peter': 3,\n  '1 John': 5,\n  '2 John': 1,\n  '3 John': 1,\n  Jude: 1,\n  Revelation: 22,\n};\n\nconst chaptersBefore = {\n  Genesis: 0,\n  Exodus: 50,\n  Leviticus: 90,\n  Numbers: 117,\n  Deuteronomy: 153,\n  Joshua: 187,\n  Judges: 211,\n  Ruth: 232,\n  '1 Samuel': 236,\n  '2 Samuel': 267,\n  '1 Kings': 291,\n  '2 Kings': 313,\n  '1 Chronicles': 338,\n  '2 Chronicles': 367,\n  Ezra: 403,\n  Nehemiah: 413,\n  Esther: 426,\n  Job: 436,\n  Psalm: 478,\n  Proverbs: 628,\n  Ecclesiastes: 659,\n  'Song of Solomon': 671,\n  Isaiah: 679,\n  Jeremiah: 745,\n  Lamentations: 797,\n  Ezekiel: 802,\n  Daniel: 850,\n  Hosea: 862,\n  Joel: 876,\n  Amos: 879,\n  Obadiah: 888,\n  Jonah: 889,\n  Micah: 893,\n  Nahum: 900,\n  Habakkuk: 903,\n  Zephaniah: 906,\n  Haggai: 909,\n  Zechariah: 911,\n  Malachi: 925,\n  Matthew: 929,\n  Mark: 957,\n  Luke: 973,\n  John: 997,\n  Acts: 1018,\n  Romans: 1046,\n  '1 Corinthians': 1062,\n  '2 Corinthians': 1078,\n  Galatians: 1091,\n  Ephesians: 1097,\n  Philippians: 1103,\n  Colossians: 1107,\n  '1 Thessalonians': 1111,\n  '2 Thessalonians': 1116,\n  '1 Timothy': 1119,\n  '2 Timothy': 1125,\n  Titus: 1129,\n  Philemon: 1132,\n  Hebrews: 1133,\n  James: 1146,\n  '1 Peter': 1151,\n  '2 Peter': 1156,\n  '1 John': 1159,\n  '2 John': 1164,\n  '3 John': 1165,\n  Jude: 1166,\n  Revelation: 1167\n};\n\nexport const CHAPTER_COUNT = 1189;\n\ntype Book = $Keys<typeof chapterCounts>;\n\nexport const books: Array<Book> = Object.getOwnPropertyNames(chaptersBefore);\n\nexport type Reference = {|\n  +book: Book,\n  +chapter: number,\n  +verse: number\n|};\n\nexport type Chapter = {|\n  +reference: Reference,\n  +text: string\n|};\n\nexport const chapterIndex = (reference: Reference): number => {\n  return chaptersBefore[reference.book] + reference.chapter - 1;\n}\n\nexport const reference = (index: number): Reference => {\n  let book;\n\n  for (let current of books)\n    if (chaptersBefore[current] <= index)\n      book = current\n    else\n      break;\n\n  if (book == null)\n    throw new Error('reference index is out of range');\n\n  return {book, chapter: index - chaptersBefore[book] + 1, verse: 1};\n}\n\nexport const before = (ref: Reference): Reference => {\n  const index = chapterIndex(ref);\n  const indexBefore =\n    (((index - 1) % CHAPTER_COUNT) + CHAPTER_COUNT) % CHAPTER_COUNT\n  return reference(indexBefore);\n}\n\nexport const after = (ref: Reference): Reference =>\n  reference((chapterIndex(ref) + 1) % CHAPTER_COUNT);\n\nexport const pathStringToReference = (referenceString: string): Reference => {\n  let [bookNumber, book, chapterAndVerse] = referenceString.split(/\\s/);\n\n  if (!/^\\d+$/.test(bookNumber))\n    [book, chapterAndVerse, bookNumber] = [bookNumber, book, ''];\n\n  const [chapter, verse] = chapterAndVerse != null?\n    chapterAndVerse.split(':') : [1, 1];\n\n  return {\n    book: (((bookNumber? bookNumber + ' ' : '') +\n          book[0].toUpperCase() +\n          book.slice(1).toLowerCase()): any),\n    chapter: parseInt(chapter, 10),\n    verse: verse == null? 1 : parseInt(verse, 10)\n  };\n}\n\nexport const apiPathToReference = (pathname: string): Reference => {\n  const [,,,, dashedBook, chapterDotHtml] = pathname.split('/');\n  const normalizedBook = dashedBook\n    .replace(/-/g, ' ')\n    .replace('psalms', 'psalm');\n  const book = books.filter(b => b.toLowerCase() === normalizedBook)[0];\n  const chapter = parseInt(chapterDotHtml.split('.')[0], 10);\n\n  if (!book || Number.isNaN(chapter))\n    throw new Error(`Could not convert ${pathname} to a reference.`);\n\n  return {book, chapter, verse: 1};\n}\n\nexport const locationToReference = (location: Location): Reference =>\n  pathStringToReference(decodeURI(location.pathname)\n    .slice(1)\n    .replace(/\\++/g, ' ')\n    .replace(/^\\s+/, '')\n    .replace(/\\s+$/, ''));\n\nexport const chapterToLocation = ({book, chapter}: Reference): string =>\n  `/${book}+${chapter}`;\n\nexport const referenceToLocation = (reference: Reference): string =>\n  `/${reference.book}+${reference.chapter}:${reference.verse}`;\n\nexport const isEqual = (a: Reference, b: Reference): boolean =>\n  a.book === b.book && a.chapter === b.chapter && a.verse === b.verse;\n\n/** Convert a Reference to the element ID the ESV API puts in their markup.\n *\n * The v2 ESV API marks up the verses with:\n *\n *     <span class=verse-num id=vBBCCCVVV-X>VVV</span>\n *\n * Where BB is the book number, CCC is the chapter number, and VVV is the verse\n * number. These numbers are all 0-padded and start at one, so Genesis 1:1\n * would be v01001001-1.\n *\n * This is the inverse of verseNumIdToReference.\n */\nexport const referenceToVerseNumId = (r: Reference): string => {\n  const bookIdx = books.indexOf(r.book) + 1;\n  const book = bookIdx.toLocaleString('en', {minimumIntegerDigits: 2});\n  const chapter = r.chapter.toLocaleString('en', {minimumIntegerDigits: 3});\n  const verse = r.verse.toLocaleString('en', {minimumIntegerDigits: 3});\n\n  return `v${book}${chapter}${verse}-1`;\n};\n\n/** Convert an element ID the ESV API puts in their markup to a reference.\n *\n * The v2 ESV API marks up the verses with:\n *\n *     <span class=verse-num id=vBBCCCVVV-X>VVV</span>\n *\n * Where BB is the book number, CCC is the chapter number, and VVV is the verse\n * number. These numbers are all 0-padded and start at one, so Genesis 1:1\n * would be v01001001-1.\n *\n * This has also been updated to handle the markup pre-processing I do that\n * wraps the entire verse in a span that starts with \"vt\", so something like\n * \"vt01001001-1\".\n *\n * This is the inverse of referenceToVerseNumId.\n */\nexport const verseNumIdToReference = (id: string): Reference => {\n  const parsed = id.match(/^vt?(\\d\\d)(\\d\\d\\d)(\\d\\d\\d)/);\n\n  if (parsed == null)\n    throw new Error(`cannot convert ${id} to reference`);\n\n  const [, book, chapter, verse] = parsed;\n\n  return {\n    book: books[parseInt(book, 10) - 1],\n    chapter: parseInt(chapter, 10),\n    verse: parseInt(verse, 10),\n  };\n};\n\n\n","module.exports = require(\"regenerator-runtime\");\n","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","// @flow\n\nimport type {Reference} from './data/model';\n\nexport type Translation = 'kjv' | 'esv';\n\nexport type SetChapterText = {|\n  +type: 'set-chapter-text',\n  +translation: Translation,\n  +reference: Reference,\n  +text: string,\n|};\n\nexport const setChapterText = (\n        translation: Translation,\n        reference: Reference,\n        text: string,\n      ): SetChapterText =>\n    ({type: 'set-chapter-text', translation, reference, text});\n\nexport type AddRecent = {|\n  +type: 'add-recent',\n  +reference: Reference,\n|};\n\nexport const addRecent = (reference: Reference): AddRecent =>\n  ({type: 'add-recent', reference});\n\nexport type SetRecents = {|\n  +type: 'set-recents',\n  +recents: Array<Reference>,\n|};\n\nexport const setRecents = (recents: Array<Reference>): SetRecents =>\n  ({type: 'set-recents', recents});\n\nexport type Preferences = {|\n  +enableFocusMode: boolean,\n  +enableNightMode: boolean,\n  +hasConfirmedFocusMode: boolean,\n  +translation: Translation,\n|};\n\nexport type SettablePreferences = {\n  +enableFocusMode?: boolean,\n  +enableNightMode?: boolean,\n  +hasConfirmedFocusMode?: boolean,\n  +translation?: Translation,\n};\n\nexport type EnableFocusMode = {|\n  +type: 'enable-focus-mode',\n  +enabled: boolean,\n|};\n\nexport const enableFocusMode = (enabled: boolean): EnableFocusMode =>\n  ({type: 'enable-focus-mode', enabled});\n\nexport type EnableNightMode = {|\n  +type: 'enable-night-mode',\n  +enabled: boolean,\n|};\n\nexport const enableNightMode = (enabled: boolean): EnableNightMode =>\n  ({type: 'enable-night-mode', enabled});\n\nexport type SetPreferences = {|\n  +type: 'set-preferences',\n  +preferences: SettablePreferences,\n|};\n\nexport const setPreferences = (preferences: SettablePreferences):\n    SetPreferences =>\n  ({type: 'set-preferences', preferences});\n\nexport type AddToast = {|\n  +type: 'add-toast',\n  +text: string,\n|};\n\nexport const addToast = (text: string): AddToast => ({type: 'add-toast', text});\n\nexport type ConfirmFocusMode = {|+type: 'confirm-focus-mode'|};\n\nexport const confirmFocusMode = (): ConfirmFocusMode =>\n  ({type: 'confirm-focus-mode'});\n\nexport type Action =\n    SetChapterText\n  | AddRecent\n  | SetRecents\n  | EnableFocusMode\n  | EnableNightMode\n  | SetPreferences\n  | AddToast\n  | ConfirmFocusMode;\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export const FROM_DB_HEADER = 'x-from-db';\nexport const FROM_SERVICE_WORKER_HEADER = 'x-from-service-worker';\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","// @flow\nimport type {Store} from 'redux';\n\nimport {setChapterText} from '../actions';\nimport {FROM_DB_HEADER, FROM_SERVICE_WORKER_HEADER} from '../constants';\nimport log from '../log';\nimport type {Reference} from './model';\nimport {chapterIndex, before, after, CHAPTER_COUNT} from './model';\nimport type {State} from '../reducer';\nimport transform from './transform';\n\nexport const ESV_BASE = new URL('https://api.esv.org/v3/passage/html/');\nconst ESV_KEY = 'cecc457af593de97294057073c9be28d7ffdfaf9';\nconst KJV_BASE = new URL('https://everywherebible.org');\n\nexport type EsvApiJson = {|\n  +passages: Array<string>,\n|};\n\nexport type EsvApiResponse = {|\n  +headers: {get: (string) => ?string},\n  +url: string,\n  +status: number,\n  +ok: boolean,\n  +json: () => Promise<EsvApiJson>,\n|};\n\nexport const fetchOrThrow = (url: string | URL, init?: RequestOptions):\n    Promise<Response> =>\n  fetch(url, init)\n    .then((response: Response): Response => {\n      if (!response.ok)\n        throw new Error(`${response.url} failed with ${response.status}`);\n      const fromDb = response.headers.get(FROM_DB_HEADER);\n      const fromSw = response.headers.get(FROM_SERVICE_WORKER_HEADER);\n      const source = fromDb? 'from DB' : fromSw? 'from SW' : 'from network';\n      log(`Received ${url.toString()} ${source}`, 'font-size: 0.8em');\n      return response;\n    });\n\nconst esvChapterUrl = (reference: Reference): URL => {\n  const url = new URL('', ESV_BASE);\n  url.searchParams.set('q', `${reference.book} ${reference.chapter}`);\n  return url;\n};\n\nconst kjvChapterUrl = (reference: Reference): URL => {\n  const book = reference.book.toLowerCase()\n    .replace(/ /g, '-')\n    .replace(/psalm$/, 'psalms');\n  return new URL(`/api/v1/kjv/${book}/${reference.chapter}.html`, KJV_BASE);\n};\n\nexport const esvLookup = (url: URL): Promise<EsvApiResponse> => {\n  declare function fetchOrThrow(url: URL, options: mixed): Promise<EsvApiResponse>;\n\n  return fetchOrThrow(url, {\n    headers: {\n      authorization: `Token ${ESV_KEY}`,\n      accept: 'application/json',\n    }\n  });\n};\n\nconst fetchChapter = (store: Store, reference: Reference): Promise<string> => {\n  const translation = store.getState().preferences.translation;\n  const request: Promise<string> = translation === 'kjv'?\n    fetchOrThrow(kjvChapterUrl(reference))\n      .then(response => response.text()) :\n\n    esvLookup(esvChapterUrl(reference))\n      .then(response => {\n        const fromSw = response.headers.get(FROM_SERVICE_WORKER_HEADER);\n\n        return (response.json(): Promise<EsvApiJson>)\n          .then(obj => obj.passages[0])\n          .then(text => fromSw? text : transform(text));\n      });\n\n  request\n    .then(text => store.dispatch(setChapterText(translation, reference, text)));\n\n  return request;\n}\n\nconst indexIsCached = (state: State, index: number): boolean =>\n  state.chapters[state.preferences.translation][index] != null;\n\nexport const updateStoreWithPassageText = (store: Store, reference: Reference) => {\n  const state = store.getState();\n  const index = chapterIndex(reference);\n\n  if (!indexIsCached(state, index))\n    fetchChapter(store, reference);\n\n  if (index > 0 && !indexIsCached(state, index - 1))\n    fetchChapter(store, before(reference));\n\n  if (index < CHAPTER_COUNT && !indexIsCached(state, index + 1))\n    fetchChapter(store, after(reference));\n}\n","const envString = () => navigator && navigator.serviceWorker? 'main' : 'sw';\n\nexport default (message, format) =>\n  console.log(`${format != null? '%c' : ''}${envString()} | ${message}`, format);\n","// @flow\n\n/** thanks jake https://github.com/jakearchibald/idb-keyval */\n\n// begin flow lib declaration //////////////////////////////////////////////////\n\n// Until https://github.com/facebook/flow/pull/5216 gets merged?\n\n// Implemented by window & worker\ndeclare interface IDBEnvironment {\n  indexedDB: IDBFactory;\n}\n\ntype IDBDirection = 'next' | 'nextunique' | 'prev' | 'prevunique';\n\n// Implemented by window.indexedDB & worker.indexedDB\ndeclare interface IDBFactory {\n  open(name: string, version?: number): IDBOpenDBRequest;\n  deleteDatabase(name: string): IDBOpenDBRequest;\n  cmp(a: any, b: any): -1|0|1;\n}\n\ndeclare var indexedDB: IDBFactory;\n\ndeclare interface IDBRequest extends EventTarget {\n  result: any;\n  error: Error;\n  source: ?(IDBIndex | IDBObjectStore | IDBCursor);\n  transaction: IDBTransaction;\n  readyState: 'pending'|'done';\n  onerror: (err: any) => mixed;\n  onsuccess: (e: any) => mixed;\n}\n\ndeclare interface IDBOpenDBRequest extends IDBRequest {\n  onblocked: (e: any) => mixed;\n  onupgradeneeded: (e: any) => mixed;\n}\n\ndeclare interface IDBDatabase extends EventTarget {\n  close(): void;\n  createObjectStore(name: string, options?: {\n    keyPath?: ?(string|string[]),\n    autoIncrement?: bool\n  }): IDBObjectStore;\n  deleteObjectStore(name: string): void;\n  transaction(storeNames: string|string[], mode?: 'readonly'|'readwrite'|'versionchange'): IDBTransaction;\n  name: string;\n  version: number;\n  objectStoreNames: string[];\n  onabort: (e: any) => mixed;\n  onerror: (e: any) => mixed;\n  onversionchange: (e: any) => mixed;\n}\n\ndeclare interface IDBTransaction extends EventTarget {\n  abort(): void;\n  db: IDBDatabase;\n  error: Error;\n  mode: 'readonly'|'readwrite'|'versionchange';\n  name: string;\n  objectStore(name: string): IDBObjectStore;\n  onabort: (e: any) => mixed;\n  oncomplete: (e: any) => mixed;\n  onerror: (e: any) => mixed;\n}\n\ndeclare interface IDBObjectStore {\n  add(value: any, key?: any): IDBRequest;\n  autoIncrement: bool;\n  clear(): IDBRequest;\n  createIndex(indexName: string, keyPath: string|string[], optionalParameter?: {\n    unique?: bool,\n    multiEntry?: bool,\n  }): IDBIndex;\n  count(keyRange?: any|IDBKeyRange): IDBRequest;\n  delete(key: any): IDBRequest;\n  deleteIndex(indexName: string): void;\n  get(key: any): IDBRequest;\n  index(indexName: string): IDBIndex;\n  indexNames: string[];\n  name: string;\n  keyPath: any;\n  openCursor(range?: any|IDBKeyRange, direction?: IDBDirection): IDBRequest;\n  openKeyCursor(range?: any|IDBKeyRange, direction?: IDBDirection): IDBRequest;\n  put(value: any, key?: any): IDBRequest;\n  transaction : IDBTransaction;\n}\n\ndeclare interface IDBIndex extends EventTarget {\n  count(key?: any|IDBKeyRange): IDBRequest;\n  get(key: any|IDBKeyRange): IDBRequest;\n  getKey(key: any|IDBKeyRange): IDBRequest;\n  openCursor(range?: any|IDBKeyRange, direction?: IDBDirection): IDBRequest;\n  openKeyCursor(range?: any|IDBKeyRange, direction?: IDBDirection): IDBRequest;\n  name: string;\n  objectStore: IDBObjectStore;\n  keyPath: any;\n  multiEntry: bool;\n  unique: bool;\n}\n\ndeclare interface IDBKeyRange {\n  bound(lower: any, upper: any, lowerOpen?: bool, upperOpen?: bool): IDBKeyRange;\n  only(value: any): IDBKeyRange;\n  lowerBound(bound: any, open?: bool): IDBKeyRange;\n  upperBound(bound: any, open?: bool): IDBKeyRange;\n  lower: any;\n  upper: any;\n  lowerOpen: bool;\n  upperOpen: bool;\n}\n\ndeclare interface IDBCursor {\n  advance(count: number): void;\n  continue(key?: any): void;\n  delete(): IDBRequest;\n  update(newValue: any): IDBRequest;\n  source: IDBObjectStore|IDBIndex;\n  direction: IDBDirection;\n  key: any;\n  primaryKey: any;\n}\n\ndeclare interface IDBCursorWithValue extends IDBCursor {\n  value: any;\n}\n\n// end flow lib declaration ////////////////////////////////////////////////////\n\nexport type DbMetadata = {\n  name: string,\n  version: number,\n  stores: Array<string>,\n};\n\nexport default class KeyValStore<K: string | number, V> {\n  _db: Promise<IDBDatabase>;\n  _db_metadata: DbMetadata;\n  _store_name: string;\n\n  constructor(dbMetadata: DbMetadata, store: string) {\n    this._db_metadata = dbMetadata;\n    this._store_name = store;\n  }\n\n  db(): Promise<IDBDatabase> {\n    if (this._db == null)\n      this._db = new Promise((resolve, reject) => {\n        const request = indexedDB.open(this._db_metadata.name,\n                                              this._db_metadata.version);\n        request.onerror = () => reject(request.error);\n        // TODO: actually handle upgrade\n        request.onupgradeneeded = () => {\n          this._db_metadata.stores.forEach(name => {\n            try { request.result.deleteObjectStore(name) } catch (ignore) {}\n            request.result.createObjectStore(name);\n          });\n        }\n        request.onsuccess = () => {\n          resolve(request.result);\n        }\n      });\n    return this._db;\n  }\n\n  transact(type: 'readonly' | 'readwrite', callback: IDBObjectStore => any):\n      Promise<void> {\n    return this.db().then(db => new Promise((resolve, reject) => {\n      const transaction = db.transaction(this._store_name, type);\n      transaction.oncomplete = resolve;\n      transaction.onerror = () => reject(transaction.error);\n      callback(transaction.objectStore(this._store_name));\n    }))\n  }\n\n  get(key: K): Promise<V> {\n    var req;\n    return this.transact('readonly', store => req = store.get(key))\n      .then(() => {\n        if (typeof req.result === 'undefined') {\n          let keyString = '';\n          if (key.hasOwnProperty('toString'))\n            keyString = key.toString();\n          throw new Error(`Key ${keyString} not found`);\n        } else {\n          return (req.result: V);\n        }\n      });\n  }\n\n  set(key: K, value: V): Promise<void> {\n    return this.transact('readwrite', store => store.put(value, key));\n  }\n\n  all(): Promise<Array<{key: K, value: V}>> {\n    const entries = [];\n    return this.transact('readonly', store => {\n        const request = store.openCursor();\n        request.onsuccess = event => {\n          const cursor = event.target.result;\n          if (!cursor) return;\n          entries.push({key: cursor.key, value: cursor.value});\n          cursor.continue();\n        };\n      })\n      .then(() => entries);\n  }\n}\n","// @flow\n\nconst last = a => a[a.length - 1];\n\ntype TagEvent = {\n  +type: 'tag',\n  +name: string,\n  +isStart: boolean,\n  +attributes: {[string]: string},\n  +value: string,\n};\n\ntype TextEvent = {\n  +type: 'text',\n  +value: string,\n};\n\ntype ParseEvent = TagEvent | TextEvent;\n\ntype ParseEventWithStack = ParseEvent & {+stack: Array<TagEvent>};\n\nexport function* tagsAndText(html: string): Generator<ParseEvent, void, void> {\n  const context: Array<any> = [{type: 'document', start: 0}];\n  let index = -1;\n  let metadata: any = {};\n\n  while (index++ < html.length) {\n    const ctx: any = last(context);\n    if (ctx.type === 'document') {\n      if (html[index] === '<') {\n        if (ctx.start !== index)\n          yield {\n            type: 'text',\n            value: html.substring(ctx.start, index),\n          };\n\n        context.push({type: 'tag', start: index});\n        metadata = {isStart: html[index + 1] !== '/', attributes: {}};\n\n        if (html[index + 1] === '/')\n          index++;\n\n        context.push({type: 'tagname', start: index + 1});\n      }\n    } else if (ctx.type === 'tag') {\n      if (html[index] === '>') {\n        if (ctx.type === 'tagname')\n          metadata.name = html.substring(metadata.isStart? 1 : 2, index);\n\n        yield Object.assign({\n          type: 'tag',\n          value: html.substring(ctx.start, index + 1),\n        }, metadata);\n\n        context.pop();\n        const lastCtx: any = last(context);\n        lastCtx.start = index + 1;\n      } else if (html[index] !== ' ' && html[index] !== '/') {\n        context.push({type: 'attribute', start: index});\n        context.push({type: 'attributeName', start: index});\n      }\n    } else if (ctx.type === 'tagname') {\n      if (html[index] === ' ' || html[index] === '>') {\n        metadata.name = html.substring(ctx.start, index);\n        context.pop();\n\n        if (html[index] === '>')\n          index--;\n      }\n    } else if (ctx.type === 'attributeName') {\n      if (html[index] === '=') {\n        const attributeName = html.substring(ctx.start, index);\n        context.pop();\n        const lastCtx: any = last(context);\n        lastCtx.name = attributeName;\n        if (html[index + 1] === '\"') {\n          lastCtx.isQuoted = true;\n          index++;\n        }\n        lastCtx.start = index + 1;\n      }\n    } else if (ctx.type === 'attribute') {\n      const isAttribteEnd = ctx.isQuoted?\n        html[index] === '\"' && html[index - 1] !== '\\\\' :\n        html[index] === ' ' || html[index] === '>';\n      if (isAttribteEnd) {\n        metadata.attributes[ctx.name] = html.substring(ctx.start, index);\n        context.pop();\n        if (!ctx.isQuoted && html[index] === '>')\n          index--;\n      }\n    }\n  }\n\n  const ctx: any = last(context);\n  if (ctx.type === 'document' && ctx.start < index - 1)\n    yield {type: 'text', value: html.substring(ctx.start, index)};\n}\n\nexport function* stripTags(tagName: string, tagsAndText: Iterable<ParseEvent>):\n    Generator<ParseEvent, void, void> {\n  let inObjectTag = false;\n\n  for (let item of tagsAndText) {\n    if (item.type === 'tag' &&\n        item.isStart &&\n        item.name === tagName) {\n      inObjectTag = true;\n    } else if (item.type === 'tag' &&\n               !item.isStart &&\n               item.name === tagName) {\n      inObjectTag = false;\n    } else if (!inObjectTag) {\n      yield item;\n    }\n  }\n}\n\nexport function* addSpansAroundVerses(tagsAndText: Iterable<ParseEvent>):\n    Generator<ParseEvent, void, void> {\n  let inVerse = false;\n\n  for (let item of tagsAndText) {\n    if (inVerse &&\n        item.type === 'tag' &&\n        item.name === 'p' &&\n        !item.isStart) {\n      yield {\n        type: 'tag',\n        isStart: false,\n        value: '</span>',\n        name: 'span',\n        attributes: {},\n      };\n      inVerse = false;\n    } else if (item.type === 'tag' &&\n               /^(chapter|verse)-num(\\s.*)?$/.test(item.attributes.class)) {\n      if (inVerse) {\n        yield {\n          type: 'tag',\n          isStart: false,\n          value: '</span>',\n          name: 'span',\n          attributes: {},\n        };\n      }\n      inVerse = true;\n      const id = item.attributes.id.replace(/^v/, 'vt');\n      yield {\n        type: 'tag',\n        isStart: true,\n        value: `<span class=\"verse\" id=\"${id}\">`,\n        name: 'span',\n        attributes: {class: 'verse', id},\n      };\n    }\n\n    yield item;\n  }\n}\n\nexport function* withTagStack(tagsAndText: Iterable<ParseEvent>):\n    Generator<ParseEventWithStack, void, void> {\n  const stack: Array<TagEvent> = [];\n\n  for (let item of tagsAndText) {\n    if (item.type === 'tag')\n      yield {\n        type: 'tag',\n        name: item.name,\n        isStart: item.isStart,\n        attributes: item.attributes,\n        value: item.value,\n        stack: stack.slice(0),\n      };\n    else\n      yield {...item, stack: stack.slice(0)};\n\n    if (item.type === 'tag')\n      if (item.isStart)\n        stack.push(item);\n      else\n        stack.pop();\n  }\n}\n\nexport function* addDropCapsClassToFirstLetter(\n    tagsAndTextWithStack: Iterable<any>): Generator<ParseEvent, void, void> {\n  let sawFirstReferenceNumber = false;\n  let sawClosingSpanOrB = false;\n  let addedClass = false;\n\n  for (let item of tagsAndTextWithStack) {\n    if (addedClass) {\n      yield item;\n      continue;\n    }\n\n    const {type, name, isStart, value, attributes, stack} = item;\n\n    if (!sawFirstReferenceNumber &&\n        type === 'tag' &&\n        /^(chapter|verse)-num$/.test(attributes.class)) {\n      sawFirstReferenceNumber = true;\n      yield item;\n      continue;\n    }\n\n    if (sawFirstReferenceNumber &&\n        !sawClosingSpanOrB &&\n        type === 'tag' &&\n        (name === 'span' || name === 'b') &&\n        !isStart) {\n      sawClosingSpanOrB = true;\n      yield item;\n      continue;\n    }\n\n    if (sawClosingSpanOrB &&\n        (last(stack) &&\n         last(stack).attributes &&\n         (last(stack).attributes.class === 'verse' ||\n          last(stack).attributes.class === 'woc')) &&\n        type === 'text') {\n      const parts = value.match(/^([\\s\"]*)(&#?[\\w]+;)*([\\w])(.*)/);\n\n      if (!parts) {\n        yield item;\n        continue;\n      }\n\n      const [, leadingWhitespace, leadingEntities, firstLetter, rest] = parts;\n\n      if (leadingWhitespace)\n        yield {type: 'text', value: leadingWhitespace};\n\n      yield {\n        type: 'tag',\n        isStart: true,\n        value: `<span class=\"first-letter\">`,\n        name: 'span',\n        attributes: {class: 'first-letter'},\n      }\n\n      if (leadingEntities)\n        yield {type: 'text', value: leadingEntities};\n      else\n        yield {type: 'text', value: firstLetter};\n\n      yield {\n        type: 'tag',\n        isStart: false,\n        value: '</span>',\n        name: 'span',\n        attributes: {},\n      };\n\n      if (rest)\n        if (leadingEntities)\n          yield {type: 'text', value: firstLetter + rest};\n        else\n          yield {type: 'text', value: rest};\n\n      addedClass = true;\n      continue;\n    }\n\n    yield item;\n  }\n}\n\nexport function* withSurroundingEvents(tagsAndText: Iterable<any>):\n    Generator<any, void, void> {\n  const window = [null];\n\n  for (let item of tagsAndText) {\n    if (window.length === 3)\n      yield Object.assign({before: window[0], after: window[2]}, window[1]);\n\n    window.push(item);\n\n    if (window.length > 3)\n      window.shift();\n  }\n\n  yield Object.assign({before: window[0], after: window[2]}, window[1]);\n  yield Object.assign({before: window[1], after: null}, window[2]);\n}\n\nexport function* stripCopyright(\n    tagsAndTextWithSurroundingEvents: Iterable<any>):\n      Generator<any, void, void> {\n  let inTag = false;\n\n  for (let item of tagsAndTextWithSurroundingEvents) {\n    if (item.type === 'text' &&\n        item.value[item.value.length - 1] === '(' &&\n        item.after.attributes &&\n        item.after.attributes.class === 'copyright') {\n      yield {\n        type: 'text',\n        value: item.value.substring(0, item.value.length - 1),\n      };\n    } else if (item.type === 'tag' &&\n               item.attributes.class === 'copyright') {\n      // Don't yield this item\n      inTag = true;\n    } else if (inTag) {\n      if (item.type === 'tag' && !item.isStart)\n        inTag = false;\n    } else if (item.type === 'text' &&\n               item.value[0] === ')' &&\n               last(item.before.stack).attributes &&\n               last(item.before.stack).attributes.class === 'copyright') {\n      const value = item.value.substring(1);\n      if (value)\n        yield {type: 'text', value};\n    } else {\n      yield item;\n    }\n  }\n}\n\nexport default (text: string): string => Array.from(\n    stripCopyright(\n      withSurroundingEvents(\n        addDropCapsClassToFirstLetter(\n          withTagStack(\n            addSpansAroundVerses(\n              stripTags('script',\n                stripTags('object',\n                  tagsAndText(text)))))))))\n  .map(i => i.value)\n  .join('');\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar runtime = function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n    return generator;\n  }\n\n  exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n\n  var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n\n\n  var IteratorPrototype = {};\n\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  exports.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  }; // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n\n\n  exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function (error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    } // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n\n\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n\n  exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n\n  exports.async = function (innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n    return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        } // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n        var record = tryCatch(innerFn, self, context);\n\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted; // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  } // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n      context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    } // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n\n\n    context.delegate = null;\n    return ContinueSentinel;\n  } // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n\n\n  defineIteratorMethods(Gp);\n  Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    keys.reverse(); // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      } // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n\n\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n          return next;\n        };\n\n        return next.next = next;\n      }\n    } // Return an iterator with no values.\n\n\n    return {\n      next: doneResult\n    };\n  }\n\n  exports.values = values;\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0; // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n      this.method = \"next\";\n      this.arg = undefined;\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n    stop: function stop() {\n      this.done = true;\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      } // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  }; // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n\n  return exports;\n}( // If this script is executing as a CommonJS module, use module.exports\n// as the regeneratorRuntime namespace. Otherwise create a new empty\n// object. Either way, the resulting object will be used to initialize\n// the regeneratorRuntime variable at the top of this file.\ntypeof module === \"object\" ? module.exports : {});\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}","// @flow\n\nimport KeyValStore from '../key-val-store';\n\nlet _instance;\n\nconst STORE_NAME = 'chapters';\n\nconst DB_METADATA = {\n  name: 'bible-esv',\n  version: 2,\n  stores: [STORE_NAME],\n};\n\nexport class EsvBibleStore extends KeyValStore<number, string> {\n  constructor() {\n    super(DB_METADATA, STORE_NAME);\n  }\n}\n\nexport default (): EsvBibleStore => {\n  if (_instance == null)\n    _instance = new EsvBibleStore();\n\n  return _instance;\n}\n","// @flow\n\nimport KeyValStore from '../key-val-store';\n\nlet _instance;\n\nconst STORE_NAME = 'chapters';\n\nconst DB_METADATA = {\n  name: 'bible-kjv',\n  version: 2,\n  stores: [STORE_NAME],\n};\n\nexport class KjvBibleStore extends KeyValStore<number, string> {\n  constructor() {\n    super(DB_METADATA, STORE_NAME);\n  }\n}\n\nexport default (): KjvBibleStore => {\n  if (_instance == null)\n    _instance = new KjvBibleStore();\n\n  return _instance;\n}\n","// @flow\n/**\n * Service worker for app-specific logic.\n *\n * In development, this code will run alone as a service worker, and in\n * production this will get appended to the \"sw-precache\" code that's generated\n * by the build.\n */\n/* eslint-disable no-restricted-globals */\n\nimport {FROM_DB_HEADER, FROM_SERVICE_WORKER_HEADER} from '../constants';\nimport esvStore from '../db/bibles/esv';\nimport kjvStore from '../db/bibles/kjv';\nimport {\n  pathStringToReference,\n  apiPathToReference,\n  chapterIndex,\n} from '../data/model';\nimport transform from '../data/transform';\nimport {ESV_BASE, fetchOrThrow, esvLookup} from '../data/fetcher';\nimport type {EsvApiJson} from '../data/fetcher';\nimport log from '../log';\n\nconst isPassageLookup = (url: URL): boolean =>\n  ESV_BASE.hostname === url.hostname || /^\\/api/.test(url.pathname);\n\nconst logStorage = (url, reference, index) =>\n  log(`Storing ${url.toString()} with reference ${JSON.stringify(reference)} as ${index}`,\n      'color: #888; font-size: 0.8em');\n\nconst fromKjvDb = (url: URL): Promise<string> => {\n  return kjvStore().get(chapterIndex(apiPathToReference(url.pathname)));\n}\n\nconst toKjvDb = (url: URL, text: string) => {\n  const reference = apiPathToReference(url.pathname);\n  const index = chapterIndex(reference);\n  logStorage(url, reference, index);\n  kjvStore().set(index, text);\n};\n\nconst fromEsvDb = (url: URL): Promise<string> => {\n  const passageString = url.searchParams.get('q');\n  return esvStore().get(chapterIndex(pathStringToReference(passageString)));\n}\n\nconst toEsvDb = (url: URL, text: string) => {\n  const passage = url.searchParams.get('q');\n  const reference = pathStringToReference(passage);\n  const index = chapterIndex(reference);\n\n  if (Number.isNaN(index))\n    return;\n\n  logStorage(url, reference, index);\n  esvStore().set(index, text);\n};\n\nconst createSwResponse = (text: string) =>\n  new Response(text, {\n    status: 200,\n    headers: {[FROM_SERVICE_WORKER_HEADER]: true},\n  });\n\nself.addEventListener('fetch', event => {\n  const request: Request = event.request;\n  const url = new URL(request.url);\n  const isEsv = ESV_BASE.hostname === url.hostname;\n\n  if (!isPassageLookup(url))\n    return;\n\n  const fromDb: Promise<string> = isEsv? fromEsvDb(url) : fromKjvDb(url);\n\n  event.respondWith(fromDb\n    .then(text => {\n      if (isEsv) {\n        const esvApiJson: EsvApiJson = {passages: [text]};\n        text = JSON.stringify(esvApiJson);\n      }\n      log(`Serving ${url.pathname}${url.search} from db`,\n          'color: #23bd23; font-size: 0.8em');\n      return new Response(text, {\n        status: 200,\n        headers: {[FROM_DB_HEADER]: true, [FROM_SERVICE_WORKER_HEADER]: true},\n      });\n    })\n    .catch(error => {\n      const request: Promise<Response> = isEsv?\n        esvLookup(url)\n          .then(response => response.json())\n          .then(esvApiJson => esvApiJson.passages[0])\n          .then(transform)\n          .then(text => {\n            const esvApiJson: EsvApiJson = {passages: [text]};\n            toEsvDb(url, text);\n            return createSwResponse(JSON.stringify(esvApiJson));\n          }) :\n\n        fetchOrThrow(url)\n          .then(response => response.text())\n          .then(text => {\n            toKjvDb(url, text);\n            return createSwResponse(text);\n          });\n\n      return request;\n    }));\n});\n"],"sourceRoot":""}