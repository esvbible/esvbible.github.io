{"version":3,"sources":["../static/js/service-worker.0b065069.js","../webpack/bootstrap 6b03a2aa9a35e4f32670","data/model.js","service-worker/index.js","data/db.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","12","__webpack_exports__","chapterCounts","CHAPTER_COUNT","books","chapterIndex","reference","before","after","stringToReference","locationToReference","referenceToLocation","isEqual","referenceToVerseNumId","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","length","err","Array","isArray","TypeError","Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalm","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation","chaptersBefore","getOwnPropertyNames","book","chapter","index","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","current","return","Error","verse","ref","referenceString","_referenceString$spli","split","_referenceString$spli2","bookNumber","chapterAndVerse","test","_ref","_ref2","_ref3","toUpperCase","slice","toLowerCase","parseInt","location","decodeURI","pathname","replace","_ref4","a","b","r","indexOf","toLocaleString","minimumIntegerDigits","293","294","__WEBPACK_IMPORTED_MODULE_0__data_db__","__WEBPACK_IMPORTED_MODULE_1__data_model__","isPassageLookup","url","fromDb","searchParams","toDb","response","text","then","URL","passage","set","self","addEventListener","event","request","respondWith","Response","status","catch","error","fromNetwork","fetch","clone","39","_classCallCheck","instance","Constructor","_createClass","defineProperties","target","props","descriptor","writable","key","protoProps","staticProps","stores","DB_NAME","STORE_NAMES","KeyValStore","db","arguments","store","this","_db_name","_store_name","_this","_db","Promise","resolve","reject","indexedDB","open","onerror","onupgradeneeded","forEach","result","deleteObjectStore","ignore","createObjectStore","onsuccess","type","callback","_this2","transaction","oncomplete","objectStore","req","transact","put","entries","openCursor","cursor","continue","_ref$db","_ref$store"],"mappings":"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","file":"static/js/service-worker.0b065069.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 293);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 12:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return chapterCounts; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CHAPTER_COUNT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return books; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return chapterIndex; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return reference; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return before; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return after; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"l\", function() { return stringToReference; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return locationToReference; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return referenceToLocation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return isEqual; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return referenceToVerseNumId; });\nvar _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"])_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();var chapterCounts={Genesis:50,Exodus:40,Leviticus:27,Numbers:36,Deuteronomy:34,Joshua:24,Judges:21,Ruth:4,'1 Samuel':31,'2 Samuel':24,'1 Kings':22,'2 Kings':25,'1 Chronicles':29,'2 Chronicles':36,Ezra:10,Nehemiah:13,Esther:10,Job:42,Psalm:150,Proverbs:31,Ecclesiastes:12,'Song of Solomon':8,Isaiah:66,Jeremiah:52,Lamentations:5,Ezekiel:48,Daniel:12,Hosea:14,Joel:3,Amos:9,Obadiah:1,Jonah:4,Micah:7,Nahum:3,Habakkuk:3,Zephaniah:3,Haggai:2,Zechariah:14,Malachi:4,Matthew:28,Mark:16,Luke:24,John:21,Acts:28,Romans:16,'1 Corinthians':16,'2 Corinthians':13,Galatians:6,Ephesians:6,Philippians:4,Colossians:4,'1 Thessalonians':5,'2 Thessalonians':3,'1 Timothy':6,'2 Timothy':4,Titus:3,Philemon:1,Hebrews:13,James:5,'1 Peter':5,'2 Peter':3,'1 John':5,'2 John':1,'3 John':1,Jude:1,Revelation:22};var chaptersBefore={Genesis:0,Exodus:50,Leviticus:90,Numbers:117,Deuteronomy:153,Joshua:187,Judges:211,Ruth:232,'1 Samuel':236,'2 Samuel':267,'1 Kings':291,'2 Kings':313,'1 Chronicles':338,'2 Chronicles':367,Ezra:403,Nehemiah:413,Esther:426,Job:436,Psalm:478,Proverbs:628,Ecclesiastes:659,'Song of Solomon':671,Isaiah:679,Jeremiah:745,Lamentations:797,Ezekiel:802,Daniel:850,Hosea:862,Joel:876,Amos:879,Obadiah:888,Jonah:889,Micah:893,Nahum:900,Habakkuk:903,Zephaniah:906,Haggai:909,Zechariah:911,Malachi:925,Matthew:929,Mark:957,Luke:973,John:997,Acts:1018,Romans:1046,'1 Corinthians':1062,'2 Corinthians':1078,Galatians:1091,Ephesians:1097,Philippians:1103,Colossians:1107,'1 Thessalonians':1111,'2 Thessalonians':1116,'1 Timothy':1119,'2 Timothy':1125,Titus:1129,Philemon:1132,Hebrews:1133,James:1146,'1 Peter':1151,'2 Peter':1156,'1 John':1159,'2 John':1164,'3 John':1165,Jude:1166,Revelation:1167};var CHAPTER_COUNT=1189;var books=Object.getOwnPropertyNames(chaptersBefore);var chapterIndex=function chapterIndex(reference){return chaptersBefore[reference.book]+reference.chapter-1;};var reference=function reference(index){var book=void 0;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=books[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var current=_step.value;if(chaptersBefore[current]<=index)book=current;else break;}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}if(book==null)throw new Error('reference index is out of range');return{book:book,chapter:index-chaptersBefore[book]+1,verse:1};};var before=function before(ref){var index=chapterIndex(ref);var indexBefore=((index-1)%CHAPTER_COUNT+CHAPTER_COUNT)%CHAPTER_COUNT;return reference(indexBefore);};var after=function after(ref){return reference((chapterIndex(ref)+1)%CHAPTER_COUNT);};var stringToReference=function stringToReference(referenceString){var _referenceString$spli=referenceString.split(/\\s/),_referenceString$spli2=_slicedToArray(_referenceString$spli,3),bookNumber=_referenceString$spli2[0],book=_referenceString$spli2[1],chapterAndVerse=_referenceString$spli2[2];if(!/^\\d+$/.test(bookNumber)){;var _ref=[bookNumber,book,''];book=_ref[0];chapterAndVerse=_ref[1];bookNumber=_ref[2];}var _ref2=chapterAndVerse!=null?chapterAndVerse.split(':'):[1,1],_ref3=_slicedToArray(_ref2,2),chapter=_ref3[0],verse=_ref3[1];return{book:(bookNumber?bookNumber+' ':'')+book[0].toUpperCase()+book.slice(1).toLowerCase(),chapter:parseInt(chapter,10),verse:verse==null?1:parseInt(verse,10)};};var locationToReference=function locationToReference(location){return stringToReference(decodeURI(location.pathname).slice(1).replace(/\\++/g,' ').replace(/^\\s+/,'').replace(/\\s+$/,''));};var referenceToLocation=function referenceToLocation(_ref4){var book=_ref4.book,chapter=_ref4.chapter;return'/'+book+'+'+chapter;};var isEqual=function isEqual(a,b){return a.book===b.book&&a.chapter===b.chapter&&a.verse===b.verse;};/** Convert a Reference to the element ID the ESV API puts in their markup.\n *\n * The v2 ESV API marks up the verses with:\n *\n *     <span class=verse-num id=vBBCCCVVV-X>VVV</span>\n *\n * Where BB is the book number, CCC is the chapter number, and VVV is the verse\n * number. These numbers are all 0-padded and start at one, so Genesis 1:1\n * would be v01001001-1.\n */var referenceToVerseNumId=function referenceToVerseNumId(r){var bookIdx=books.indexOf(r.book)+1;var book=bookIdx.toLocaleString('en',{minimumIntegerDigits:2});var chapter=r.chapter.toLocaleString('en',{minimumIntegerDigits:3});var verse=r.verse.toLocaleString('en',{minimumIntegerDigits:3});return'v'+book+chapter+verse+'-1';};\n\n/***/ }),\n\n/***/ 293:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(294);\n\n\n/***/ }),\n\n/***/ 294:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__data_db__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__data_model__ = __webpack_require__(12);\n/**\n * Service worker for app-specific logic.\n *\n * In development, this code will run alone as a service worker, and in\n * production this will get appended to the \"sw-precache\" code that's generated\n * by the build.\n *//* eslint-disable no-restricted-globals */var isPassageLookup=function isPassageLookup(url){return /^\\/v2\\/rest\\/passageQuery/.test(url.pathname);};var fromDb=function fromDb(url){return Object(__WEBPACK_IMPORTED_MODULE_0__data_db__[\"a\" /* default */])().get(Object(__WEBPACK_IMPORTED_MODULE_1__data_model__[\"f\" /* chapterIndex */])(Object(__WEBPACK_IMPORTED_MODULE_1__data_model__[\"l\" /* stringToReference */])(url.searchParams.get('passage'))));};var toDb=function toDb(response){return response.text().then(function(text){var url=new URL(response.url);var passage=url.searchParams.get('passage');var reference=Object(__WEBPACK_IMPORTED_MODULE_1__data_model__[\"l\" /* stringToReference */])(passage);var index=Object(__WEBPACK_IMPORTED_MODULE_1__data_model__[\"f\" /* chapterIndex */])(reference);if(false)console.log('storing '+url.toString()+' ('+passage+')\\n                     with reference '+JSON.stringify(reference)+'\\n                     as '+index);Object(__WEBPACK_IMPORTED_MODULE_0__data_db__[\"a\" /* default */])().set(index,text);});};self.addEventListener('fetch',function(event){var url=new URL(event.request.url);if(isPassageLookup(url))event.respondWith(fromDb(url).then(function(text){return new Response(text,{status:200});}).catch(function(error){var fromNetwork=fetch(event.request);fromNetwork.then(function(response){return response.clone();}).then(toDb);return fromNetwork;}));});\n\n/***/ }),\n\n/***/ 39:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export DB_NAME */\n/* unused harmony export STORE_NAMES */\n/* unused harmony export KeyValStore */\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}/** thanks jake https://github.com/jakearchibald/idb-keyval */var stores={};var DB_NAME='esv';var STORE_NAMES=['chapters','recents','preferences'];var KeyValStore=function(){function KeyValStore(){var db=arguments.length>0&&arguments[0]!==undefined?arguments[0]:DB_NAME;var store=arguments.length>1&&arguments[1]!==undefined?arguments[1]:STORE_NAMES[0];_classCallCheck(this,KeyValStore);this._db_name=db;this._store_name=store;}_createClass(KeyValStore,[{key:'db',value:function db(){var _this=this;if(this._db==null)this._db=new Promise(function(resolve,reject){var request=indexedDB.open(_this._db_name,3);request.onerror=function(){return reject(request.error);};// TODO: actually handle upgrade\nrequest.onupgradeneeded=function(){STORE_NAMES.forEach(function(name){try{request.result.deleteObjectStore(name);}catch(ignore){}request.result.createObjectStore(name);});};request.onsuccess=function(){resolve(request.result);};});return this._db;}},{key:'transact',value:function transact(type,callback){var _this2=this;return this.db().then(function(db){return new Promise(function(resolve,reject){var transaction=db.transaction(_this2._store_name,type);transaction.oncomplete=resolve;transaction.onerror=function(){return reject(transaction.error);};callback(transaction.objectStore(_this2._store_name));});});}},{key:'get',value:function get(key){var req;return this.transact('readonly',function(store){return req=store.get(key);}).then(function(){if(typeof req.result==='undefined')throw new Error('Key '+key+' not found');else return req.result;});}},{key:'set',value:function set(key,value){return this.transact('readwrite',function(store){return store.put(value,key);});}},{key:'all',value:function all(){var entries=[];return this.transact('readonly',function(store){var request=store.openCursor();request.onsuccess=function(event){var cursor=event.target.result;if(!cursor)return;entries.push({key:cursor.key,value:cursor.value});cursor.continue();};}).then(function(){return entries;});}}]);return KeyValStore;}();/* harmony default export */ __webpack_exports__[\"a\"] = (function(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$db=_ref.db,db=_ref$db===undefined?DB_NAME:_ref$db,_ref$store=_ref.store,store=_ref$store===undefined?STORE_NAMES[0]:_ref$store;var key=db+'|'+store;if(stores[key]==null)stores[key]=new KeyValStore(db,store);return stores[key];});\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// static/js/service-worker.0b065069.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 293);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6b03a2aa9a35e4f32670","// @flow\n\nexport const chapterCounts = {\n  Genesis: 50,\n  Exodus: 40,\n  Leviticus: 27,\n  Numbers: 36,\n  Deuteronomy: 34,\n  Joshua: 24,\n  Judges: 21,\n  Ruth: 4,\n  '1 Samuel': 31,\n  '2 Samuel': 24,\n  '1 Kings': 22,\n  '2 Kings': 25,\n  '1 Chronicles': 29,\n  '2 Chronicles': 36,\n  Ezra: 10,\n  Nehemiah: 13,\n  Esther: 10,\n  Job: 42,\n  Psalm: 150,\n  Proverbs: 31,\n  Ecclesiastes: 12,\n  'Song of Solomon': 8,\n  Isaiah: 66,\n  Jeremiah: 52,\n  Lamentations: 5,\n  Ezekiel: 48,\n  Daniel: 12,\n  Hosea: 14,\n  Joel: 3,\n  Amos: 9,\n  Obadiah: 1,\n  Jonah: 4,\n  Micah: 7,\n  Nahum: 3,\n  Habakkuk: 3,\n  Zephaniah: 3,\n  Haggai: 2,\n  Zechariah: 14,\n  Malachi: 4,\n  Matthew: 28,\n  Mark: 16,\n  Luke: 24,\n  John: 21,\n  Acts: 28,\n  Romans: 16,\n  '1 Corinthians': 16,\n  '2 Corinthians': 13,\n  Galatians: 6,\n  Ephesians: 6,\n  Philippians: 4,\n  Colossians: 4,\n  '1 Thessalonians': 5,\n  '2 Thessalonians': 3,\n  '1 Timothy': 6,\n  '2 Timothy': 4,\n  Titus: 3,\n  Philemon: 1,\n  Hebrews: 13,\n  James: 5,\n  '1 Peter': 5,\n  '2 Peter': 3,\n  '1 John': 5,\n  '2 John': 1,\n  '3 John': 1,\n  Jude: 1,\n  Revelation: 22,\n};\n\nconst chaptersBefore = {\n  Genesis: 0,\n  Exodus: 50,\n  Leviticus: 90,\n  Numbers: 117,\n  Deuteronomy: 153,\n  Joshua: 187,\n  Judges: 211,\n  Ruth: 232,\n  '1 Samuel': 236,\n  '2 Samuel': 267,\n  '1 Kings': 291,\n  '2 Kings': 313,\n  '1 Chronicles': 338,\n  '2 Chronicles': 367,\n  Ezra: 403,\n  Nehemiah: 413,\n  Esther: 426,\n  Job: 436,\n  Psalm: 478,\n  Proverbs: 628,\n  Ecclesiastes: 659,\n  'Song of Solomon': 671,\n  Isaiah: 679,\n  Jeremiah: 745,\n  Lamentations: 797,\n  Ezekiel: 802,\n  Daniel: 850,\n  Hosea: 862,\n  Joel: 876,\n  Amos: 879,\n  Obadiah: 888,\n  Jonah: 889,\n  Micah: 893,\n  Nahum: 900,\n  Habakkuk: 903,\n  Zephaniah: 906,\n  Haggai: 909,\n  Zechariah: 911,\n  Malachi: 925,\n  Matthew: 929,\n  Mark: 957,\n  Luke: 973,\n  John: 997,\n  Acts: 1018,\n  Romans: 1046,\n  '1 Corinthians': 1062,\n  '2 Corinthians': 1078,\n  Galatians: 1091,\n  Ephesians: 1097,\n  Philippians: 1103,\n  Colossians: 1107,\n  '1 Thessalonians': 1111,\n  '2 Thessalonians': 1116,\n  '1 Timothy': 1119,\n  '2 Timothy': 1125,\n  Titus: 1129,\n  Philemon: 1132,\n  Hebrews: 1133,\n  James: 1146,\n  '1 Peter': 1151,\n  '2 Peter': 1156,\n  '1 John': 1159,\n  '2 John': 1164,\n  '3 John': 1165,\n  Jude: 1166,\n  Revelation: 1167\n};\n\nexport const CHAPTER_COUNT = 1189;\n\ntype Book = $Keys<typeof chapterCounts>;\n\nexport const books: Array<Book> = Object.getOwnPropertyNames(chaptersBefore);\n\nexport type Reference = {\n  +book: Book,\n  +chapter: number,\n  +verse: number\n}\n\nexport type Chapter = {\n  +reference: Reference,\n  +text: string\n}\n\nexport const chapterIndex = (reference: Reference): number => {\n  return chaptersBefore[reference.book] + reference.chapter - 1;\n}\n\nexport const reference = (index: number): Reference => {\n  let book;\n\n  for (let current of books)\n    if (chaptersBefore[current] <= index)\n      book = current\n    else\n      break;\n\n  if (book == null)\n    throw new Error('reference index is out of range');\n\n  return {book, chapter: index - chaptersBefore[book] + 1, verse: 1};\n}\n\nexport const before = (ref: Reference): Reference => {\n  const index = chapterIndex(ref);\n  const indexBefore =\n    (((index - 1) % CHAPTER_COUNT) + CHAPTER_COUNT) % CHAPTER_COUNT\n  return reference(indexBefore);\n}\n\nexport const after = (ref: Reference): Reference =>\n  reference((chapterIndex(ref) + 1) % CHAPTER_COUNT);\n\nexport const stringToReference = (referenceString: string): Reference => {\n  let [bookNumber, book, chapterAndVerse] = referenceString.split(/\\s/);\n\n  if (!/^\\d+$/.test(bookNumber))\n    [book, chapterAndVerse, bookNumber] = [bookNumber, book, ''];\n\n  const [chapter, verse] = chapterAndVerse != null?\n    chapterAndVerse.split(':') : [1, 1];\n\n  return {\n    book: (((bookNumber? bookNumber + ' ' : '') +\n          book[0].toUpperCase() +\n          book.slice(1).toLowerCase()): any),\n    chapter: parseInt(chapter, 10),\n    verse: verse == null? 1 : parseInt(verse, 10)\n  };\n}\n\nexport const locationToReference = (location: Location): Reference =>\n  stringToReference(decodeURI(location.pathname)\n    .slice(1)\n    .replace(/\\++/g, ' ')\n    .replace(/^\\s+/, '')\n    .replace(/\\s+$/, ''));\n\nexport const referenceToLocation = ({book, chapter}: Reference): string =>\n  `/${book}+${chapter}`;\n\nexport const isEqual = (a: Reference, b: Reference): boolean =>\n  a.book === b.book && a.chapter === b.chapter && a.verse === b.verse;\n\n/** Convert a Reference to the element ID the ESV API puts in their markup.\n *\n * The v2 ESV API marks up the verses with:\n *\n *     <span class=verse-num id=vBBCCCVVV-X>VVV</span>\n *\n * Where BB is the book number, CCC is the chapter number, and VVV is the verse\n * number. These numbers are all 0-padded and start at one, so Genesis 1:1\n * would be v01001001-1.\n */\nexport const referenceToVerseNumId = (r: Reference): string => {\n  const bookIdx = books.indexOf(r.book) + 1;\n  const book = bookIdx.toLocaleString('en', {minimumIntegerDigits: 2});\n  const chapter = r.chapter.toLocaleString('en', {minimumIntegerDigits: 3});\n  const verse = r.verse.toLocaleString('en', {minimumIntegerDigits: 3});\n\n  return `v${book}${chapter}${verse}-1`;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/model.js","// @flow\n/**\n * Service worker for app-specific logic.\n *\n * In development, this code will run alone as a service worker, and in\n * production this will get appended to the \"sw-precache\" code that's generated\n * by the build.\n */\n/* eslint-disable no-restricted-globals */\n\nimport store from '../data/db';\nimport {stringToReference, chapterIndex} from '../data/model';\n\nconst isPassageLookup = (url: URL): boolean =>\n  /^\\/v2\\/rest\\/passageQuery/.test(url.pathname);\n\nconst fromDb = (url: URL): Promise<string> =>\n  store().get(chapterIndex(stringToReference(url.searchParams.get('passage'))));\n\nconst toDb = (response: Response): Promise<any> =>\n  response.text()\n    .then(text => {\n      const url = new URL(response.url);\n      const passage = url.searchParams.get('passage');\n      const reference = stringToReference(passage);\n      const index = chapterIndex(reference);\n\n      if (process.env.NODE_ENV === 'development')\n        console.log(`storing ${url.toString()} (${passage})\n                     with reference ${JSON.stringify(reference)}\n                     as ${index}`);\n\n      store().set(index, text);\n    });\n\nself.addEventListener('fetch', event => {\n  const url = new URL(event.request.url);\n  if (isPassageLookup(url))\n    event.respondWith(fromDb(url)\n      .then(text => new Response(text, {status: 200}))\n      .catch(error => {\n        const fromNetwork = fetch(event.request);\n        fromNetwork.then(response => response.clone()).then(toDb);\n        return fromNetwork;\n      }));\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/service-worker/index.js","/** thanks jake https://github.com/jakearchibald/idb-keyval */\n\nconst stores = {};\n\nexport const DB_NAME = 'esv';\nexport const STORE_NAMES = ['chapters', 'recents', 'preferences'];\n\nexport class KeyValStore {\n  constructor(db = DB_NAME, store = STORE_NAMES[0]) {\n    this._db_name = db;\n    this._store_name = store;\n  }\n\n  db() {\n    if (this._db == null)\n      this._db = new Promise((resolve, reject) => {\n        const request = indexedDB.open(this._db_name, 3);\n        request.onerror = () => reject(request.error);\n        // TODO: actually handle upgrade\n        request.onupgradeneeded = () => {\n          STORE_NAMES.forEach(name => {\n            try { request.result.deleteObjectStore(name) } catch (ignore) {}\n            request.result.createObjectStore(name);\n          });\n        }\n        request.onsuccess = () => {\n          resolve(request.result);\n        }\n      });\n    return this._db;\n  }\n\n  transact(type, callback) {\n    return this.db().then(db => new Promise((resolve, reject) => {\n      const transaction = db.transaction(this._store_name, type);\n      transaction.oncomplete = resolve;\n      transaction.onerror = () => reject(transaction.error);\n      callback(transaction.objectStore(this._store_name));\n    }))\n  }\n\n  get(key) {\n    var req;\n    return this.transact('readonly', store => req = store.get(key))\n      .then(() => {\n        if (typeof req.result === 'undefined')\n          throw new Error(`Key ${key} not found`);\n        else\n          return req.result;\n      });\n  }\n\n  set(key, value) {\n    return this.transact('readwrite', store => store.put(value, key));\n  }\n\n  all() {\n    const entries = [];\n    return this.transact('readonly', store => {\n        const request = store.openCursor();\n        request.onsuccess = event => {\n          const cursor = event.target.result;\n          if (!cursor) return;\n          entries.push({key: cursor.key, value: cursor.value});\n          cursor.continue();\n        };\n      })\n      .then(() => entries);\n  }\n}\n\nexport default ({db = DB_NAME, store = STORE_NAMES[0]} = {}) => {\n  const key = db + '|' + store;\n  if (stores[key] == null)\n    stores[key] = new KeyValStore(db, store);\n  return stores[key];\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/db.js"],"sourceRoot":""}